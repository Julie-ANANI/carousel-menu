<ng-container *ngIf="fullAnswer.answers && (fullAnswer.answers[question.identifier] || fullAnswer.answers[question.identifier+'Comment'] || editMode)">
  <section class="answer-question-component">

    <!-- question label -->
    <div class="text text-question">
      <span class="text-notify text-medium">{{ question.label | multiling:lang }}</span>
    </div>

    <!-- answers -->
    <div [ngSwitch]="question.controlType" class="answer-wrapper">

      <!-- radio case -->
      <ng-container *ngSwitchCase="'radio'">
        <ng-container *ngIf="editMode || fullAnswer.answers[question.identifier]">
          <div class="flex-between pad-top">

            <ng-container *ngIf="!editMode && fullAnswer.answers[question.identifier]">
              <span>{{ optionLabel(fullAnswer.answers[question.identifier]) }}</span>
            </ng-container>

            <ng-container *ngIf="editMode">
              <div *ngFor="let option of question.options"
                   class="c-hand"
                   [ngClass]="{ 'text-primary': option.identifier !== fullAnswer.answers[question.identifier] }"
                   (click)="selectOption($event, option)">
                <span>{{ optionLabel(option.identifier) }}</span>
              </div>
            </ng-container>

            <app-rating-item
              [editMode]="editMode"
              [prop]="question.identifier"
              [rating]="fullAnswer.answers[question.identifier + 'Quality']"
              (ratingChange)="updateQuality($event)">
            </app-rating-item>

          </div>
        </ng-container>
      </ng-container>
      <!-- /radio case -->

      <!-- clearbit case -->
      <ng-container *ngSwitchCase="'clearbit'">

        <ng-container *ngIf="!editMode && fullAnswer.answers[question.identifier]">
          <div class="pad-top clearbit-wrapper">
            <div *ngFor="let item of fullAnswer.answers[question.identifier]" class="label label-answer">

              <ng-container *ngIf="item.logo">
                <img [src]=item.logo alt=" ">
              </ng-container>

              <ng-container *ngIf="!item.domain">
                <span>{{ item.name }}</span>
              </ng-container>

              <ng-container *ngIf="item.domain">
                <a [href]=link(item.domain) target="_blank">{{ item.name }}</a>
              </ng-container>

              <ng-container *ngIf="item.rating === 2">
                <span class="sa-thumbs-up"><i class="fas fa-thumbs-up"></i></span>
              </ng-container>

              <ng-container *ngIf="item.rating === 0">
                <span class="sa-thumbs-down"><i class="fas fa-thumbs-down"></i></span>
              </ng-container>

            </div>
          </div>
        </ng-container>

        <ng-container *ngIf="editMode">
          <div class="pad-top">
            <app-autocomplete-input
              (update)="setAnswer($event)"
              [canEdit]="true"
              [config]="{ placeholder: 'COMMON.LABEL.COMPANY', initialData: fullAnswer.answers[question.identifier] || [], type: 'company' }"
              [adminMode]="editMode">
            </app-autocomplete-input>
          </div>
        </ng-container>

      </ng-container>
      <!-- /clearbit case -->

      <!-- list case -->
      <ng-container *ngSwitchCase="'list'">

        <ng-container *ngIf="!editMode && fullAnswer.answers[question.identifier]">
          <div class="pad-top">
            <div *ngFor="let item of fullAnswer.answers[question.identifier]" class="label label-answer">

                <ng-container *ngIf="!item.link">
                  <span>{{ item.text }}</span>
                </ng-container>

                <ng-container *ngIf="item.link">
                  <a [href]=item.link target="_blank">{{ item.text }}</a>
                </ng-container>

                <ng-container *ngIf="item.rating === 2">
                  <span class="sa-thumbs-up"><i class="fas fa-thumbs-up"></i></span>
                </ng-container>

                <ng-container *ngIf="item.rating === 0">
                  <span class="sa-thumbs-down"><i class="fas fa-thumbs-down"></i></span>
                </ng-container>

            </div>
          </div>
        </ng-container>

        <ng-container *ngIf="editMode">
          <div class="pad-top">
            <app-input-list
              (update)="setAnswer($event)"
              [canEdit]="true"
              [config]="{ placeholder: 'Enter your response', initialData: fullAnswer.answers[question.identifier] || [] }"
              [adminMode]="editMode">
            </app-input-list>
          </div>
        </ng-container>

      </ng-container>
      <!-- /list case -->

      <!-- checkbox case -->
      <ng-container *ngSwitchCase="'checkbox'">
        <div class="pad-top checkbox-wrapper">
          <ng-container *ngFor="let option of question.options">

            <ul *ngIf="(!!fullAnswer.answers[question.identifier] && !!fullAnswer.answers[question.identifier][option.identifier]) && !editMode" class="label label-answer">
              <li class="flex-between">
                <span>{{ optionLabel(option.identifier) }}</span>
              </li>
            </ul>

            <ul *ngIf="editMode" class="edit-answer">
              <li class="flex-between">
                <input id="{{question.identifier}}-{{option.identifier}}" type="checkbox"
                       [(ngModel)]="fullAnswer.answers[question.identifier][option.identifier]">
                <label for="{{question.identifier}}-{{option.identifier}}">
                  {{ optionLabel(option.identifier) }}
                </label>
                <!-- Rating checkbox question, not really implemented yet
                  <ng-container *ngIf="editMode">
                    <app-rating-item
                      [editMode]="editMode"
                      [prop]="question.identifier"
                      [rating]="fullAnswer.answers[question.identifier + 'Quality']"
                      (ratingChange)="updateQuality($event)">
                    </app-rating-item>
                  </ng-container>
                -->
              </li>
            </ul>
          </ng-container>
        </div>
      </ng-container>
      <!-- /checkbox case -->

      <!-- textarea case -->
      <ng-container *ngSwitchCase="'textarea'">

        <ng-container *ngIf="editMode">
          <form class="d-flex pad-top textarea-wrapper">

            <textarea
              class="form-input"
              [(ngModel)]="fullAnswer.answers[question.identifier]"
              name="comment"
              rows="4">
             </textarea>

            <app-rating-item
              [editMode]="editMode"
              [prop]="question.identifier"
              [rating]="fullAnswer.answers[question.identifier + 'Quality']"
              (ratingChange)="updateQuality($event)">
            </app-rating-item>

          </form>
        </ng-container>

        <ng-container *ngIf="answerTags(question.identifier).length > 0 || editMode">
          <div class="pad-top">
            <app-shared-tag
              [tags]="answerTags(question.identifier)"
              [editMode]="editMode"
              [projectId]="innoid"
              (addTag)="addTag($event, question.identifier)"
              (createTag)="createTag($event, question.identifier)"
              (removeTag)="removeTag($event, question.identifier)">
            </app-shared-tag>
          </div>
        </ng-container>

        <ng-container *ngIf="fullAnswer.answers[question.identifier] && !editMode">
          <div class="pad-top">
            <div class="label label-answer">
              <span>{{ fullAnswer.answers[question.identifier] }}</span>
              <span *ngIf="fullAnswer.answers[question.identifier + 'Quality'] === 2" class="sa-thumbs-up"><i class="fas fa-thumbs-up"></i></span>
              <span *ngIf="fullAnswer.answers[question.identifier + 'Quality'] === 0" class="sa-thumbs-down"><i class="fas fa-thumbs-down"></i></span>
            </div>
          </div>
        </ng-container>

      </ng-container>
      <!-- /textarea case -->

      <!-- textbox case -->
      <ng-container *ngSwitchCase="'textbox'">
        <ng-container *ngIf="fullAnswer.answers[question.identifier]">
          <div class="pad-top flex-between">
            <span class="text-primary">{{ fullAnswer.answers[question.identifier] }}</span>
            <app-rating-item
              [editMode]="editMode"
              [prop]="question.identifier"
              [rating]="fullAnswer.answers[question.identifier + 'Quality']"
              (ratingChange)="updateQuality($event)">
            </app-rating-item>
          </div>
        </ng-container>
      </ng-container>
      <!-- /textbox case -->

      <!-- scale case -->
      <ng-container *ngSwitchCase="'scale'">
        <div class="pad-top">
          <span class="text-primary">{{ fullAnswer.answers[question.identifier ] }}</span></div>
      </ng-container>
      <!-- /scale case -->

      <!-- star case -->
      <ng-container *ngSwitchCase="'stars'">
        <ul *ngIf="fullAnswer.answers[question.identifier] && !editMode" class="pad-top star-wrapper text-primary">
          <li *ngFor="let opt of question.options">
            {{ opt.label | multiling:lang }}: <span>{{ 'â˜…'.repeat(fullAnswer.answers[question.identifier][opt.identifier]) }}</span>
          </li>
        </ul>
        <ul *ngIf="editMode" class="pad-top star-wrapper text-primary">
          <li *ngFor="let opt of question.options; index as i;">
            {{ opt.label | multiling:lang }}:
            <label for="{{question.identifier}}-benefit{{i}}-rate1">1</label>
            <input id="{{question.identifier}}-benefit{{i}}-rate1" type="radio"
                   name="{{question.identifier}}-benefit{{opt.identifier}}"
                   [(ngModel)]="fullAnswer.answers[question.identifier][opt.identifier]" value="1">
            <label for="{{question.identifier}}-benefit{{i}}-rate2">2</label>
            <input id="{{question.identifier}}-benefit{{i}}-rate2" type="radio"
                   name="{{question.identifier}}-benefit{{opt.identifier}}"
                   [(ngModel)]="fullAnswer.answers[question.identifier][opt.identifier]" value="2">
            <label for="{{question.identifier}}-benefit{{i}}-rate3">3</label>
            <input id="{{question.identifier}}-benefit{{i}}-rate3" type="radio"
                   name="{{question.identifier}}-benefit{{opt.identifier}}"
                   [(ngModel)]="fullAnswer.answers[question.identifier][opt.identifier]" value="3">
            <label for="{{question.identifier}}-benefit{{i}}-rate4">4</label>
            <input id="{{question.identifier}}-benefit{{i}}-rate4" type="radio"
                   name="{{question.identifier}}-benefit{{opt.identifier}}"
                   [(ngModel)]="fullAnswer.answers[question.identifier][opt.identifier]" value="4">
            <label for="{{question.identifier}}-benefit{{i}}-rate5">5</label>
            <input id="{{question.identifier}}-benefit{{i}}-rate5" type="radio"
                   name="{{question.identifier}}-benefit{{opt.identifier}}"
                   [(ngModel)]="fullAnswer.answers[question.identifier][opt.identifier]" value="5">
          </li>
        </ul>
      </ng-container>
      <!-- /star case -->

      <!-- toggle case -->
      <ng-container *ngSwitchCase="'toggle'">
        <label class="form-switch toggle-wrapper">
          <input
            type="checkbox"
            name="toggle-input"
            [ngClass]="{ 'disabled': fullAnswer.answers[question.identifier] !== null, 'active': fullAnswer.answers[question.identifier] }"
            [(ngModel)]="fullAnswer.answers[question.identifier]"
            [ngModelOptions]="{ standalone: true }">
          <i class="form-icon"></i>
        </label>
      </ng-container>
      <!-- /toggle case -->

      <!-- default case -->
      <ng-container *ngSwitchDefault>
        <div class="pad-top">
          <span class="text-alert">Unknown Response Type.</span>
        </div>
      </ng-container>
      <!-- /default case -->

    </div>
     <!--/answers -->

    <!-- comment part not edit mode -->
    <ng-container *ngIf="fullAnswer.answers[question.identifier + 'Comment'] && !editMode">

      <div class="comment-text c-pad-top">
        <span>{{ 'COMMON.COMMENT' | translate }}</span>
      </div>

      <div class="c-pad-top">
        <span class="text-primary">{{ fullAnswer.answers[question.identifier + 'Comment'] }}</span>
      </div>

      <ng-container *ngIf="answerTags(question.identifier + 'Comment').length > 0">
        <div class="pad-top">
          <app-shared-tag
            [tags]="answerTags(question.identifier + 'Comment')"
            [editMode]="editMode"
            [projectId]="innoid"
            (addTag)="addTag($event, question.identifier + 'Comment')"
            (createTag)="createTag($event, question.identifier + 'Comment')"
            (removeTag)="removeTag($event, question.identifier + 'Comment')">
          </app-shared-tag>
        </div>
      </ng-container>

    </ng-container>
    <!-- comment part not edit mode -->

    <!-- comment part edit mode -->
    <ng-container *ngIf="editMode">

      <ng-container *ngIf="!commenting">
        <div class="text-warning c-pad-top">
          <span class="c-hand" (click)="commenting = true">{{ 'COMMON.COMMENT' | translate }} <i class="fas fa-angle-right"></i></span>
        </div>
      </ng-container>

      <ng-container *ngIf="commenting">
        <form>

          <div class="text-warning c-pad-top">
            <span class="c-hand" (click)="commenting = false">{{ 'COMMON.COMMENT' | translate }} <i class="fas fa-angle-down"></i></span>
          </div>

          <div class="d-flex comment-wrapper pad-top">

            <textarea
              class="form-input"
              name="comment"
              rows="4"
              [(ngModel)]="fullAnswer.answers[question.identifier + 'Comment']">
            </textarea>

            <app-rating-item
              [editMode]="editMode"
              [prop]="question.identifier + 'Comment'"
              [rating]="fullAnswer.answers[question.identifier + 'CommentQuality']"
              (ratingChange)="updateQuality($event)">
            </app-rating-item>

          </div>

          <div class="pad-top">
            <app-shared-tag
              [tags]="answerTags(question.identifier + 'Comment')"
              [editMode]="editMode"
              [projectId]="innoid"
              (addTag)="addTag($event, question.identifier + 'Comment')"
              (createTag)="createTag($event, question.identifier + 'Comment')"
              (removeTag)="removeTag($event, question.identifier + 'Comment')">
            </app-shared-tag>
          </div>

        </form>
      </ng-container>

    </ng-container>

  </section>
</ng-container>

