<section id="user-form">
  <div class="column col-xs-12 col-11 col-mx-auto">

    <form novalidate [formGroup]="userForm" (ngSubmit)="onSubmit()">

      <!-- Operator -->
      <div *ngIf="!isSignUp" class="form-group-inline-space operator-wrapper">
        <div class="input-group">
          <label class="form-switch" for="operator" *ngIf="authService.userId != user.id && isEditUser">
            <input
              type="checkbox"
              name="operator"
              id="operator"
              formControlName="operator">
            <i class="form-icon"></i>
            {{ 'PROJECT_LIST.OPERATOR' | translate }}
          </label>

          <label
            class="form-switch"
            for="role"
            *ngIf="authService.adminLevel > 2 && authService.userId != user.id && isEditUser"
            [ngStyle]="{ 'margin-top': '10px' }">
            <input
              type="checkbox"
              name="role"
              id="role"
              [checked]="userForm.value.roles === 'admin'"
              (change)="affectAsAdmin($event.srcElement.checked)" >
            <i class="form-icon"></i>
            {{ 'USERS.ADMIN' | translate }}
          </label>
        </div>
        <button type="submit" class="btn btn-primary">{{'COMMON.SAVE' | translate}}</button>
      </div>

      <!-- Domain management -->
      <div *ngIf="isEditUser" class="domain-wrapper">
        <div *ngIf="!editInstanceDomain" [ngStyle]="{ 'padding-bottom': '30px' }">
          <label class="form-label">Actual domain:
            <span>{{ userForm.get('domain').value }}</span>
            <a (click)="startEditInstanceDomain($event)">
              <span *ngIf="!isSelf"><i class="fas fa-pencil-alt"></i></span>
            </a>
          </label>
        </div>
        <div *ngIf="editInstanceDomain" [ngStyle]="{ 'padding-bottom': '30px' }">
          <label class="form-label">New domain:</label>
          <app-autocomplete-input
            id="domain"
            (update)="updateInstanceDomain($event)"
            [onlyOne]="true"
            [config]="buildInstanceDomainListConfig()">
          </app-autocomplete-input>
        </div>
      </div>

      <!-- Show Tags -->
      <div *ngIf="isProfessional && tags.length > 0" class="form-group">
        <label class="form-label">Tags</label>
        <app-shared-tag-item [tags]="tags" (removeTag)="removeTag($event)"></app-shared-tag-item>
      </div>

      <!-- First name -->
      <div class="form-group" *ngIf="!addTagsToProfessionals">
        <label class="form-label" for="firstName">{{ 'COMMON.FIRSTNAME' | translate }}</label>
        <input
          class="form-default"
          formControlName="firstName"
          id="firstName"
          type="text"
          placeholder="John">
        <div class="form-error" *ngIf="userForm.get('firstName').touched && userForm.get('firstName').invalid">
          <span *ngIf="userForm.get('firstName').hasError('required')">{{ 'COMMON.REQUIRED.FIRSTNAME' | translate }}</span>
        </div>
      </div>

      <!-- Last name -->
      <div class="form-group" *ngIf="!addTagsToProfessionals">
        <label class="form-label" for="firstName">{{ 'COMMON.LASTNAME' | translate }}</label>
        <input
          class="form-default"
          formControlName="lastName"
          id="lastName"
          type="text"
          placeholder="Smith">
        <div class="form-error" *ngIf="userForm.get('lastName').touched && userForm.get('lastName').invalid">
          <span *ngIf="userForm.get('lastName').hasError('required')">{{ 'COMMON.REQUIRED.LASTNAME' | translate }}</span>
        </div>
      </div>

      <!-- Email -->
      <div class="form-group" *ngIf="!addTagsToProfessionals">
        <label class="form-label" for="email">{{ 'COMMON.EMAIL' | translate }}</label>
        <input
          class="form-default"
          formControlName="email"
          id="email"
          type="email"
          placeholder="john@catco.com">
        <div class="form-error" *ngIf="userForm.get('email').touched && userForm.get('email').invalid">
          <span *ngIf="userForm.get('email').hasError('required')">{{ 'COMMON.REQUIRED.EMAIL' | translate }}</span>
          <span *ngIf="userForm.get('email').hasError('email') && userForm.get('email').value !== ''">{{ 'COMMON.INVALID.EMAIL' | translate }}</span>
        </div>
      </div>

      <!-- Password -->
      <div *ngIf="isSignUp" class="form-group">
        <label class="form-label" for="password">{{ 'COMMON.PASSWORD' | translate }}</label>
        <input
          class="form-default"
          formControlName="password"
          id="password"
          type="password"
          [attr.placeholder]="'COMMON.PASSWORD_SIGNUP_PLACEHOLDER' | translate">
        <div class="form-error" *ngIf="userForm.get('password').touched && userForm.get('password').invalid">
          <span *ngIf="userForm.get('password').hasError('required')">{{ 'COMMON.REQUIRED.PASSWORD' | translate }}</span>
          <span *ngIf="userForm.get('password').hasError('minlength')">{{ 'COMMON.INVALID.PASSWORD_TOO_SHORT' | translate }}</span>
        </div>
      </div>

      <!-- Job -->
      <div class="form-group" *ngIf="!addTagsToProfessionals">
        <label class="form-label" for="jobTitle">{{ 'COMMON.JOBTITLE' | translate }}</label>
        <input
          class="form-default"
          formControlName="jobTitle"
          id="jobTitle"
          type="text"
          [attr.placeholder]="'COMMON.JOBTITLE_PLACEHOLDER' | translate">
        <div class="form-error" *ngIf="userForm.get('jobTitle').touched && userForm.get('jobTitle').invalid">
          <span *ngIf="userForm.get('jobTitle').hasError('required')">{{ 'COMMON.REQUIRED.JOBTITLE' | translate }}</span>
        </div>
      </div>

      <!-- Company -->
      <div class="form-group" *ngIf="!addTagsToProfessionals">
        <label class="form-label" for="companyName">{{ 'COMMON.COMPANY' | translate }}</label>
        <input
          class="form-default"
          formControlName="companyName"
          id="companyName"
          type="text"
          [attr.placeholder]="'COMMON.COMPANY_PLACEHOLDER' | translate">
        <div class="form-error" *ngIf="userForm.get('companyName').touched && userForm.get('companyName').invalid">
          <span *ngIf="userForm.get('companyName').hasError('required')">{{ 'COMMON.REQUIRED.COMPANY' | translate }}</span>
        </div>
      </div>

      <!-- Country -->
      <div class="form-group" *ngIf="!addTagsToProfessionals">
        <label class="form-label" for="country">{{ 'COMMON.COUNTRY' | translate }}</label>
        <input
          class="form-default"
          formControlName="country"
          id="country"
          type="text"
          [attr.placeholder]="'COMMON.COUNTRY_PLACEHOLDER' | translate"
          (click)="onSuggestCountries()">
        <ul
          *ngIf="userForm.get('country').value"
          class="suggestion"
          [ngStyle]="{ 'display': displayCountrySuggestion ? 'block' : 'none' }">
          <li *ngFor="let suggestion of countriesSuggestion.sort()" (click)="onValueSelect(suggestion)">
            <a><span>{{ suggestion }}</span></a>
          </li>
        </ul>
        <div class="form-error" *ngIf="userForm.get('country').touched && userForm.get('country').invalid">
          <span *ngIf="userForm.get('country').hasError('required')">{{ 'COMMON.REQUIRED.COUNTRY' | translate }}</span>
        </div>
      </div>

      <!-- Url -->
      <div *ngIf="isProfessional" class="form-group">
        <label class="form-label" for="profileUrl">{{ 'COMMON.PROFILE_URL' | translate }}</label>
        <input
          class="form-default"
          formControlName="profileUrl"
          id="profileUrl"
          type="text"
          placeholder="http://www.linkedin.com/in/johnsmith">
        <div class="form-error" *ngIf="userForm.get('profileUrl').touched && userForm.get('profileUrl').invalid">
          <span *ngIf="userForm.get('profileUrl').hasError('required')">{{ 'COMMON.REQUIRED.URL' | translate }}</span>
        </div>
      </div>

      <!-- Link to quiz URI -->
      <div *ngIf="isProfessional && campaign" class="form-group">
        <a (click)="openQuizUri(pro, $event)">
        <label class="text-link">{{ 'COMMON.QUESTIONNAIRE' | translate }}</label>
        </a>
      </div>

      <!-- Terms -->
      <div *ngIf="isSignUp" class="terms-wrapper text-center">
        {{ 'COMMON.TERMS.A' | translate }} {{companyName}}{{'\'s'}}
        <a href="https://www.umi.us/end-user-license-agreement/" target="_blank"><span class="text-link">{{ 'COMMON.TERMS.B' | translate }}</span></a>
      </div>

      <!-- Submit button -->
      <div *ngIf="isSignUp" class="signUp-button-wrapper text-center">
        <button class="btn btn-primary" type="submit" [disabled]="userForm.invalid">{{ 'COMMON.BUTTON.SIGN_UP' | translate }}</button>
      </div>

    </form>

  </div>
</section>
