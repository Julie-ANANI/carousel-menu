<div class="container">
  <div class="columns">
    <div class="column col-10 col-mx-auto">

      <h1>{{total}} {{ 'PRESETS.SECTIONS' | translate }}</h1>


      <div class="empty" *ngIf="sections && !sections.length">
        <p class="empty-title h5">{{ 'PRESETS.SECTION.NONE.TITLE' | translate }}</p>
        <p class="empty-subtitle">{{ 'PRESETS.SECTION.NONE.CONTENT' | translate }}</p>
        <div class="empty-action">
          <button [routerLink]="'/admin/question/new'" class="btn btn-lg btn-primary">{{ 'PRESETS.SECTION.ADD' | translate }} <i class="icon icon-arrow-right"></i></button>
        </div>
      </div>

      <div class="columns" *ngIf="sections && sections.length">
        <button [routerLink]="'new'" class="btn btn-lg btn-primary">{{ 'PRESETS.SECTION.ADD' | translate }} <i class="icon icon-arrow-right"></i></button>
        <table class="table sections" wt-responsive-table>
          <thead>
            <tr>
              <th><sq-sort [config]="config" (configChange)="loadSections($event)" [prop]="'name'">{{ 'COMMON.NAME' | translate }}</sq-sort></th>
              <th>Questions</th>
              <th><sq-sort [config]="config" (configChange)="loadSections($event)" [prop]="'domain'">{{ 'COMMON.DOMAIN' | translate }}</sq-sort></th>
              <th><sq-sort [config]="config" (configChange)="loadSections($event)" [prop]="'updated'">{{ 'COMMON.UPDATED' | translate }}</sq-sort></th>
              <th><sq-sort [config]="config" (configChange)="loadSections($event)" [prop]="'created'">{{ 'COMMON.CREATED' | translate }}</sq-sort></th>
            </tr>
          </thead>
          <tbody>

          <tr *ngFor="let section of sections">
            <td><a [routerLink]="[section._id + '/edit']">{{section.name}}</a></td>
            <td>{{section.questions ? section.questions.length : 0}}</td>
            <td>{{section.domain}}</td>
            <td>{{section.created | date : dateFormat}}</td>
            <td>{{section.updated | date : dateFormat}}</td>
          </tr>
          </tbody>
          <tfoot>
          <tr>
            <td colspan="12">
              <sqPagination [config]="config" (configChange)="loadSections($event)" [total]="total"></sqPagination>
            </td>
          </tr>
          </tfoot>
        </table>
      </div>
    </div>
  </div>





  <!-- MODAL : Are you sure you want to delete this section ? -->
  <div class="modal" [ngClass]="{'active': selectedSectionIdToBeDeleted}">
    <div class="modal-overlay" (click)="selectedSectionIdToBeDeleted = null"></div>
    <div class="modal-container">
      <div class="modal-header">
        <button class="btn btn-clear float-right" (click)="selectedSectionIdToBeDeleted = null"></button>
        <div class="modal-title h5">{{ 'PRESETS.SECTION.DELETE_MODAL.TITLE' | translate }}</div>
      </div>
      <div class="modal-body">
        <div class="content">{{ 'PRESETS.SECTION.DELETE_MODAL.CONTENT' | translate }}</div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-link" (click)="removeSection(selectedSectionIdToBeDeleted)">{{ 'COMMON.DELETE' | translate }}</button>
        <button class="btn btn-primary" (click)="selectedSectionIdToBeDeleted = null">{{ 'COMMON.CANCEL' | translate }}</button>
      </div>
    </div>
  </div>
