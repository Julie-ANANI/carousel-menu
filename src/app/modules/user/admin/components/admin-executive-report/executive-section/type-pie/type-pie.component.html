<div class="admin-executive-wrapper" id="type-pie">

  <!-- edit side -->
  <div class="content-wrapper">

    <!-- title -->
    <div class="m-bottom-10">
      <label>

        <input
          (change)="emitChanges()"
          (keyup)="textColor('title')"
          [(ngModel)]="section.title"
          [attr.placeholder]="'ADMIN_EXECUTIVE_REPORT.TITLE' | translate"
          maxlength="26"
          class="form-input"
          type="text">

        <span [ngStyle]="{ 'color': titleColor }" class="text-limit-wrapper">
          {{ 26 - section.title.length }}
        </span>

      </label>
    </div>
    <!-- /title -->


    <!-- abstract -->
    <div class="m-bottom-20">
      <label>

        <textarea
          (change)="emitChanges()"
          (keyup)="textColor('abstract')"
          [(ngModel)]="section.abstract"
          [attr.placeholder]="'ADMIN_EXECUTIVE_REPORT.ABSTRACT' | translate"
          maxlength="175"
          class="form-input is-abstract"
          type="text">
        </textarea>

        <span [ngStyle]="{ 'color': abstractColor }" class="text-limit-wrapper">
          {{ 175 - section.abstract.length }}
        </span>

      </label>
    </div>
    <!-- /abstract -->


    <!-- show response -->
    <div class="m-bottom-20">
      <label class="form-checkbox">
        <input
          (change)="toggleResponses()"
          [disabled]="!content.favorable"
          [checked]="content.showPositive"
          [value]="content.showPositive"
          type="checkbox">
        <i class="form-icon"></i> {{ 'ADMIN_EXECUTIVE_REPORT.PIE_SECTION.SHOW_RESPONSES' | translate }}
      </label>
    </div>
    <!-- /show response -->


    <!-- label / value -->
    <div [ngStyle]="{ 'margin-bottom': '-15px' }" class="d-flex justify-space flex-wrap">
      <div *ngFor="let pie of content.values; let i = index" class="pie-wrapper">

        <!-- label -->
        <div class="m-right-15">
          <label>

            <input
              (change)="emitChanges()"
              (keyup)="textColor('label' + (i + 1))"
              [(ngModel)]="pie.legend"
              [attr.placeholder]="'ADMIN_EXECUTIVE_REPORT.PIE_SECTION.LEGEND_' + (i + 1) | translate"
              maxlength="13"
              class="form-input"
              type="text">

            <span
              [ngStyle]="{ 'color': i === 0 ? legend1Color : i === 1 ? legend2Color : i === 2
              ? legend3Color : legend4Color  }"
              class="text-limit-wrapper">
              {{ 13 - pie.legend.length }}
            </span>

          </label>
        </div>
        <!-- /label -->


        <!-- value -->
        <div>
          <label class="value-wrapper">
            <input
              (change)="emitChanges()"
              [(ngModel)]="pie.percentage"
              placeholder="25"
              maxlength="3"
              class="form-input"
              type="number">
          </label>
        </div>
        <!-- /value -->

      </div>
    </div>
    <!-- /legend / value -->

  </div>
  <!-- /edit side -->


  <!-- view side -->
  <div class="content-wrapper has-border is-justify">

    <div class="text-center m-bottom-20">

      <h4 class="m-no-bottom text-center">{{ section.title }}</h4>

      <h5 [ngStyle]="{ 'min-height': '27px' }" class="text-lg text-normal m-no-bottom">
        <ng-container *ngIf="content.showPositive">
          {{ content.favorable }} {{ 'ADMIN_EXECUTIVE_REPORT.PIE_SECTION.FAVOURABLE' | translate }}
        </ng-container>
      </h5>

    </div>

    <div class="d-flex justify-center m-bottom-20">
      <div class="w-300">
        <piechart-executive [pieChart]="pieChart"></piechart-executive>
      </div>
    </div>

    <p class="has-min-height">{{ section.abstract }}</p>

  </div>
  <!-- /view side -->

</div>
