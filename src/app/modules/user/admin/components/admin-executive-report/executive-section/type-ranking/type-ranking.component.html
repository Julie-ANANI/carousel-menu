<div class="admin-executive-wrapper" id="type-ranking">

  <!-- edit side -->
  <div *ngIf="isEditable" class="content-wrapper">

    <!-- title -->
    <div class="m-bottom-10">
      <label>

        <input
          (change)="emitChanges()"
          (keyup)="textColor('title')"
          [(ngModel)]="section.title"
          [attr.placeholder]="'ADMIN_EXECUTIVE_REPORT.TITLE' | translate"
          maxlength="40"
          class="form-input"
          type="text">

        <span [ngStyle]="{ 'color': titleColor }" class="text-limit-wrapper">
          {{ 40 - section.title.length }}
        </span>

      </label>
    </div>
    <!-- /title -->

    <!-- abstract -->
    <div class="m-bottom-40">
      <label>

        <textarea
          (change)="emitChanges()"
          (keyup)="textColor('abstract')"
          [(ngModel)]="section.abstract"
          [attr.placeholder]="'ADMIN_EXECUTIVE_REPORT.ABSTRACT' | translate"
          maxlength="175"
          class="form-input is-abstract"
          type="text">
        </textarea>

        <span [ngStyle]="{ 'color': abstractColor }" class="text-limit-wrapper">
          {{ 175 - section.abstract.length }}
        </span>

        <div (click)="onClickPlay($event)" class="btn-play">
          <img
            src="https://res.cloudinary.com/umi/image/upload/v1589878292/app/default-images/pictos/picto-play-blue.svg"
            alt=" ">
        </div>

      </label>
    </div>
    <!-- /abstract -->


    <!-- name / occurrence / color -->
    <div *ngFor="let tag of content.values; let i = index;">
      <div [ngClass]="{ 'm-bottom-15': i !== content.values.length - 1 }" class="d-flex justify-space">

        <!-- name -->
        <div class="m-right-10">
          <label>
            <input
              (change)="emitChanges()"
              (keyup)="textColor('name' , (i + 1)); checkVisibility(i)"
              [(ngModel)]="tag.name"
              [attr.placeholder]="'ADMIN_EXECUTIVE_REPORT.RANKING_SECTION.ELEMENT_' + (i + 1) | translate"
              maxlength="20"
              class="form-input"
              type="text">

            <div>{{content.values[i].name}}</div>

            <span [ngStyle]="{ 'color': i === 0 ? element1Color : i === 1 ? element2Color : element3Color }"
                  class="text-limit-wrapper">
              {{ 20 - tag.name.length }}
            </span>
          </label>
        </div>
        <!-- /element -->


        <!-- legend -->
        <div class="m-right-10">
          <label>
            <input
              (change)="emitChanges()"
              (keyup)="textColor('legend' , (i + 1))"
              [(ngModel)]="tag.legend"
              [attr.placeholder]="'ADMIN_EXECUTIVE_REPORT.RANKING_SECTION.LEGEND_' + (i + 1) | translate"
              class="form-input"
              type="text">

            <span [ngStyle]="{ 'color': i === 0 ? legend1Color : i === 1 ? legend2Color : legend3Color }"
                  class="text-limit-wrapper">
              {{ 13 - tag.legend.length }}
            </span>
          </label>
        </div>
        <!-- /legend -->


        <!-- color -->
        <div class="popover">
          <div [ngStyle]="{ 'background-color': tag.color }" class="shape is-circled is-sm"></div>
          <div class="popover-container">
            <div class="card">
              <div (click)="setColor('#2ECC71', i)" class="shape is-circled bg-success is-sm"></div>
              <div (click)="setColor('#EA5858', i)" class="shape is-circled bg-alert is-sm"></div>
              <div (click)="setColor('#4F5D6B', i)" class="shape is-circled bg-draft is-sm"></div>
            </div>
          </div>
        </div>
        <!-- /color -->

      </div>
    </div>
    <!-- /element / legend / color -->

  </div>
  <!-- /edit side -->


  <!-- view side -->
  <div class="content-wrapper has-border is-justify">

    <h4 class="m-bottom-15 text-center">{{ section.title }}</h4>

    <div *ngFor="let tag of content.values; let i = index;" class="m-bottom-20 text-center">

      <p style="min-height: 24px; line-height: 24px" class="text-lg text-medium">
        <ng-container *ngIf="tag.legend && tag.visibility">{{ tag.legend }}</ng-container>
      </p>

      <div style="min-height: 30px">
        <div *ngIf="tag.visibility && tag.name" [ngStyle]="{ 'background-color': tag.color }" class="label is-rounded">
          {{ tag.name }}
        </div>
      </div>

    </div>

    <p class="has-min-height">{{ section.abstract }}</p>

  </div>
  <!-- view side -->

</div>
