<div class="admin-executive-wrapper" id="executive-professional">

  <!-- edit -->
  <div *ngIf="isEditable" class="content-wrapper">

    <!-- abstract -->
    <div>

      <label>

        <textarea
          (change)="emitChanges()"
          (keyup)="textColor()"
          [(ngModel)]="config.abstract"
          [attr.placeholder]="'ADMIN_EXECUTIVE_REPORT.PROFESSIONAL.ABSTRACT' | translate"
          style="height: 150px"
          maxlength="258"
          class="form-input"
          type="text"
          [ngClass]="config.abstract ? 'has-success': 'has-error'"
          required>
        </textarea>

        <span [ngStyle]="{ 'color': professionalAbstractColor }" class="text-limit-wrapper">
          {{ 258 - config.abstract.length }}
        </span>

        <div (click)="onClickPlay($event)" class="btn-play">
          <img
            src="https://res.cloudinary.com/umi/image/upload/v1589878292/app/default-images/pictos/picto-play-blue.svg"
            alt=" ">
        </div>

      </label>

      <!-- insert snippet button -->
      <div class="insert-snippet">
        <span class="text-error">
          <span *ngIf="!config.abstract"> {{ 'COMMON.REQUIRED.FIELD' | translate }} </span>
        </span>
        <span (click)="onClickSnippet($event)">
          {{ 'ADMIN_EXECUTIVE_REPORT.INSERT_SNIPPET' | translate }}
        </span>
      </div>
      <!-- /insert snippet button -->

    </div>
    <!-- /abstract -->


    <!-- select pro -->
    <div class="p-top-40 d-flex justify-space flex-wrap-wrap">
      <div *ngFor="let top of ['', '', '', '']; let i = index;" class="select-wrapper">
        <label>
          <select (change)="selectAnswer($event, i)" class="form-select">
            <option [value]="''">{{ 'ADMIN_EXECUTIVE_REPORT.PROFESSIONAL.CHOOSE_PRO' | translate }}</option>
            <option *ngFor="let answer of allAnswers" [value]="answer._id"
                    [ngClass]="{'text-success': config.list.indexOf(answer._id) >= 0}">
              {{ answer.professional.firstName }} {{ answer.professional.lastName }}
            </option>
          </select>
        </label>
      </div>
    </div>
    <span class="text-error text-sm">
      <span *ngIf="!config.list || !config.list.length"> {{ 'ADMIN_STORYBOARD.MISSING_FIELDS.LIST' | translate }} </span>
    </span>
    <!-- /select pro -->

  </div>
  <!-- /edit -->


  <!-- view -->
  <div class="content-wrapper has-border">

    <h4 class="text-center">{{ 'ADMIN_EXECUTIVE_REPORT.PROFESSIONAL.SOME_PROFILES' | translate }}</h4>

    <!-- pro display -->
    <div class="d-flex flex-wrap-wrap justify-space">
      <div *ngFor="let answer of top4Answers; let i = index;" class="pro-wrapper relative text-center text-sm">
        <ng-container *ngIf="answer">
          <!-- flag -->
          <div style="height: 26px" class="m-bottom-1">
            <ng-container *ngIf="answer.country">
              <umius-country-flag [country]="answer.country" [width]="22" [height]="15"></umius-country-flag>
            </ng-container>
          </div>
          <div *ngIf="!answer.country" class="popover" [ngStyle]="{'border': 'none'}">
            <i class="fas fa-exclamation-triangle"></i>
            <div class="popover-container">
              <div class="card">
                {{ 'ADMIN_STORYBOARD.MISSING_FIELDS.COUNTRY' | translate }}
              </div>
            </div>
          </div>
          <!-- /flag -->


          <!-- jobTitle -->
          <div style="height: 19px" class="text-ellipsis">
            {{ answer.job }}
          </div>
          <!-- /jobTitle -->


          <!-- company -->
          <div *ngIf="!anonymous" style="height: 19px" class="text-ellipsis">
            {{ answer.company ? answer.company.name : '' }}
          </div>
          <!-- /company -->


          <!-- user icon -->
          <div class="absolute" style="top: 7px; right: 15px" >
            <i class="fas fa-user text-md text-draft"></i>
          </div>
          <!-- /user icon -->
        </ng-container>
      </div>
    </div>
    <!-- /pro display -->

    <p class="has-min-height">{{ config.abstract }}</p>

  </div>
  <!-- /view -->

</div>
