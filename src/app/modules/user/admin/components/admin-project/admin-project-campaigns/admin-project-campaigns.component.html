<section class="section-light-pad rm-pad-bottom" id="admin-project-campaigns-component">
  <div class="column col-xs-12 col-11 col-mx-auto">

    <!-- section add campaign -->
    <ng-container *ngIf="getAuthorizationLevel(2)">
      <div class="section-light-pad rm-pad-top text-right">
        <button class="btn btn-primary" (click)="onClickAdd($event)">{{ 'CAMPAIGNS.ADD_BUTTON' | translate }}</button>
      </div>
    </ng-container>

    <!-- section no campaign -->
    <ng-container *ngIf="noResult">
      <div class="section-pad rm-pad-bottom">
        <app-message-space [widthMax]="'354px'">
          {{ 'CAMPAIGNS.BOT_TEXT.A' | translate }}
          <br>
          {{ 'CAMPAIGNS.BOT_TEXT.B' | translate }}
        </app-message-space>
      </div>
    </ng-container>

    <!-- section campaigns -->
    <ng-container *ngIf="!noResult">
      <div class="section-light-pad rm-pad-bottom">
        <div [@listAnimation]="campaigns.length">
          <div *ngFor="let campaign of campaigns" class="card-campaign">
            <div class="card-content">
              <a [routerLink]="'/user/admin/campaigns/campaign/' + campaign._id + '/answers'">
                <span>{{ campaign.title }}</span>
              </a>
              <span *ngIf="campaign.type === 'COMMUNITY'" class="label label-success">{{campaign.type}}</span>
              <span *ngIf="getAuthorizationLevel(2)" class="text-link" (click)="onClickEdit($event, campaign)">{{ 'CAMPAIGNS.EDIT_BUTTON' | translate }}</span>
              <p class="text text-notify">
                {{ campaign.stats ? campaign.stats['campaign']['nbProfessionals'] || 0 : 0 }} {{ 'CAMPAIGNS.PROFESSIONAL' | translate  }}
                •
                {{ campaign.stats ? ((campaign.stats['campaign']['nbValidatedResp']||0)+(campaign.stats['campaign']['nbToValidateResp'] || 0)) : 0 }} {{ 'CAMPAIGNS.ANSWERS' | translate }}
                •
                {{ campaign.status | FormatText }} {{ 'CAMPAIGNS.STATUS' | translate }}
                <ng-container *ngIf="getAuthorizationLevel(2)">
                  |
                  <span class="text-link" (click)="OnClickUpdateStatus($event, campaign)">{{ 'CAMPAIGNS.UPDATE_BUTTON' | translate }}</span>
                  <!--|
                  <span class="text text-notify clone">{{ 'CAMPAIGNS.CLONE_BUTTON' | translate }}</span>-->
                  |
                  <span (click)="OnClickDelete($event, campaign)" class="icon icon-delete tooltip" data-tooltip="Delete Campaign">
                    <i class="fas fa-trash-alt"></i>
                  </span>
                </ng-container>
              </p>
            </div>
          </div>
        </div>
      </div>
    </ng-container>

  </div>
</section>


<!-- modal to ask the admin to delete the campaign -->
<app-modal [(showModal)]="activateModal" [modalTitle]="'COMMON.MODAL.TITLE_DELETE'">
  {{ 'COMMON.CAMPAIGN.DELETE_BOARD.CONTENT' | translate }}
  <div class="modal-footer">
    <button class="btn btn-sm btn-cancel">{{ 'COMMON.BUTTON.CANCEL' | translate }}</button>
    <button class="btn btn-sm btn-primary" (click)="onClickSubmit()">{{ 'COMMON.BUTTON.CONFIRM' | translate }}</button>
  </div>
</app-modal>
<!-- /modal to ask the admin to delete the campaign -->


<!-- sidebar to edit campaign -->
<app-sidebar [(template)]="sidebarValue">
  <app-campaign-form
    [sidebarState]="sidebarValue.animate_state"
    [type]="sidebarValue.type"
    [campaign]="selectCampaign"
    (campaignOutput)="updateCampaign($event)">
  </app-campaign-form>
</app-sidebar>
<!-- /sidebar to edit campaign -->
