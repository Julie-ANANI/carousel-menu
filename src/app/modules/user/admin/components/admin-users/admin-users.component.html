<div *ngIf="canAccess()" class="container fluid grid-2xl" id="admin-users">
  <div class="column col-sm-12 col-11 col-mx-auto">

    <!-- error message while fetching -->
    <app-utility-message-error *ngIf="!isLoading && fetchingError"></app-utility-message-error>
    <!-- /error message while fetching -->

    <!-- no fetching error -->
    <div [hidden]="fetchingError && !isLoading" class="p-top-30 p-bottom-30">

      <!-- TODO
      <div class="invitation-pending" *ngIf="pending_invitations &&Â pending_invitations.length > 0">
        <h3>{{ 'USERS.WAITING_INVITATIONS' | translate }}</h3>
        <p>{{ pending_invitations.join(', ') }}</p>
      </div> -->

      <!-- if juan -->
      <section *ngIf="isJuan" class="text-right p-bottom-30">
        <button
          (click)="synchronizeSRTUsers()"
          class="button is-primary is-sm is-outlined"
          type="button">
          Update everybody
        </button>
      </section>
      <!-- /if juan -->

      <!-- table -->
      <section>
        <app-shared-table
          (editRow)="onClickEdit($event)"
          (removeRows)="onClickDelete($event)"
          [(config)]="config"
          [data]="table">
        </app-shared-table>
      </section>
      <!-- /table -->

    </div>
    <!-- /no fetching error -->

  </div>
</div>


<!-- sidebar -->
<app-sidebar
  *ngIf="canAccess(['user', 'view']) || canAccess(['user', 'edit'])"
  [(template)]="sidebarValue">
  <app-user-form
    (finalUserData)="updateUser($event)"
    [canAffectAsAdmin]="canAccess(['user', 'affectAsAdmin'])"
    [canImpersonate]="canAccess(['user', 'impersonate'])"
    [isEditable]="canAccess(['user', 'edit'])"
    [sidebarState]="sidebarValue.animate_state"
    [type]="sidebarValue.type"
    [user]="selectedUser">
  </app-user-form>
</app-sidebar>
<!-- /sidebar -->


<!-- modal to delete user -->
<app-utility-modal
  *ngIf="canAccess() && canAccess(['user', 'delete'])"
  [(showModal)]="modalDelete"
  [title]="'Delete Board'">

  <section class="modal-body">
    <div class="text-background text-medium">Do you really want to delete the selected user(s)?</div>
    <ul class="d-flex flex-wrap text-xs text-notify text-medium m-top-3">
      <li *ngFor="let user of usersToRemove" class="m-right-3 m-top-1">
        {{ user?.firstName }} {{ user?.lastName }}
      </li>
    </ul>
  </section>

  <footer class="modal-footer">
    <button class="button modal-cancel">Cancel</button>
    <button (click)="onClickConfirm()" class="button is-primary">Confirm</button>
  </footer>

</app-utility-modal>
<!-- /modal to delete user -->
