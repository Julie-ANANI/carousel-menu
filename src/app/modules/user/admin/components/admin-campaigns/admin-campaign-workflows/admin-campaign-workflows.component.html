<div id="admin-campaign-workflows-component">

  <!-- section stats -->
  <div class="campaign-stats-wrapper">

    <!-- stat col 1 -->
    <div class="stat1">
      <div class="container">
        <h5 class="heading">{{ 'CAMPAIGNS.STATS.HEADING.RECEPTION' | translate }}</h5>
        <div class="content">
          <h4 class="title">{{ 'CAMPAIGNS.STATS.TITLE.GOOD_EMAILS' | translate }}</h4>
          <h3 class="value">{{ getCampaignStat('good_emails') }}</h3>
        </div>
        <div class="content">
          <h4 class="title">{{ 'CAMPAIGNS.STATS.TITLE.RECEIVED' | translate }}</h4>
          <h3 class="value">{{ getCampaignStat('received') }}</h3>
        </div>
        <div class="content">
          <h4 class="title">{{ 'CAMPAIGNS.STATS.TITLE.BOUNCES' | translate }}</h4>
          <h3 class="value">{{ getCampaignStat('bounces') }}</h3>
        </div>
      </div>
    </div>

    <!-- stat col 2 -->
    <div class="stat2">
      <div class="container">
        <h5 class="heading">{{ 'CAMPAIGNS.STATS.HEADING.INTERACTION' | translate }}</h5>
        <div class="content">
          <h4 class="title">{{ 'CAMPAIGNS.STATS.TITLE.OPENED' | translate }}</h4>
          <h3 class="value">{{ getCampaignStat('opened') }}%</h3>
        </div>
        <div class="content">
          <h4 class="title">{{ 'CAMPAIGNS.STATS.TITLE.CLICKED' | translate }}</h4>
          <h3 class="value">{{ getCampaignStat('clicked') }}%</h3>
        </div>
      </div>
    </div>

    <!-- stat col 3 -->
    <div class="stat3">
      <div class="container">
        <h5 class="heading">{{ 'CAMPAIGNS.STATS.HEADING.DISPLAY' | translate }}</h5>
        <div class="content">
          <h4 class="title">{{ 'CAMPAIGNS.STATS.TITLE.EMAIL' | translate }}</h4>
          <h3 class="value">{{ getCampaignStat('email') }}</h3>
        </div>
        <div class="content">
          <h4 class="title">{{ 'CAMPAIGNS.STATS.TITLE.QUESTIONNAIRE' | translate }}</h4>
          <h3 class="value">{{ getCampaignStat('questionnaire') }}</h3>
        </div>
      </div>
    </div>

  </div>


  <div class="column col-xs-12 col-11 col-mx-auto">

    <!-- section select workflow -->
    <div class="section-light-container remove-bottom">
      <div class="form-group">
        <label class="form-label" for="admin-campaign-workflows">{{ 'CAMPAIGNS.WORKFLOW_PAGE.SELECT_LABEL' | translate }}</label>
        <select
          class="form-select"
          id="admin-campaign-workflows"
          [ngModel]="templates ? templates[0] : null"
          (ngModelChange)="onClickSelect($event)"
          [ngModelOptions]="{ standalone: true }">
          <option *ngIf="templates.length === 0" [ngValue]="null">{{ 'COMMON.SELECT' | translate }}</option>
          <option *ngFor="let template of templates" [ngValue]="template">{{ template.name }}</option>
        </select>
        <button type="button" class="btn btn-sm btn-primary" (click)="onClickImport()">{{ 'CAMPAIGNS.WORKFLOW_PAGE.BUTTON.IMPORT' | translate }}</button>
        <button *ngIf="!noResult" type="button" class="btn btn-sm btn-primary" (click)="onClickTestWorkflow()">{{ 'CAMPAIGNS.WORKFLOW_PAGE.BUTTON.TEST_WORKFLOW' | translate }}</button>
      </div>
    </div>


    <!-- section no campaign -->
    <div *ngIf="noResult" class="section-light-container remove-bottom">
      <app-message-space [widthMax]="'354px'">
        {{ 'CAMPAIGNS.WORKFLOW_PAGE.BOT.MESSAGE_A' | translate }}
        <br>
        {{ 'CAMPAIGNS.WORKFLOW_PAGE.BOT.MESSAGE_B' | translate }}
      </app-message-space>
    </div>


    <!-- section campaign -->
    <div *ngIf="!noResult" class="section-light-container remove-top">

      <span class="text-alert">{{ 'CAMPAIGNS.WORKFLOW_PAGE.NOTE' | translate }}</span>

      <div class="section-light-container remove-bottom">
        <app-admin-edit-workflow
          [scenario]="modifiedScenario"
          [signatures]="signatures"
          (deletedScenario)="removeScenario()"
          (scenarioChange)="updateAvailableScenario($event)">
        </app-admin-edit-workflow>
      </div>

    </div>

  </div>

</div>


<!-- modal to ask for the confirmation if importing the same template -->
<app-modal [(showModal)]="modalImport" [modalTitle]="'COMMON.MODAL.TITLE_CONFIRMATION'">
  {{ modalContent | translate }}

  <div class="modal-footer">
    <button class="btn btn-sm btn-cancel">{{ 'COMMON.CANCEL' | translate }}</button>
    <button class="btn btn-sm btn-primary" (click)="onClickConfirm()">{{ 'COMMON.SUBMIT' | translate }}</button>
  </div>

</app-modal>
<!-- /modal to ask for the confirmation if importing the same template -->







<!-- ab testing commented 14 feb -->
<!--<div *ngIf="!domain">
  <div class="bot-wrapper text-center">
    <span class="bot-rect">Attention, le domaine n'est pas d√©fini. Modifiez-le dans le projet, onglet Settings.</span>
    <br>
    <img src="https://res.cloudinary.com/umi/image/upload/app/default-images/bot-triangle.svg" class="bot-trian">
    <div><img src="https://res.cloudinary.com/umi/image/upload/app/default-images/error-bot.svg" width="" height="120"></div>
  </div>
</div>-->

<!--<div *ngIf="domain">
  *|DOMAIN|* <br>
  en :{{campaign.innovation.settings.domain.en}} <br>
  fr :{{campaign.innovation.settings.domain.fr}}
</div>-->

<!--<div>
  <app-admin-campaign-abtesting [modifiedScenarios]="modifiedScenarios" [campaign]="campaign"></app-admin-campaign-abtesting>
</div>-->


