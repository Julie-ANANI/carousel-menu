<section id="admin-campaign-answers">


  <!-- stats -->
  <ul class="stat">

    <!-- stat col 1 -->
    <li class="stat-container fluid">
      <h5 class="stat-heading">Insight</h5>
      <div class="stat-body">
        <h5 class="stat-sub-heading">Rejected</h5>
        <span class="stat-value">{{ campaignStat('status', 'REJECTED') }}</span>
      </div>
      <div class="stat-body">
        <h5 class="stat-sub-heading">To look at</h5>
        <span class="stat-value">{{ campaignStat('status', ['SUBMITTED', 'VALIDATED_UMIBOT', 'REJECTED_UMIBOT']) }}</span>
      </div>
      <div class="stat-body">
        <h5 class="stat-sub-heading">Validated</h5>
        <span class="stat-value">{{ campaignStat('status', 'VALIDATED') }}</span>
      </div>
    </li>

    <!-- stat col 2 -->
    <li class="stat-container fluid">
      <h5 class="stat-heading">Profile</h5>
      <div class="stat-body">
        <h5 class="stat-sub-heading">Standard</h5>
        <span class="stat-value">{{ campaignStat('profile', 1) }}</span>
      </div>
      <div class="stat-body">
        <h5 class="stat-sub-heading">Top profile</h5>
        <span class="stat-value">{{ campaignStat('profile', 2) }}</span>
      </div>
    </li>

    <!-- stat col 3 -->
    <li class="stat-container fluid">
      <h5 class="stat-heading">Quality</h5>
      <div class="stat-body">
        <h5 class="stat-sub-heading">Fill rate</h5>
        <span class="stat-value">--</span>
      </div>
      <div class="stat-body">
        <h5 class="stat-sub-heading">Time spent</h5>
        <span class="stat-value">{{ campaignStat('quality', 'time_elapsed') }}" min.</span>
      </div>
    </li>

  </ul>
  <!-- /stats -->


  <div class="section-light-pad">
    <div class="column col-xs-12 col-11 col-mx-auto">
      <div class="restrict-width">


        <!-- fetching error campaign answers -->
        <ng-container *ngIf="fetchingError">
          <div class="a-c-a-error-wrapper d-flex align-center">
            <app-error-template-1 [errorMessage]="errorMessage" [ngStyle]="{ 'width': '100%' }"></app-error-template-1>
          </div>
        </ng-container>
        <!-- /fetching error campaign answers -->


        <!-- no answers -->
        <ng-container *ngIf="!fetchingError && total === 0 && noResult">
          <div class="a-c-a-no-result-wrapper d-flex align-center">
            <app-message-template-2 [animation]="true" [ngStyle]="{ 'width': '100%' }">
              <div class="text-center">

                <h4 [innerText]="'CAMPAIGNS.NO_ANSWER'" class="text-background" translate></h4>

                <div *ngIf="authorizedActions(2)" class="m-top-25">

                  <label class="btn btn-primary rounded shadow">
                    <input #fileupload (change)="onClickImport(fileupload.files[0])" [hidden]="true" type="file"/>
                    <i class="fas fa-file-import m-no-left"></i>
                    {{ 'CAMPAIGNS.IMPORT_ANSWERS' | translate }}
                  </label>

                </div>

              </div>
            </app-message-template-2>
          </div>
        </ng-container>
        <!-- /no answers -->


        <!-- answers -->
        <ng-container *ngIf="!fetchingError && !noResult">


          <!-- buttons -->
          <div *ngIf="authorizedActions(2)" class="text-right">

            <!-- import -->
            <label class="btn ghost-primary btn-sm m-right-20 m-bottom-10">
              <input #fileupload (change)="onClickImport(fileupload.files[0])" [hidden]="true" type="file"/>
              {{ 'COMMON.BUTTON.IMPORT' | translate }}
            </label>

            <!-- export -->
            <button (click)="onClickExport()" class="btn btn-primary m-bottom-10 btn-sm">
              {{ 'COMMON.BUTTON.EXPORT' | translate }}
            </button>

          </div>
          <!-- /buttons -->


          <!-- table -->
          <div class="p-top-25">
            <app-shared-table
              (editRow)="onClickEdit($event)"
              (performAction)="onClickActions($event)"
              [(config)]="config"
              [data]="table">
            </app-shared-table>
          </div>
          <!-- /table -->


        </ng-container>
        <!-- /answers -->


      </div>
    </div>
  </div>


</section>

<!-- sidebar -->
<app-sidebar [(template)]="sidebarValue">
  <app-user-answer
    [sidebarState]="sidebarValue.animate_state"
    [adminMode]="adminMode"
    [(userAnswer)]="modalAnswer"
    [projectId]="campaign.innovation._id"
    [questions]="questions"
    (answerUpdated)="updateAnswer($event)">
  </app-user-answer>
</app-sidebar>
<!-- /sidebar insight preview -->
