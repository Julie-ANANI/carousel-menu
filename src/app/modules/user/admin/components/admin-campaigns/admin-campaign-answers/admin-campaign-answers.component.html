<div *ngIf="canAccess()" class="container grid-2xl fluid animate-fade is-5" id="admin-campaign-answers">

  <!-- stats -->
  <app-admin-campaign-stats [config]="statsConfig()"></app-admin-campaign-stats>
  <!-- /stats -->

  <!-- content -->
  <div class="column col-sm-12 col-11 col-mx-auto">

    <!-- no answers -->
    <section *ngIf="totalAnswers === 0 && canAccess(['import'])" class="p-top-50 p-bottom-50">
      <app-message-template-2 [animation]="true" class="w-full">
        <div class="text-center">
          <h4>Could not found any answers for this campaign. Try to import some!</h4>
          <div class="m-top-25">
            <label class="button is-primary is-rounded is-shadowed">
              <input
                  #fileupload
                  (change)="onImport(fileupload.files[0])"
                  [hidden]="true"
                  type="file"/>
              <ng-container *ngIf="!isImportingAnswers; else importFile">
                <i class="fas fa-file-import m-no-left"></i>
                Import answers
              </ng-container>
              <ng-template #importFile>
                importing answers...
              </ng-template>
            </label>
          </div>
        </div>
      </app-message-template-2>
    </section>
    <!-- /no answers -->

    <!-- answers -->
    <div *ngIf="totalAnswers > 0" class="p-top-30 p-bottom-30">

      <!-- quiz links / buttons -->
      <section
        *ngIf="canAccess(['import']) || canAccess(['export']) || canAccess(['quiz'])"
        class="flex-between">

        <!-- quiz links -->
        <div *ngIf="quizLinks.length && canAccess(['quiz'])" class="m-bottom-15 m-right-15">
          <p class="text-md">Visit these below links to see the questionnaire:</p>
          <ul class="m-no-bottom">
            <li *ngFor="let url of quizLinks" class="text-sm m-top-1 text-hover-underline">
              <a [href]="url" target="_blank" class="text-primary-dark">{{ url }}</a>
            </li>
          </ul>
        </div>
        <!-- /quiz links -->

        <!-- buttons -->
        <div *ngIf="canAccess(['import']) || canAccess(['export'])">

          <!-- import -->
          <label
            *ngIf="canAccess(['import'])"
            [ngClass]="{'m-right-25': canAccess(['export'])}"
            class="button is-primary is-sm is-outlined m-bottom-15">
            <input
                #fileupload
                (change)="onImport(fileupload.files[0])"
                [hidden]="true"
                type="file"/>
            <ng-container *ngIf="!isImportingAnswers; else importFile">
              Import
            </ng-container>
            <ng-template #importFile>
              importing...
            </ng-template>
          </label>
          <!-- /import -->

          <!-- export -->
          <button
            (click)="onExport()"
            *ngIf="canAccess(['export'])"
            class="button is-primary is-sm m-bottom-15"
            id="btn-export-answers">
            Export
          </button>
          <!-- /export -->

        </div>
        <!-- /buttons -->

      </section>
      <!-- /quiz links / buttons -->

      <!-- table -->
      <section class="p-top-30">
        <app-shared-table
          (editRow)="onEdit($event)"
          (performAction)="onActions($event)"
          [(config)]="localConfig"
          [data]="table">
        </app-shared-table>
      </section>
      <!-- /table -->

    </div>
    <!-- /answers -->

  </div>
  <!-- /content -->

</div>


<!-- sidebar insight preview -->
<app-sidebar
  *ngIf="answers.length > 0 && (canAccess(['view']) || canAccess(['edit']))"
  [(template)]="sidebarValue">
  <app-user-answer
    [sidebarState]="sidebarValue.animate_state"
    [adminMode]="canAccess(['edit'])"
    [excludedCompanies]="excludedCompanies"
    [(userAnswer)]="modalAnswer"
    [projectId]="campaign.innovation._id"
    [questions]="questions"
    (answerUpdated)="updateAnswer($event)">
  </app-user-answer>
</app-sidebar>
<!-- /sidebar insight preview -->
