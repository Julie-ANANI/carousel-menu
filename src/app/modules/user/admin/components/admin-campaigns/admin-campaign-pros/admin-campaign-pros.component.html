<div class="container grid-2xl fluid p-top-30 p-bottom-30" id="admin-campaign-pros">
  <div class="column col-sm-12 col-11 col-mx-auto">

    <!-- buttons -->
    <section
      *ngIf="canAccess(['import']) || canAccess(['export']) || canAccess(['user', 'add'])"
      class="text-right p-bottom-10 flex-wrap animate-fade is-7">

      <!-- add -->
      <button
        (click)="onClickAdd()"
        *ngIf="canAccess(['user', 'add'])"
        [disabled]="isCreating"
        [ngClass]="{'m-right-20': canAccess(['import']) || canAccess(['export'])}"
        class="button is-primary is-outlined is-sm m-bottom-20"
        type="button">
        <ng-container *ngIf="isCreating; else textAdd">
          adding the professional...
        </ng-container>
        <ng-template #textAdd>
          Add
        </ng-template>
      </button>
      <!-- /add -->

      <!-- import -->
      <button
        (click)="onClickImport()"
        *ngIf="canAccess(['import'])"
        [disabled]="isImporting"
        [ngClass]="{'m-right-20': canAccess(['export'])}"
        class="button is-primary is-outlined is-sm m-bottom-20"
        type="button">
        <ng-container *ngIf="isImporting; else textImport">
          importing the professionals...
        </ng-container>
        <ng-template #textImport>
          Import
        </ng-template>
      </button>
      <!-- /import -->

      <!-- export -->
      <button
        (click)="onClickExport()"
        *ngIf="canAccess(['export'])"
        [disabled]="isExporting"
        class="button is-primary is-sm m-bottom-20"
        type="button">
        <ng-container *ngIf="isExporting; else textExport">
          exporting the professionals...
        </ng-container>
        <ng-template #textExport>
          Export
        </ng-template>
      </button>
      <!-- /export -->

    </section>
    <!-- /buttons -->

    <!-- professionals -->
    <section class="p-top-20">
      <app-shared-professionals-list
        (selectedProfessionalChange)="selectedProsEvent($event)"
        [(config)]="config"
        [accessPath]="accessPath"
        [campaign]="campaign"
        [professionals]="professionals"
        [tableSelector]="'admin-campaign-pros-limit'"
        [total]="total">
      </app-shared-professionals-list>
    </section>
    <!-- /professionals -->

  </div>
</div>


<!-- sidebar -->
<app-sidebar *ngIf="canAccess(['user', 'add'])" [(template)]="sidebarValue">
  <app-user-form
    (finalProfessionalData)="onClickSave($event)"
    [isEditable]="true"
    [sidebarState]="sidebarValue.animate_state"
    [type]="sidebarValue.type">
  </app-user-form>
</app-sidebar>
<!-- /sidebar -->


<!-- modal to import -->
<app-utility-modal *ngIf="canAccess(['import'])" [(showModal)]="modalImport" [title]="'Import Board'">

  <section class="modal-body">

    <label class="form-label">Import professionals from campaign (only one campaign at a time)</label>

    <app-utility-auto-complete-input
      (update)="updateCampaign($event)"
      [onlyOne]="true"
      [config]="{ placeholder: 'Enter the campaign name', initialData: originCampaign, type: 'campaign' }">
    </app-utility-auto-complete-input>

    <div data-content="or" class="divider mxw-250 m-left-auto m-right-auto m-top-40"></div>

    <div class="text-center p-top-25">
      <label [ngClass]="{'disabled': isImporting}" class="button is-sm is-primary is-outlined">
        <input #fileupload type="file" [hidden]="true" (change)="onClickImportCsv(fileupload.files[0])" />
        <ng-container *ngIf="isImporting; else importCSV">
          importing the csv...
        </ng-container>
        <ng-template #importCSV>
          Import file
        </ng-template>
      </label>
    </div>

  </section>

  <footer class="modal-footer">
    <div [hidden]="!csvImportError" class="text-center p-top-25 error-msg">Error: {{csvImportError}}</div>

    <div [hidden]="!!csvImportError">
      <button [disabled]="isImporting" class="button modal-cancel" type="button">Cancel</button>
      <button
        (click)="onClickConfirm()"
        [disabled]="!originCampaign.length || isImporting"
        class="button is-primary"
        type="button">
        <ng-container *ngIf="isImporting; else textImport">
          importing the professionals...
        </ng-container>
        <ng-template #textImport>
          Confirm
        </ng-template>
      </button>
    </div>
  </footer>

</app-utility-modal>
<!-- /modal to import -->






