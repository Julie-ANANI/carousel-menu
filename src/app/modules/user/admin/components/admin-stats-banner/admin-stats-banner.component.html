<ul class="stat">
  <li *ngFor="let stat of config; let i = index;" class="stat-container fluid p-right-40">
    <h5 class="stat-heading">{{ stat.heading }}</h5>
    <div *ngFor="let content of stat.content; let i = index;" class="stat-body">
      <h5 class="stat-sub-heading">{{ content.subHeading }}</h5>
      <div *ngIf="content.stats" class="popover is-bottom m-left-4">
        <div class="d-flex align-center">
          <span class="stat-value">{{ content.value }}</span>
        </div>
        <div class="popover-container">
          <div class="card align-center">
            <h6>{{content.stats.title}}</h6>
            <p *ngFor="let stat of content.stats.values">{{ stat.name }} = {{stat.value}}</p>
          </div>
        </div>
      </div>

      <div class="d-hide">
        <ng-template #gaugeChartComponent>
          <app-gauge-chart class="d-flex align-center" *ngIf="content.value !== 'NA'"
                           [isPopover]="true"
                           [average]="content.gauge.referent"
                           [negative]="content.gauge.negative"
                           [delimitersLabels]="content.gauge.delimitersLabels"
                           [needleValue]="stringToNumber(content.value)">
            <span class="text-bold">{{ content.gauge.title }}</span>
          </app-gauge-chart>
        </ng-template>
      </div>

      <ng-container *ngIf="i < stat.content.length - 1; else lastGauge">
        <div  *ngIf="content.gauge" class="popover is-bottom">
          <span class="stat-value">{{ content.value }}</span>
          <ng-template [ngTemplateOutlet]="gaugeChartComponent"></ng-template>
        </div>
      </ng-container>

      <ng-template #lastGauge>
        <div class="medium-screen">
          <div  *ngIf="content.gauge" class="popover is-bottom">
            <span class="stat-value">{{ content.value }}</span>
            <ng-template [ngTemplateOutlet]="gaugeChartComponent"></ng-template>
          </div>
        </div>
        <div class="large-screen">
          <div  *ngIf="content.gauge" class="popover is-left">
            <span class="stat-value">{{ content.value }}</span>
            <ng-template [ngTemplateOutlet]="gaugeChartComponent"></ng-template>
          </div>
        </div>
      </ng-template>
      <span *ngIf="!content.gauge && !content.stats" class="stat-value">{{ content.value }}</span>
    </div>
    <a
      *ngIf="i === config.length - 1 && updateBtn"
      (click)="onUpdateStats($event)"
      data-tooltip="Update stats"
      class="c-hand tooltip text-primary m-right-15 text-20">
      <i class="fa fa-sync" style="color: white"></i>
    </a>
  </li>
</ul>
