<div *ngIf="canAccess()" class="container grid-2xl fluid" id="admin-country-management">
  <div class="column col-sm-12 col-11 col-mx-auto">

    <!-- error message while fetching -->
    <section *ngIf="!isLoading && fetchingError">
      <app-utility-message-error></app-utility-message-error>
    </section>
    <!-- /error message while fetching -->

    <!-- no fetching error -->
    <div *ngIf="!fetchingError && !isLoading" class="p-bottom-30">

      <!-- button -->
      <section *ngIf="canAccess(['add'])" class="text-right p-bottom-30 p-top-30">
        <button
          (click)="excludeSidebar($event)"
          class="button is-primary is-sm"
          type="button">
          Exclude countries
        </button>
      </section>
      <!-- /button -->

      <!-- table -->
      <section>
        <umius-table
          (editRow)="editCountry($event)"
          (removeRows)="deleteCountriesModal($event)"
          [(config)]="config"
          [data]="countriesTable">
        </umius-table>
      </section>
      <!-- /table -->

    </div>
    <!-- /no fetching error -->

  </div>
</div>


<!-- sidebar -->
<app-sidebar *ngIf="canAccess()" [(template)]="sidebarValue">
  <app-sidebar-blacklist
    (countryToFilter)="addCountry($event)"
    (editCountry)="countryEditionFinish($event)"
    [countryInfos]="currentCountry"
    [isEditable]="canAccess(['edit'])"
    [type]="sidebarValue.type">
  </app-sidebar-blacklist>
</app-sidebar>
<!-- /sidebar -->


<!-- modal to delete -->
<app-utility-modal *ngIf="canAccess(['delete'])" [(showModal)]="showDeleteModal" [title]="'Delete Board'">

  <section class="modal-body">
    Do you really want to delete the selected countries(s)?
    <ul class="d-flex flex-wrap text-xs text-meta text-medium m-top-3">
      <li *ngFor="let country of countriesToRemove" class="m-right-3 m-top-1">
        {{ country.name }}
      </li>
    </ul>
  </section>

  <footer class="modal-footer">
    <button class="button modal-cancel">Cancel</button>
    <button (click)="removeCountries()" class="button is-primary">Confirm</button>
  </footer>

</app-utility-modal>
<!-- /modal to delete -->
