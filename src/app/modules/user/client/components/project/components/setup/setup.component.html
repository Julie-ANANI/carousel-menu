<div id="setup" class="relative">

  <!-- banner project message  -->
  <ng-container *ngIf="showBanner">
    <app-utility-banner [(showBanner)]="showBanner" [background]="banner.background" [position]="'relative'">
      {{ banner.message | translate }}
    </app-utility-banner>
  </ng-container>
  <!-- banner project message  -->

  <!-- header -->
  <section [ngClass]="{'header_sticky': scrollOn}" class="container grid-2xl fluid p-top-10 bg-white">
    <div class="column col-sm-12 col-11 col-mx-auto">
      <div style="min-height: 60px" class="flex-between flex-wrap">

        <!-- title -->
        <h2  style="font-size: 22px" class="title m-bottom-15">
          {{ 'PROJECT_SETUP.TITLE' | translate }}
        </h2>
        <!-- /title -->

        <!-- buttons currentPage === 'PITCH' -->
        <div *ngIf="currentPage === 'PITCH'" class="d-flex flex-wrap align-center animate-fade is-4">

          <!-- card example -->
          <button
            (click)="onViewExample($event)"
            *ngIf="quizExample"
            class="button is-link is-sm m-bottom-15 p-no"
            id="btn-quiz-example">
            <img
              [src]="pictos?.example?.primary"
              alt="picto example"
              class="icon-left"
              width="18">
            {{ 'COMMON.BUTTON.EXAMPLE' | translate }}
          </button>
          <!-- card example -->

          <!-- preview -->
          <a
            *ngIf="previewLink"
            [href]="previewLink"
            [ngClass]="{'m-right-15': hasDropdownLang}"
            class="button is-link is-sm m-bottom-15 p-no"
            id="btn-preview"
            target="_blank">
            <img
              [src]="pictos?.eye?.primary"
              alt="picto preview"
              class="icon-left"
              width="20">
            {{ 'COMMON.BUTTON.PREVIEW' | translate }}
          </a>
          <!-- /preview -->

          <!-- card lang -->

          <!-- if only one lang then Add card lang -->
          <div *ngIf="canAddCard" class="m-bottom-15">
            <button
              (click)="onAddCard($event)"
              [disabled]="isAddingCard"
              class="button is-link is-sm p-no"
              id="btn-add-card">
              <i class="fas fa-plus-circle"></i>
              <ng-container *ngIf="activeInnovCard.lang === 'en'">
                {{ 'COMMON.BUTTON.ADD_LANG_FRENCH' | translate }}
              </ng-container>
              <ng-container *ngIf="activeInnovCard.lang === 'fr'">
                {{ 'COMMON.BUTTON.ADD_LANG_ENGLISH' | translate }}
              </ng-container>
            </button>
          </div>
          <!-- /if only one lang then Add card lang -->

          <!-- has more than 2 lang -->
          <div *ngIf="hasDropdownLang" class="dropdown m-bottom-15 is-right">
            <a class="button dropdown-toggle is-sm is-outlined is-info" tabindex="0">
              {{ 'COMMON.LANG.' + activeInnovCard.lang | uppercase | translate }}
              <i class="icon icon-right icon-caret"></i>
            </a>
            <ul class="menu">
              <li (click)="onChangeLang($event)" *ngIf="activeInnovCard.lang === 'en'" class="menu-item">
                {{ 'COMMON.LANG.FR' | translate }}
              </li>
              <li (click)="onChangeLang($event)" *ngIf="activeInnovCard.lang === 'fr'" class="menu-item">
                {{ 'COMMON.LANG.EN' | translate }}
              </li>
            </ul>
          </div>
          <!-- /has more than 2 lang -->

          <!-- /card lang -->

        </div>
        <!-- /buttons currentPage === 'PITCH' -->

        <!-- button currentPage === 'TARGETING' -->
        <div *ngIf="currentPage === 'TARGETING' && saveChanges" class="animate-fade is-4 m-bottom-15">
          <button
            (click)="onSaveProject($event)"
            [disabled]="isSavingProject"
            [ngClass]="{'is-active': activeSaveBadge}"
            class="button is-primary is-sm badge is-icon"
            id="btn-project-save"
            style="min-width: 100px">
            <i class="fas fa-save" *ngIf="activeSaveBadge"></i>
            <ng-container *ngIf="isSavingProject; else defSaveText">
              {{ 'COMMON.BUTTON.SAVING_PROJECT' | translate }}
            </ng-container>
            <ng-template #defSaveText>
              {{ 'COMMON.BUTTON.SAVE' | translate }}
            </ng-template>
          </button>
        </div>
        <!-- /button currentPage === 'TARGETING' -->

      </div>
    </div>
  </section>
  <!-- /header -->

  <!-- tabs -->
  <section class="container grid-2xl fluid">
    <div class="column col-sm-12 col-11 col-mx-auto">
      <ul class="tab">
        <li *ngFor="let tab of tabs" class="tab-item">
          <a
            (click)="navigateTo($event, tab.route)"
            [id]="tab.route"
            [ngClass]="tab.tracking"
            [routerLink]="tab.route"
            routerLinkActive="active">
            {{ 'PROJECT_SETUP.TAB.' + tab.name | translate }}
          </a>
        </li>
      </ul>
    </div>
  </section>
  <!-- /tabs -->

  <div>
    <router-outlet></router-outlet>
  </div>

</div>


<!-- modal to innovation card add lang -->
<app-utility-modal-empty [(showModal)]="showCardModal">

  <!-- body -->
  <section class="modal-body p-bottom-40">
    <h2 [ngSwitch]="{ 'color': '4C4C4C' }" class="title is-4 text-center text-bold m-bottom-50">
      {{ 'PROJECT_SETUP.ADD_PROJECT_MODAL.HEADING' | translate }}
    </h2>
    <div class="mxw-550 m-right-auto m-left-auto">
      {{ 'PROJECT_SETUP.ADD_PROJECT_MODAL.INFO' | translate }}
    </div>
  </section>
  <!-- body -->

  <!-- footer -->
  <footer class="modal-footer justify-center">

    <button
      [disabled]="isAddingCard"
      (click)="closeModal()"
      class="button modal-cancel"
      id="btn-cancel">
      {{ 'COMMON.BUTTON.CANCEL' | translate }}
    </button>

    <button
      (click)="addInnovationCard($event)"
      [disabled]="isAddingCard"
      class="button is-community"
      id="btn-confirm-card">
      <ng-container *ngIf="isAddingCard; else defConfirmText">
        {{ 'COMMON.BUTTON.ADDING_LANG' | translate }}
      </ng-container>
      <ng-template #defConfirmText>
        {{ 'COMMON.BUTTON.CONFIRM' | translate }}
      </ng-template>
    </button>

  </footer>
  <!-- /footer -->

</app-utility-modal-empty>
<!-- modal to innovation card add lang -->
