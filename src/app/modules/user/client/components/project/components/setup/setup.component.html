<ng-container *ngIf="innovation">

  <section id="setup-component">

    <!-- project under submitted status -->
    <ng-container *ngIf="innovation.status === 'SUBMITTED'">
      <div class="banner bg-success">
        {{ 'PROJECT_MODULE.SETUP.MESSAGE.SUBMITTED' | translate }}
      </div>
    </ng-container>

    <!-- project under evaluating and reviewing status -->
    <ng-container *ngIf="innovation.reviewing && innovation.status === 'EDITING'">
      <div class="banner bg-success">
        {{ 'PROJECT_MODULE.SETUP.MESSAGE.REVIEWING.A' | translate }}
        {{ 'PROJECT_MODULE.SETUP.MESSAGE.REVIEWING.B' | translate }}
        {{ 'PROJECT_MODULE.SETUP.MESSAGE.REVIEWING.C' | translate }}
      </div>
    </ng-container>

    <!-- project under evaluating status -->
    <ng-container *ngIf="innovation.status === 'EVALUATING'">
      <div class="banner bg-success">
        {{ 'PROJECT_MODULE.SETUP.MESSAGE.EVALUATING' | translate }}
      </div>
    </ng-container>

    <!-- project under done status message -->
    <ng-container *ngIf="innovation.status === 'DONE'">
      <div class="banner bg-success">
        {{ 'PROJECT_MODULE.SETUP.MESSAGE.DONE' | translate }}
      </div>
    </ng-container>

    <!-- header section -->
    <div class="section-header section-light-pad rm-pad-bottom" [ngClass]="{ 'sticky': scrollOn }">
      <div class="column col-xs-12 col-11 col-mx-auto">
        <div class="flex-between content-wrapper">

          <!-- title -->
          <h2 class="title-primary">{{ 'PROJECT_MODULE.SETUP.TITLE' | translate }}</h2>

          <!-- buttons -->
          <ul class="flex-start button-wrapper">
            <li>
              <button class="btn ghost-primary gtm-print-card" (click)="onClickPrint($event)">
                {{ 'COMMON.BUTTON.PRINT' | translate }}
              </button>
            </li>
            <li>
              <button class="btn ghost-primary gtm-preview-card" (click)="onClickPreview($event)">
                {{ 'COMMON.BUTTON.PREVIEW' | translate }}
              </button>
            </li>
            <li [ngClass]="buttonSaveClass">
              <div class="shape is-circle"><i class="fas fa-save"></i></div>
              <button class="btn btn-primary ghost-primary" (click)="onClickSave($event)">
                {{ 'COMMON.BUTTON.SAVE' | translate }}
              </button>
            </li>
            <li>
              <button
                [disabled]="innovation.status !== 'EDITING'"
                (click)="onClickSubmit()"
                class="btn btn-primary gtm-submit-project">
                {{ 'COMMON.BUTTON.SUBMIT' | translate }}
              </button>
            </li>
          </ul>

        </div>
      </div>
    </div>
    <!-- /header section -->

    <!-- tab section -->
    <div class="section-tabs">
      <div class="column col-xs-12 col-11 col-mx-auto">
        <ul class="tab">
          <li class="tab-item">
            <a [ngClass]="{ 'active': currentPage === 'pitch' }" class="gtm-edit-market-targeting" (click)="setCurrentTab($event, 'pitch')">
              <div class="shape is-circle is-md pitch-check" [ngClass]=" { 'complete': getPitchCompletion(innovation) === 100 } ">{{ getPitchCompletion(innovation) }}%</div>
              {{ 'PROJECT_MODULE.SETUP.PITCH_TAB' | translate }}
            </a>
          </li>
          <li class="tab-item">
            <a [ngClass]="{ 'active': currentPage === 'targeting' }" class="gtm-edit-market-targeting" (click)="setCurrentTab($event, 'targeting')">
              <div class="shape is-circle is-md targeting-check" [ngClass]=" { 'complete': innovation?.settings.completion === 100 } ">{{ innovation?.settings.completion }}%</div>
              {{ 'PROJECT_MODULE.SETUP.TARGETING_TAB' | translate }}
            </a>
          </li>
          <li class="tab-item">
            <a [ngClass]="{ 'active': currentPage === 'objectives' }" class="gtm-edit-market-targeting" (click)="setCurrentTab($event, 'objectives')">
              <div class="shape is-circle is-md objectives-check" [ngClass]=" { 'complete': innovation?.quizId } "><i class="fas fa-check"></i></div>
              {{ 'PROJECT_MODULE.SETUP.OBJECTIVES_TAB' | translate }}
            </a>
          </li>
          <li class="tab-item">
            <a [ngClass]="{ 'active': currentPage === 'survey' }" class="gtm-edit-market-targeting" (click)="setCurrentTab($event, 'survey')">
              <div class="shape is-circle is-md survey-check" [ngClass]=" { 'complete': innovation?.quizId } "><i class="fas fa-check"></i></div>
              {{ 'PROJECT_MODULE.SETUP.SURVEY_TAB' | translate }}
            </a>
          </li>
        </ul>
      </div>
    </div>
    <!-- /tab section -->

    <!-- different section -->
    <div class="section-pad rm-pad-bottom">
      <div class="column col-xs-12 col-11 col-mx-auto">

        <!-- pitch -->
        <div *ngIf="currentPage === 'pitch'">
          <app-shared-project-edit-cards [project]="innovation" [editable]="canEdit"></app-shared-project-edit-cards>
        </div>

        <!-- targeting -->
        <ng-container *ngIf="currentPage === 'targeting'">
          <app-shared-project-settings [project]="innovation" [editable]="canEdit"></app-shared-project-settings>
        </ng-container>

        <!-- objectives -->
        <ng-container *ngIf="currentPage === 'objectives'">
          <app-objectives [project]="innovation"></app-objectives>
        </ng-container>

        <!-- survey -->
        <ng-container *ngIf="currentPage === 'survey'">
          <app-survey [project]="innovation"></app-survey>
        </ng-container>

      </div>
    </div>
    <!-- /different section -->

  </section>


  <!-- innovation preview sidebar -->
  <app-sidebar [(template)]="sidebarValue">
    <app-innovation-preview [projectCard]="innovation.innovationCards[selectedInnovationIndex]"></app-innovation-preview>
  </app-sidebar>
  <!-- /innovation preview sidebar -->

</ng-container>


<!-- modal to ask user to sure about submitting the project -->
<app-modal [(showModal)]="submitModal" [title]="'COMMON.MODAL.TITLE_CONFIRMATION'">

  <section class="modal-body">
    <span>{{ 'SHARED_PROJECT_EDIT.DESCRIPTION.MODAL.CONTENT' | translate }}</span>
  </section>

  <footer class="modal-footer">
    <button class="button modal-cancel">{{ 'COMMON.BUTTON.CANCEL' | translate }}</button>
    <button (click)="onClickConfirm()" class="button is-primary">{{ 'COMMON.BUTTON.CONFIRM' | translate }}</button>
  </footer>

</app-modal>
<!-- /modal to ask user to sure about submitting the project -->


<!-- print innovation -->
<ng-container *ngIf="innovation">
  <div id="innovation-card-print">

    <!-- column 1 -->
    <div class="column-1">

      <h3 class="title">{{ innovation.innovationCards[selectedInnovationIndex].title }}</h3>

      <div class="summary-text" [innerHTML]="innovation.innovationCards[selectedInnovationIndex].summary"></div>

      <div class="image-wrapper">
        <img [src]="getImageSrc(innovation.innovationCards[selectedInnovationIndex])" alt=" ">
      </div>

      <div class="advantage-wrapper">
        <h3 class="title">{{ 'DISCOVERDESCRIPTION.BENEFITS' | translate }}</h3>
        <ul class="advantages">
          <li *ngFor="let advantage of innovation.innovationCards[selectedInnovationIndex].advantages">
            {{ advantage.text | FormatText }}
          </li>
        </ul>
      </div>

    </div>
    <!-- /column 1 -->

    <!-- column 2 -->
    <div class="column-2">
      <h3 class="title">{{ 'DISCOVERDESCRIPTION.ISSUE' | translate }}</h3>
      <div class="issue-text" [innerHtml]="innovation.innovationCards[selectedInnovationIndex].problem"></div>
    </div>
    <!-- /column 2 -->

    <!-- column 3 -->
    <div class="column-3">
      <h3 class="title">{{ 'DISCOVERDESCRIPTION.SOLUTION' | translate }}</h3>
      <div class="solution-text" [innerHtml]="innovation.innovationCards[selectedInnovationIndex].solution"></div>
    </div>
    <!-- /column 3 -->

  </div>
</ng-container>
<!-- /print innovation -->
