<!-- fetching error -->
<app-utility-message-error *ngIf="fetchingError"></app-utility-message-error>
<!-- /fetching error -->

<!-- no fetching error -->
<div *ngIf="!fetchingError" id="project">

  <!-- banner project message  -->
  <app-utility-banner [(showBanner)]="!!showBanner" [background]="'bg-progress'" [position]="'relative'">
    <span class="text-normal">
      This project has been updated by
      <span class="text-medium">{{ showBanner }}</span>
      at
      <span class="text-medium">{{ updateTime | date: 'H:mm' }}.</span>
    </span>
  </app-utility-banner>
  <!-- banner project message  -->

  <!-- header -->
  <section class="section-header p-top-25">
    <div class="container fluid grid-2xl">
      <div class="column col-sm-12 col-11 col-mx-auto">

        <!-- heading -->
        <h1 class="title is-4 text-white text-bold m-bottom-1 text-center">
          <ng-container *ngIf="!!innovation.name; else project">{{ innovation.name }}</ng-container>
          <ng-template #project>{{ 'COMMON.LABEL.PROJECT' | translate }}</ng-template>
        </h1>
        <!-- /heading -->

        <!-- mission objective -->
        <ng-container *ngIf="!!mission.objective || !!mission.template">

          <!-- use cases on 1st June, 2021 -->
          <ng-container *ngIf="!!(mission.template && mission.template.entry && mission.template.entry.length);
          else oldObjective">
            <div class="flex-centered flex-d-column p-bottom-40">
              <h3 class="op-8 text-lg text-normal text-white m-bottom-2">{{ objectiveName() }}</h3>
              <button
                (click)="showModal($event)"
                class="button is-link is-community p-no text-underline"
                id="project-btn-our-methodology">
                {{ 'COMMON.BUTTON.OUR_METHODOLOGY' | translate }}
              </button>
            </div>
          </ng-container>
          <!-- /use cases on 1st June, 2021 -->

          <!-- old project -->
          <ng-template #oldObjective>
            <ng-container *ngIf="!!(mission.objective.principal && mission.objective.principal['en']
            && mission.objective.principal['en'] !== 'Other')">
              <div class="op-8 flex-centered text-lg text-normal text-white p-bottom-40">
                <i [ngClass]="iconClass" class="text-md m-right-10"></i>
                {{ mission.objective.principal[currentLang] }}
              </div>
            </ng-container>
          </ng-template>
          <!-- /old project -->

        </ng-container>
        <!-- /mission objective -->

        <!-- tabs -->
        <div class="flex-centered">
          <ul class="tab">
            <li *ngFor="let tab of tabs" class="tab-item text-white">
              <a
                (click)="navigateTo($event, tab.route)"
                [id]="tab.route"
                [ngClass]="tab.tracking"
                [routerLink]="tab.route"
                class="text-medium text-md"
                routerLinkActive="active">
                <ng-container *ngIf="!!tab.iconClass; else number"><i [ngClass]="tab.iconClass"></i></ng-container>
                <ng-template #number>
                  <span class="shape is-circle is-sm text-13">{{ tab.number }}</span>
                </ng-template>
                {{ 'PROJECT_MODULE.' + tab.name | translate }}
              </a>
            </li>
          </ul>
        </div>
        <!-- /tabs -->

      </div>
    </div>
  </section>
  <!-- /header -->

  <router-outlet></router-outlet>

</div>
<!-- /no fetching error -->

<!-- modal methodology -->
<app-utility-modal-empty
  *ngIf="!fetchingError && !!mission.template"
  [maxWidth]="'1024px'"
  [(showModal)]="openModal">
  <section [ngStyle]="{'border-radius': '6px'}" class="modal-body p-no">
    <app-market-test-methodology [objective]="objectiveName('en')"></app-market-test-methodology>
  </section>
</app-utility-modal-empty>
<!-- /modal methodology -->
