<div id="market-test-objectives">

  <!-- heading -->
  <h1 class="title text-white text-center is-4 text-bold">
    {{ 'MARKET_TEST_OBJECTIVES.HEADINGS.CATEGORY' | translate }}
  </h1>
  <!-- /heading -->

  <!-- categories -->
  <div class="flex-centered flex-wrap p-top-10">
    <a
      (click)="onChangeCategory($event, category)"
      *ngFor="let category of objectivesCategory"
      [href]="'#arrow-bottom-primary-objectives'"
      [id]="'objectives-category-'+category.toLowerCase()"
      [ngClass]="{'active': selectedCategory === category}"
      class="objectives-category m-bottom-25 m-left-10 m-right-10 box-info"
      pageScroll>
      <h4>{{ 'MARKET_TEST_OBJECTIVES.CATEGORY.TITLE.' + category | translate }}</h4>
      <p>{{ 'MARKET_TEST_OBJECTIVES.CATEGORY.DESCRIPTION.' + category | translate }}</p>
    </a>
  </div>
  <!-- /categories -->

  <!-- arrow -->
  <div class="flex-centered p-top-20">
    <img
      alt="Arrow bottom"
      class="img-responsive"
      src="https://res.cloudinary.com/umi/image/upload/app/default-images/configurator/arrow-bottom.svg">
  </div>
  <!-- /arrow -->

  <!-- text -->
  <div class="text-center p-top-40">
    <h2 class="text-bold text-white title is-4">{{ 'MARKET_TEST_OBJECTIVES.WHAT_NEXT' | translate }}</h2>
  </div>
  <!-- /text -->

  <!-- principal objectives -->
  <div class="section-principal-objectives relative">

    <!-- objectives -->
    <div class="flex-between objectives-wrapper relative">
      <ng-container *ngFor="let principal of principalObjectives; let i = index;">

        <div
          [ngClass]="{'disabled': !selectedCategory || principal.category !== selectedCategory}"
          class="principal-objective relative">

          <a [href]="'#arrow-bottom-methodology'" pageScrollOffset="50" pageScroll class="d-block">
            <p
              [ngClass]="{'active': selectedPrincipal.objective === principal.objective}"
              (click)="onChangePrincipal($event, principal)"
              [id]="'market-test-principal-objective'"
              class="box-info text-white text-medium text-md flex-centered">
              {{ principal.objective }}
            </p>
          </a>

          <!-- boat start / middle -->
          <ng-container *ngIf="(i === 0 && (!selectedCategory || (selectedCategory === 'INNOVATE' &&
          !selectedPrincipal.objective))) || (i === 3 && selectedCategory === 'INNOVATION' &&
          !selectedPrincipal.objective)">
            <div class="boat-image hide-lg">
              <img
                alt="Compass active"
                class="img-responsive animate-fade is-9 is-boat"
                src="https://res.cloudinary.com/umi/image/upload/app/default-images/configurator/boat.svg">
            </div>
          </ng-container>
          <!-- boat start / middle -->

          <!-- compass / boat image -->
          <div class="boat-image compass-image">

            <ng-container *ngIf="selectedCategory === principal.category; else compassInactive">
              <ng-container *ngIf="selectedPrincipal.objective === principal.objective; else compassActive">
                <img
                  alt="Compass active"
                  class="img-responsive animate-fade is-9 is-boat"
                  src="https://res.cloudinary.com/umi/image/upload/app/default-images/configurator/boat.svg">
              </ng-container>
              <ng-template #compassActive>
                <img
                  alt="Compass active"
                  class="img-responsive animate-fade is-5"
                  src="https://res.cloudinary.com/umi/image/upload/app/default-images/configurator/compass-active.svg">
              </ng-template>
            </ng-container>

            <ng-template #compassInactive>
              <img
                alt="Compass inactive animate-fade is-5"
                class="img-responsive"
                src="https://res.cloudinary.com/umi/image/upload/app/default-images/configurator/compass-inactive.svg">
            </ng-template>

          </div>
          <!-- /compass / boat image -->

        </div>
      </ng-container>
    </div>
    <!-- /objectives -->

    <div class="market-path hide-lg"></div>

    <!-- island image -->
    <div class="island-image hide-lg absolute">
      <img
        [src]="'https://res.cloudinary.com/umi/image/upload/app/default-images/configurator/island-'+currentLang+'.png'"
        alt="Test island"
        class="img-responsive">
    </div>
    <!-- /island image -->

  </div>
  <!-- principal objectives -->

  <!-- arrow -->
  <div class="flex-centered p-top-40 p-bottom-50" id="arrow-bottom-primary-objectives">
    <img
      alt="Arrow bottom"
      class="img-responsive"
      src="https://res.cloudinary.com/umi/image/upload/app/default-images/configurator/arrow-bottom.svg">
  </div>
  <!-- /arrow -->

  <!-- methodology -->
  <div
    [ngClass]="!!selectedPrincipal.objective ? 'wrapper-expand' : 'wrapper-collapse'"
    class="section-methodology m-left-auto m-right-auto">
    <ng-container *ngIf="!!selectedPrincipal.objective">
      <app-market-test-methodology [objective]="selectedPrincipal.objective"></app-market-test-methodology>
    </ng-container>
  </div>
  <!-- /methodology -->

  <!-- arrow -->
  <div *ngIf="!!selectedPrincipal.objective" id="arrow-bottom-methodology" class="flex-centered p-top-50">
    <img
      alt="Arrow bottom"
      class="img-responsive"
      src="https://res.cloudinary.com/umi/image/upload/app/default-images/configurator/arrow-bottom.svg">
  </div>
  <!-- /arrow -->

</div>
