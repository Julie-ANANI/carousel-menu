<div class="p-top-40 p-bottom-50 page__height" id="new-project">
  <ng-container [ngSwitch]="fields[currentStep]">

    <!-- circles -->
    <ng-container *ngIf="currentStep !== 0">
      <section class="flex-centered p-bottom-20">
        <ng-container *ngFor="let field of fields; let i = index">
          <div
            *ngIf="i > 0"
            [ngClass]="{ 'bg-primary': i === currentStep }"
            class="shape is-sm is-circle">
          </div>
        </ng-container>
      </section>
    </ng-container>
    <!-- /circles -->

    <!-- STEP_0 -->
    <ng-container *ngSwitchCase="'STEP_0'">
      <div class="container fluid grid-2xl">
        <div class="column col-sm-12 col-11 col-mx-auto">
          <section class="p-bottom-50 p-top-20">
            <app-new-project-welcome></app-new-project-welcome>
          </section>
        </div>
      </div>
    </ng-container>
    <!-- /STEP_0 -->

    <!-- STEP_1 -->
    <ng-container *ngSwitchCase="'STEP_1'">
      <section class="p-top-20 p-bottom-30">
        <app-market-test-objectives
          (missionTemplateChange)="onChangeMissionTemplate($event)"
          [(objectiveComment)]="mission.objectiveComment"
          [missionTemplate]="mission.template"
          [missionTemplates]="missionTemplates">
        </app-market-test-objectives>
      </section>
    </ng-container>
    <!-- /STEP_1 -->

    <!-- STEP_LAST -->
    <ng-container *ngSwitchCase="'STEP_LAST'">
      <div class="container fluid grid-2xl">
        <div class="column col-sm-12 col-11 col-mx-auto">
          <section class="p-bottom-30 p-top-20">
            <app-new-project-last-step
              (restitutionDateChange)="onChangeRestitutionDate($event)"
              [(collaborators)]="collaborators"
              [(collaboratorsConsent)]="collaboratorsConsent"
              [(milestoneDateComment)]="milestoneDateComment"
              [(projectName)]="clientProject.name"
              [(reportingLang)]="reportingLang"
              [restitutionDate]="restitutionDate">
            </app-new-project-last-step>
          </section>
        </div>
      </div>
    </ng-container>
    <!-- /STEP_LAST -->

    <!-- buttons -->
    <div class="text-center p-top-20">

      <!-- previous -->
      <button
        (click)="goToBackStep($event)"
        *ngIf="currentStep > 0"
        [disabled]="isCreating || isNextStep"
        [id]="'new-project-btn-step-previous'"
        class="button is-white is-outlined is-lg m-top-20 m-left-20 m-right-20">
        {{ 'COMMON.BUTTON.PREVIOUS' | translate }}
      </button>
      <!-- /previous -->

      <!-- navigate next step -->
      <button
        (click)="goToNextStep($event)"
        [disabled]="isDisabled || isCreating || isNextStep"
        [id]="buttonId"
        class="button is-community is-lg m-top-20 m-left-20 m-right-20">
        <span *ngIf="isCreating || isNextStep; else btnText" class="loading is-white"></span>
        <ng-template #btnText>
          {{'NEW_PROJECT.BUTTONS.' + fields[currentStep] | translate }}
        </ng-template>
      </button>
      <!-- /navigate next step -->

    </div>
    <!-- /buttons -->

  </ng-container>
</div>

