<section class="p-top-50 p-bottom-50" id="account-component">
  <div class="column col-xs-12 col-11 col-mx-auto">
    <div class="profile-wrapper">

      <!-- left section -->
      <div class="left-content-wrapper">

        <!-- Profile pics -->
        <ng-container *ngIf="hasProfilePic()">
          <div class="profile-pic">
            <img [src]="profilePicture" alt=" ">
          </div>
        </ng-container>

        <ng-container *ngIf="!hasProfilePic()">
          <div class="profile-pic-def">
            <h2>{{ formData.get('firstName').value | slice:0:1 }}{{ formData.get('lastName').value | slice:0:1 }}</h2>
          </div>
        </ng-container>
        <!-- /Profile pics -->

        <!-- Name -->
        <h1>{{ name }}</h1>

        <!-- Job -->
        <h6>{{ jobTitle }}</h6>

        <!-- Label Ambassador & linkedIn-->
        <ng-container *ngIf="userProvider === 'hubspot'">
          <div class="label is-draft">{{ 'COMMON.AMBASSADOR' | translate }}</div>
        </ng-container>

        <ng-container *ngIf="userProvider === 'external'">
          <div class="label is-secondary">LinkedIn</div>
        </ng-container>
        <!-- /Label Ambassador & linkedIn -->

        <!-- hr -->
        <hr class="hero-hr">

        <!-- Links -->
        <ul class="user-actions">
          <li (click)="showPasswordSidebar($event)">{{ 'MY_ACCOUNT.CHANGE_PASSWORD' | translate }}</li>
          <li (click)="onDelete($event)">{{ 'MY_ACCOUNT.DELETE' | translate }}</li>
        </ul>

      </div>
      <!-- /left section -->

      <!-- right section -->
      <div class="right-content-wrapper">

        <!-- Title -->
        <div class="title-wrapper">
          <h3>{{ 'MY_ACCOUNT.TITLE' | translate }}</h3>
          <p>{{ 'MY_ACCOUNT.PARA' | translate }}</p>
        </div>

        <!-- Form -->
        <form novalidate (ngSubmit)="onSubmit()" [formGroup]="formData" class="form-wrapper">

          <!-- first name &  last name -->
          <div class="input-group inline">

            <!-- first name -->
            <div class="form-group has-error">
              <label class="form-label" for="account-firstName">{{ 'COMMON.LABEL.FIRSTNAME' | translate }}</label>
              <input
                class="form-input"
                formControlName="firstName"
                id="account-firstName"
                type="text"
                placeholder="John">
              <span class="form-input-hint" *ngIf="formData.get('firstName').touched && formData.get('firstName').invalid && formData.get('firstName').hasError('required')">
                {{ 'COMMON.REQUIRED.FIRSTNAME' | translate }}
              </span>
            </div>

            <!-- last name -->
            <div class="form-group has-error">
              <label class="form-label" for="account-lastName">{{ 'COMMON.LABEL.LASTNAME' | translate }}</label>
              <input
                class="form-input"
                formControlName="lastName"
                id="account-lastName"
                type="text"
                placeholder="Doe">
              <span class="form-input-hint" *ngIf="formData.get('lastName').touched && formData.get('lastName').invalid && formData.get('lastName').hasError('required')">
                {{ 'COMMON.REQUIRED.LASTNAME' | translate }}
              </span>
            </div>

          </div>

          <!-- email & company -->
          <div class="input-group inline">

            <!-- email -->
            <div class="form-group">
              <label class="form-label" for="account-email">{{ 'COMMON.LABEL.EMAIL' | translate }}</label>
              <input
                class="form-input"
                formControlName="email"
                id="account-email"
                type="email"
                placeholder="john@catco.com">
            </div>

            <!-- Company -->
            <div class="form-group" formGroupName="company">
              <label class="form-label" for="account-company">{{ 'COMMON.LABEL.COMPANY' | translate }}</label>
              <input
                auto-complete
                class="form-input"
                formControlName="name"
                id="account-company"
                type="text"
                [min-chars]="2"
                [list-formatter]="autocompleteCompanyListFormatter"
                [source]="companiesSuggestions"
                (valueChanged)="selectCompany($event)"
                [attr.placeholder]="'COMMON.PLACEHOLDER.COMPANY' | translate">
            </div>

          </div>

          <!-- Job & Country -->
          <div class="input-group inline">

            <!-- Job -->
            <div class="form-group">
              <label class="form-label" for="account-jobTitle">{{ 'COMMON.LABEL.JOBTITLE' | translate }}</label>
              <input
                class="form-input"
                formControlName="jobTitle"
                id="account-jobTitle"
                type="text"
                [attr.placeholder]="'COMMON.PLACEHOLDER.JOBTITLE' | translate">
            </div>

            <!-- Country -->
            <div class="form-group">
              <label class="form-label" for="account-country">{{ 'COMMON.LABEL.COUNTRY' | translate }}</label>
              <input
                class="form-input"
                formControlName="country"
                id="account-country"
                type="text"
                [attr.placeholder]="'COMMON.PLACEHOLDER.COUNTRY' | translate"
                (click)="onSuggestCountries()"
                autocomplete="off">
              <ul *ngIf="formData.get('country').value" class="input-suggestion" [ngStyle]="{ 'display': displayCountrySuggestion ? 'flex' : 'none' }">
                <li *ngFor="let suggestion of countriesSuggestion.sort()" (click)="onValueSelect(suggestion)">
                  {{ suggestion }}
                </li>
              </ul>
            </div>

          </div>

          <!-- phone & lang -->
          <div class="input-group inline">

            <!-- phone -->
            <div class="form-group">
              <label class="form-label" for="account-phone">{{ 'COMMON.LABEL.PHONE' | translate }}</label>
              <input
                class="form-input"
                formControlName="phone"
                id="account-phone"
                type="tel"
                placeholder="+33 55 90 56 876">
            </div>

            <!-- language -->
            <div class="form-group">
              <label class="form-label" for="lang">{{ 'COMMON.LANGUAGE' | translate }}</label>
              <select class="form-select" id="lang" name="lang" formControlName="language">
                <option value="en">{{ 'COMMON.LANG.EN' | translate }}</option>
                <option value="fr">{{ 'COMMON.LANG.FR' | translate }}</option>
              </select>
            </div>

          </div>

          <!-- sector & technology -->
          <div class="input-group inline">

            <!-- sector -->
            <div class="form-group">
              <label class="form-label">{{ 'COMMON.LABEL.ACTIVITY_FIELDS' | translate }}</label>
              <div class="input-gap">
                <app-utility-input-list
                  (update)="addSector($event)"
                  [config]="{ placeholder: ('COMMON.PLACEHOLDER.ACTIVITY_FIELDS' | translate), initialData: formData.get('sectors').value }">
                </app-utility-input-list>
              </div>
            </div>

            <!-- technologies -->
            <div class="form-group">
              <label class="form-label">{{ 'COMMON.LABEL.TECHNOLOGIES' | translate }}</label>
              <div class="input-gap">
                <app-utility-input-list
                  (update)="addTechnology($event)"
                  [config]="{ placeholder: ('COMMON.PLACEHOLDER.TECHNOLOGIES' | translate), initialData: formData.get('technologies').value }">
                </app-utility-input-list>
              </div>
            </div>

          </div>

          <!-- emails notifications -->
          <div class="input-group inline">
            <div class="form-group d-flex align-center" style="margin-left: unset">
              <label class="form-label" for="user-account-preference">{{'COMMON.LABEL.EMAILS_NOTIFICATIONS' | translate}}</label>
              <label class="form-switch m-left-25">
                <input
                  id="user-account-preference"
                  (change)="onChangePreference($event)"
                  [checked]="formData.get('preferences').value"
                  type="checkbox">
                <i class="form-icon"></i> {{formData.get('preferences').value? ('COMMON.LABEL.ACTIVATED' | translate)  : ('COMMON.LABEL.DEACTIVATED' | translate)}}
              </label>
            </div>
          </div>
          <!-- /emails notifications -->

          <!-- save button -->
          <div class="save-wrapper text-center">
            <button
              class="button badge badge-icon" type="submit"
              [ngClass]="{'badge-active': toSave}"
              [disabled]="formData.invalid || !toSave">
              <i class="fas fa-save" *ngIf="toSave"></i>
              {{ 'COMMON.BUTTON.SAVE' | translate }}
            </button>
          </div>

        </form>

      </div>
      <!-- /right section -->

    </div>
  </div>
</section>


<!-- change password sidebar -->
<umius-sidebar-full [(template)]="sidebarValue">
  <app-user-change-password [sidebarState]="sidebarValue.animate_state" (passwordUpdate)="updatePassword($event)"></app-user-change-password>
</umius-sidebar-full>
<!-- /change password sidebar -->


<!-- modal to delete account -->
<umius-modal [(showModal)]="modalDelete" [title]="'COMMON.MODAL.TITLE_DELETE'">
  {{ 'MY_ACCOUNT.DELETE_MODAL.TITLE' | translate }}
  <br><br>
  {{ 'MY_ACCOUNT.DELETE_MODAL.CONTENT' | translate }}
  <div class="modal-footer">
    <button class="button is-sm modal-cancel">{{ 'COMMON.BUTTON.CANCEL' | translate }}</button>
    <button class="button is-sm" (click)="onClickSubmit($event)">{{ 'COMMON.BUTTON.CONFIRM' | translate }}</button>
  </div>
</umius-modal>
<!-- /modal to delete account -->


