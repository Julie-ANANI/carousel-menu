<section class="section-container"  id="discover-page-wrapper">
  <div class="column col-xs-12 col-11 col-mx-auto">

    <!-- Heading and Search field -->
    <div class="header-wrapper">
      <h1 class="main-heading">{{ 'DISCOVER.PAGE_DESCRIPTION' | translate }}</h1>
      <div class="search">
        <app-search-input></app-search-input>
      </div>
    </div>
    <!-- /Heading and Search field -->

    <!-- Spinner display -->
    <div *ngIf="displaySpinner" class="spinner-wrapper">
      <app-shared-loader></app-shared-loader>
    </div>
    <!-- /Spinner display -->

    <!-- Spinner display is off -->
    <ng-container *ngIf="!displaySpinner">

      <!-- Total number of innovations and filters -->
      <div [ngClass]="{ 'filter-wrapper': showFilterContainer }">

        <!-- result and add filter button -->
        <div class="total-filter-wrapper" [ngClass]="{ 'column col-xs-12 col-11 col-mx-auto': showFilterContainer }">

          <!-- show results title -->
          <h6 *ngIf="!showFilterContainer">{{ totalResults }} {{ 'innovations' }}</h6>
          <h6 *ngIf="showFilterContainer">{{ totalResults }} {{ 'DISCOVER.RESULT' | translate }}</h6>

          <!-- add filter button -->
          <ng-container *ngIf="showFilterContainer === false">
            <button class="btn btn-sm ghost-edit btn-filter" (click)="addFilter($event)"><i class="fas fa-sliders-h"></i>Add Filters</button>
          </ng-container>

          <!-- cancel and apply filter button -->
          <ng-container *ngIf="showFilterContainer === true">
            <div class="filter-action">
              <button class="btn btn-sm ghost-edit btn-cancel" (click)="cancelFilter($event)">Cancel</button>
              <button class="btn btn-sm btn-primary" (click)="applyFilter($event)">Apply Filters</button>
            </div>
          </ng-container>

        </div>
        <!-- /result and add filter button -->

        <!--<div class="filter-applied" [ngClass]="{ 'column col-xs-12 col-11 col-mx-auto': showFilterContainer }"></div>-->

        <!-- add filter button is clicked, showing the container -->
        <div class="column col-xs-12 col-11 col-mx-auto filter-outer" [ngStyle]="{ 'display': showFilterContainer ? 'block' : 'none'}">
          <div class="filter-content">

            <!-- Filter sector -->
            <div class="filter-type">
              <p>Type</p>
              <div class="filter-option">
                <label class="form-checkbox">
                  <input
                    type="checkbox"
                    id="value_chain"
                    value="VALUE_CHAIN"
                    name="type"
                    (change)="toggleFilter($event)"
                    [checked]="filterChecked('value_chain')"
                    [disabled]="checkDisable('value_chain', 'type')">
                  <i class="form-icon"></i><span class="checkbox-label">Value Chain</span>
                </label>
              </div>
              <div class="filter-option">
                <label class="form-checkbox">
                  <input
                    type="checkbox"
                    id="sector"
                    value="SECTOR"
                    name="type"
                    (change)="toggleFilter($event)"
                    [checked]="filterChecked('sector')"
                    [disabled]="checkDisable('sector', 'type')">
                  <i class="form-icon"></i><span class="checkbox-label">Sector</span>
                </label>
              </div>
              <div class="filter-option">
                <label class="form-checkbox">
                  <input
                    type="checkbox"
                    id="solution"
                    value="SOLUTION_TYPE"
                    name="type"
                    (change)="toggleFilter($event)"
                    [checked]="filterChecked('solution')"
                    [disabled]="checkDisable('solution', 'type')">
                  <i class="form-icon"></i><span class="checkbox-label">Solution</span>
                </label>
              </div>
              <div class="filter-option">
                <label class="form-checkbox">
                  <input
                    type="checkbox"
                    id="qualification"
                    value="QUALIFICATION"
                    name="type"
                    (change)="toggleFilter($event)"
                    [checked]="filterChecked('qualification')"
                    [disabled]="checkDisable('qualification', 'type')">
                  <i class="form-icon"></i><span class="checkbox-label">Qualification</span>
                </label>
              </div>
            </div>

            <!-- Language filter -->
            <div class="filter-language">
              <p>Language</p>
              <div class="filter-option">
                <label class="form-checkbox">
                  <input
                    type="checkbox"
                    id="en"
                    value="en"
                    name="language"
                    (change)="toggleFilter($event)"
                    [checked]="filterChecked('en')"
                    [disabled]="checkDisable('en', 'language')">
                  <i class="form-icon"></i><span class="checkbox-label">English</span>
                </label>
              </div>
              <div class="filter-option">
                <label class="form-checkbox">
                  <input
                    type="checkbox"
                    id="fr"
                    value="fr"
                    name="language"
                    (change)="toggleFilter($event)"
                    [checked]="filterChecked('fr')"
                    [disabled]="checkDisable('fr', 'language')">
                  <i class="form-icon"></i><span class="checkbox-label">French</span>
                </label>
              </div>
            </div>

            <!-- Filter status -->
            <div class="filter-status">
              <p>Status</p>
              <div class="filter-option">
                <label class="form-checkbox">
                  <input
                    type="checkbox"
                    id="evaluating"
                    value="EVALUATING"
                    name="status"
                    (change)="toggleFilter($event)"
                    [checked]="filterChecked('evaluating')"
                    [disabled]="checkDisable('evaluating', 'status')">
                  <i class="form-icon"></i><span class="checkbox-label">In progress</span>
                </label>
              </div>
              <div class="filter-option">
                <label class="form-checkbox">
                  <input
                    type="checkbox"
                    id="done"
                    value="DONE"
                    name="status"
                    (change)="toggleFilter($event)"
                    [checked]="filterChecked('done')"
                    [disabled]="checkDisable('done', 'status')">
                  <i class="form-icon"></i><span class="checkbox-label">Completed</span>
                </label>
              </div>
            </div>

            <!-- Filter label -->
            <div class="filter-label">
              <p>Label</p>
              <div class="labels">

              </div>
            </div>

          </div>
        </div>
        <!-- /add filter button is clicked, showing the container -->

      </div>
      <!-- /Total number of innovations and filters -->

      <div *ngIf="addingFilter && showFilterContainer" class="filter-spinner-wrapper"><app-shared-loader></app-shared-loader></div>

      <!-- Overlay to show black background when the filter button is clicked -->
      <div [ngClass]="{ 'filter-wrapper-overlay': showFilterContainer }" (click)="cancelFilter($event)"></div>

      <!-- Innovations -->
      <div class="innovations-wrapper">
        <div *ngFor="let innovation of innovationCards" class="innov-wrapper">
          <div class="innov-content">
            <a [routerLink]="innovation.innovation_reference" [queryParams]="{ lang: innovation.lang }">

              <!-- Image -->
              <div class="innov-img">
                <img [src]="getSrc(innovation)" alt="No media">
              </div>

              <!-- Body part -->
              <div class="innov-body">
                <h1 class="main-heading">{{ innovation.title | DiscoverSummaryPipe:80 }}</h1>
                <p>{{ innovation.summary }}</p>
              </div>

            </a>
          </div>
        </div>
      </div>
      <!-- /Innovations -->

      <!-- Pagination -->
      <div *ngIf="filterApplied.length === 0" class="pagination-wrapper">
        <app-pagination
          [total]="totalResults"
          [propertyName]="'app-discover'"
          [configValue]="paginationValue"
          (configChange)="changePagination($event)">
        </app-pagination>
      </div>
      <!-- /Pagination -->

    </ng-container>
    <!-- Spinner display is off -->

  </div>
</section>
