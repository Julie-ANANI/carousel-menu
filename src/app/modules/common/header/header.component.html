<header class="header" id="header-component">
  <div class="column col-xs-12 col-11 col-mx-auto">
    <nav class="navbar" id="header-navbar">

      <!-- logo -->
      <div class="logo" id="logo">
        <a routerLink="/" class="gtm-menu-logo">
          <img [src]="getLogo()" [alt]="getCompany()" width="110px" height="33px">
        </a>
      </div>
      <!-- /logo -->

      <!-- navigation -->
      <div class="navigation-wrapper" id="navigation">
        <ul class="menu">

          <!-- example page -->
          <ng-container *ngIf="user && user.state === 'confirmed'">
            <li class="menu-item" *ngIf="!backOfficeValue && !isMainDomain()">
              <a [routerLink]="'/sample/synthesis/5bdc16754fee81110e4d509b/8b56a140263e9faf8765207da396a8a0'"
                 routerLinkActive="active" (click)="onClickLink()" class="gtm-menu-sample-synthesis" target="_blank">
                <span>{{ 'HEADER.EXAMPLE' | translate }}</span>
              </a>
            </li>
          </ng-container>

          <!-- client my projects -->
          <ng-container *ngIf="user && user.state === 'confirmed'">
            <li class="menu-item" *ngIf="!backOfficeValue">
              <a [routerLink]="'/user/projects'" routerLinkActive="active" (click)="onClickLink()" class="gtm-menu-my-projects">
                <span>{{ 'HEADER.MY_PROJECTS' | translate }}</span>
              </a>
            </li>
          </ng-container>

          <!-- discover page -->
          <li class="menu-item" *ngIf="!backOfficeValue">
            <a [routerLink]="'/discover'" routerLinkActive="active" (click)="onClickLink()" class="gtm-menu-discover">
              <span>{{ 'HEADER.DISCOVER' | translate }}</span>
            </a>
          </li>

          <!-- client shared reports -->
          <ng-container *ngIf="user && user.state === 'confirmed'">
            <li class="menu-item" *ngIf="!backOfficeValue">
              <a [routerLink]="'/user/synthesis'" routerLinkActive="active" (click)="onClickLink()" class="gtm-menu-my-reports">
                <span>{{ 'HEADER.SHARED_REPORTS' | translate }}</span>
              </a>
            </li>
          </ng-container>

          <!-- admin routes -->
          <ng-container *ngIf="user && user.state === 'confirmed'">
            <ng-container *ngFor="let route of adminRoutes">
              <li class="menu-item" *ngIf="backOfficeValue && canShow(route.adminLevel) && user">
                <a [routerLink]="route.pageLink" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" (click)="onClickLink()">
                  <span>{{ route.pageName }}</span>
                </a>
              </li>
            </ng-container>
          </ng-container>

          <!-- language select dropdown -->
          <li class="menu-item header-lang-dropdown">
            <div class="dropdown" id="header-lang-dropdown">

              <a>
                <span>
                  <img
                    [src]="'https://res.cloudinary.com/umi/image/upload/c_fill,h_11,w_16/app/flags/'+flag+'.png'"
                    [alt]="currentLang.toUpperCase()">
                    <i class="fas fa-angle-down text-background"></i>
                </span>
              </a>

              <!-- dropdown -->
              <ul class="dropdown-menu dropdown-menu-right">

                <li class="drop-item text-center" (click)="setLang('fr')">
                  <img
                    [src]="'https://res.cloudinary.com/umi/image/upload/c_fill,h_11,w_16/app/flags/FR.png'"
                    alt="FR">
                </li>

                <li class="drop-item text-center" (click)="setLang('en')">
                  <img
                    [src]="'https://res.cloudinary.com/umi/image/upload/c_fill,h_11,w_16/app/flags/US.png'"
                    alt="EN">
                </li>

              </ul>

            </div>
          </li>

          <!-- contact us -->
          <li class="menu-item contact-button">
            <a [href]="getContactUrl()" rel="noopener" target="_blank">
              <button type="button" class="btn btn-sm ghost-edit">{{ 'HEADER.CONTACT_US' | translate }}</button>
            </a>
          </li>
          <!-- /contact us -->

          <!-- mobile toggle icon -->
          <li class="mobile-toggle" (click)="toggleMenuState()">
            <i class="fas fa-bars"></i>
            <span>Menu</span>
          </li>
          <!-- /mobile toggle icon -->

          <!-- avatar account and dropdown -->
          <li class="menu-item header-account-dropdown">
            <div class="dropdown" id="header-account-dropdown">

              <ng-container *ngIf="user && user.state === 'unconfirmed'">
                <figure class="avatar avatar-lg avatar-user text-notify">
                  <i class="fas fa-user"></i>
                </figure>
              </ng-container>

              <ng-container *ngIf="user && user.state === 'confirmed'">
                <a [routerLink]="'/user/account'" (click)="onClickLink()" class="gtm-menu-my-account">
                  <figure class="avatar avatar-lg avatar-user text-medium" [attr.data-initial]="!hasProfilePic() ? userInitial : ''">
                    <ng-container *ngIf="hasProfilePic()">
                      <img [src]="profilePicture" class="img-responsive" alt=" ">
                    </ng-container>
                  </figure>
                </a>
              </ng-container>

              <!-- dropdown -->
              <ul class="dropdown-menu dropdown-menu-right">

                <ng-container *ngIf="user && user.state === 'confirmed'">

                  <li class="drop-item drop-item-user">
                    <a [routerLink]="'/user/account'" (click)="onClickLink()" class="gtm-menu-my-account drop-item-user">

                      <figure class="avatar avatar-lg avatar-user text-medium c-hand" [attr.data-initial]="!hasProfilePic() ? userInitial : ''">
                        <ng-container *ngIf="hasProfilePic()">
                          <img [src]="profilePicture" class="img-responsive" alt=" ">
                        </ng-container>
                      </figure>

                      <span class="d-flex">
                      <span class="text-medium text-ellipsis">{{ user.name }}</span>
                      <span class="text-email text-ellipsis">{{ user.email }}</span>
                    </span>

                    </a>
                  </li>

                  <!-- admin side -->
                  <li class="drop-item" *ngIf="!backOfficeValue && canShow(1)">
                    <a
                      [routerLink]="'/user/admin'"
                      routerLinkActive="active"
                      (click)="toggleBackOfficeState(); onClickLink();"
                      class="text-background">
                      Admin Side
                    </a>
                  </li>

                  <!-- client side -->
                  <li class="drop-item" *ngIf="backOfficeValue && canShow(1)">
                    <a
                      routerLinkActive="active"
                      [routerLink]="'/user/projects'"
                      (click)="toggleBackOfficeState(); onClickLink();"
                      class="text-background">
                      Client Side
                    </a>
                  </li>

                  <!-- account page -->
                  <li class="drop-item">
                    <a
                      [routerLink]="'/user/account'"
                      routerLinkActive="active"
                      (click)="onClickLink()"
                      class="gtm-menu-my-account text-background">
                      {{ 'HEADER.MY_ACCOUNT' | translate }}
                    </a>
                  </li>

                  <li class="divider"></li>

                </ng-container>

                <!-- log out -->
                <li class="drop-item">
                  <a [routerLink]="'/logout'" (click)="onClickLink()" class="text-background">
                    {{ 'HEADER.LOG_OUT' | translate }}
                  </a>
                </li>

              </ul>
              <!-- dropdown -->

            </div>
          </li>
          <!-- /avatar account and dropdown  -->

        </ul>
      </div>
      <!-- /navigation -->

    </nav>
  </div>
</header>


<!-- sidebar for mobile device -->
<div class="sidebar-backdrop" [@animateSidebarBackdrop]="sidebarValues.animate_state" id="header-sidebar" (click)="closeSidebar()"></div>

<div class="sidebar" [@animateSidebar]="sidebarValues.animate_state">
  <div class="sidebar-container">
    <nav class="sidebar-navbar">
      <div class="sidebar-navigation-wrapper" id="sidebar-navigation">
        <ul class="menu">

          <!-- account and pic -->
          <ng-container *ngIf="user && user.state === 'confirmed'">
            <li class="sidebar-menu-item sidebar-item-user">
              <a [routerLink]="'/user/account'" (click)="onClickLink()" class="gtm-menu-my-account">

                <figure class="avatar avatar-lg avatar-user text-medium c-hand" [attr.data-initial]="!hasProfilePic() ? userInitial : ''">
                  <ng-container *ngIf="hasProfilePic()">
                    <img [src]="profilePicture" class="img-responsive" alt=" ">
                  </ng-container>
                </figure>

                <span class="d-flex">
              <span class="text-medium text-ellipsis">{{ user.name }}</span>
              <span class="text-email text-ellipsis text-normal">{{ user.email }}</span>
            </span>

              </a>
            </li>
          </ng-container>

          <!-- example page -->
          <ng-container *ngIf="user && user.state === 'confirmed'">
            <li class="sidebar-menu-item" *ngIf="!backOfficeValue && !isMainDomain()">
              <a [routerLink]="'/sample/synthesis/5bdc16754fee81110e4d509b/8b56a140263e9faf8765207da396a8a0'"
                 routerLinkActive="active" (click)="onClickLink()" class="gtm-menu-sample-synthesis" target="_blank">
                <span>{{ 'HEADER.EXAMPLE' | translate }}</span>
              </a>
            </li>
          </ng-container>

          <!-- client my projects -->
          <ng-container *ngIf="user && user.state === 'confirmed'">
            <li class="sidebar-menu-item" *ngIf="!backOfficeValue">
              <a [routerLink]="'/user/projects'" routerLinkActive="active" (click)="onClickLink()" class="gtm-menu-my-projects">
                <span>{{ 'HEADER.MY_PROJECTS' | translate }}</span>
              </a>
            </li>
          </ng-container>

          <!-- discover page -->
          <li class="sidebar-menu-item" *ngIf="!backOfficeValue">
            <a [routerLink]="'/discover'" routerLinkActive="active" (click)="onClickLink()" class="gtm-menu-discover">
              <span>{{ 'HEADER.DISCOVER' | translate }}</span>
            </a>
          </li>

          <ng-container *ngIf="user && user.state === 'confirmed'">

            <!-- client shared reports -->
            <li class="sidebar-menu-item" *ngIf="!backOfficeValue">
              <a [routerLink]="'/user/synthesis'" routerLinkActive="active" (click)="onClickLink()" class="gtm-menu-my-reports">
                <span>{{ 'HEADER.SHARED_REPORTS' | translate }}</span>
              </a>
            </li>

            <!-- admin routes -->
            <ng-container *ngFor="let route of adminRoutes">
              <li class="sidebar-menu-item" *ngIf="backOfficeValue && canShow(route.adminLevel)">
                <a [routerLink]="route.pageLink" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" (click)="onClickLink()">
                  <span>{{ route.pageName }}</span>
                </a>
              </li>
            </ng-container>

            <!-- account page -->
            <li class="sidebar-menu-item">
              <a
                [routerLink]="'/user/account'"
                routerLinkActive="active"
                (click)="onClickLink()"
                class="gtm-menu-my-account text-background">
                {{ 'HEADER.MY_ACCOUNT' | translate }}
              </a>
            </li>

            <!-- admin side -->
            <li class="sidebar-menu-item" *ngIf="!backOfficeValue && canShow(1)">
              <a
                [routerLink]="'/user/admin'"
                routerLinkActive="active"
                (click)="toggleBackOfficeState(); onClickLink();"
                class="text-background">
                Admin Side
              </a>
            </li>

            <!-- client side -->
            <li class="sidebar-menu-item" *ngIf="backOfficeValue && canShow(1)">
              <a
                routerLinkActive="active"
                [routerLink]="'/user/projects'"
                (click)="toggleBackOfficeState(); onClickLink();"
                class="text-background">
                Client Side
              </a>
            </li>

          </ng-container>

          <!-- contact us -->
          <li class="sidebar-menu-item">
            <a [href]="getContactUrl()" rel="noopener" target="_blank">
              {{ 'HEADER.CONTACT_US' | translate }}
            </a>
          </li>

          <!-- log out -->
          <li class="sidebar-menu-item">
            <a [routerLink]="'/logout'" (click)="onClickLink()" class="text-background">
              {{ 'HEADER.LOG_OUT' | translate }}
            </a>
          </li>

        </ul>
      </div>
    </nav>
  </div>
</div>
<!-- /sidebar for mobile device -->
