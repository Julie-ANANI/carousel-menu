<div id="input-list">
  <form #f="ngForm" (ngSubmit)="f.form.valid && addProposition(answer); (answer = undefined)" novalidate>

    <!-- input area -->
    <div *ngIf="isAddable" class="input-wrapper">

      <label class="m-right-2">
        <input
          [(ngModel)]="answer"
          [attr.placeholder]="placeholder | translate"
          [disabled]="!isEditable"
          [ngClass]="{'is-sm': isSmall}"
          autocomplete="off"
          class="form-input is-shadowed"
          name="answers"
          required
          type="text">
      </label>
      <button
        [disabled]="answer==='' || !isEditable"
        [ngClass]="{'is-xs': isSmall, 'is-sm': !isSmall}"
        class="button is-circled is-primary"
        type="submit">
        <i class="icon icon-plus"></i>
      </button>

    </div>
    <!-- /input area -->

    <!-- answers area -->
    <ul class="answers-wrapper">
      <li *ngFor="let answer of answerList; let i = index">

        <!-- text -->
        <div class="answer-wrapper text-sm text-dark m-right-2">
          <span (click)="clickItem.emit(answer)"
                *ngIf="!isClickable && !(enableUpdate && i === indexNumber)">{{ answer.text || answer.name || answer.label || answer.expression}}</span>
          <a class="c-hand" *ngIf="isClickable && !(enableUpdate && i === indexNumber)"
             (click)="clickItem.emit(answer)">{{ answer.text || answer.name || answer.label || answer.expression}}</a>
          <label *ngIf="enableUpdate && i === indexNumber">
            <input
              #updateAnswer
              (keyup.enter)="updateProposition($event, i, updateAnswer.value)"
              [name]="'text' + [i]"
              [ngModel]="answerList[i].text || answerList[i].name || answerList[i].label || answerList[i].expression"
              autocomplete="off"
              class="form-input is-sm"
              type="text">
          </label>
        </div>
        <!-- /text -->

        <!-- icons -->
        <div class="icons-wrapper">

          <!-- edit icon -->
          <div
            (click)="onClickEdit($event, i)"
            *ngIf="isEditable || isAdminMode"
            [ngClass]="{ 'disabled': !isEditable }"
            class="icon-container is-overlay">
            <span
              [attr.data-tooltip]="(!(enableUpdate && i === indexNumber)
              ? 'COMMON.TOOLTIP.EDIT' : 'COMMON.TOOLTIP.READONLY') | translate"
              class="tooltip">
              <i class="fas fa-pencil-alt text-meta"></i>
            </span>
          </div>
          <!-- /edit icon -->

          <!-- if admin mode -->
          <div *ngIf="isAdminMode" class="d-flex">

            <!-- thumbs-up icon -->
            <div
              (click)="thumbsUp($event, i)"
              [ngClass]="{ 'disabled': !isEditable }"
              class="icon-container is-overlay">
              <i [ngClass]="{ 'active': answer.rating === 2, 'c-hand': isEditable }" class="fas fa-thumbs-up"></i>
            </div>
            <!-- /thumbs-up icon -->

            <!-- thumbs-down icon -->
            <div
              (click)="thumbsDown($event, i)"
              [ngClass]="{ 'disabled': !isEditable }"
              class="icon-container is-overlay">
              <i [ngClass]="{ 'active': answer.rating === 0, 'c-hand': isEditable }" class="fas fa-thumbs-down"></i>
            </div>
            <!-- /thumbs-down icon -->

          </div>
          <!-- /if admin mode -->

          <!-- delete icon -->
          <div
            (click)="modalConfirmRemove(i)"
            *ngIf="isEditable || isAdminMode"
            [ngClass]="{ 'disabled': !isEditable }"
            class="icon-container m-no-right is-overlay">
            <span [attr.data-tooltip]="'COMMON.TOOLTIP.DELETE' | translate" class="tooltip">
              <i class="icon icon-delete text-alert"></i>
            </span>
          </div>
          <!-- /delete icon -->

        </div>
        <!-- /icons -->

      </li>
    </ul>
    <!-- answers area -->

  </form>
</div>


<!-- modal -->
<umius-modal [(showModal)]="isModalDelete" [title]="'COMMON.MODAL.TITLE_DELETE'">

  <section class="modal-body">
    <div class="text-draft text-medium">{{ 'COMMON.MODAL.ARE_YOU_SURE' | translate }}</div>
  </section>

  <footer class="modal-footer">
    <button class="button modal-cancel">{{ 'COMMON.BUTTON.CANCEL' | translate }}</button>
    <button (click)="removeProposition()" class="button is-primary">{{ 'COMMON.BUTTON.CONFIRM' | translate }}</button>
  </footer>

</umius-modal>
<!-- /modal -->
