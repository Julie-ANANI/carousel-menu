<div *ngIf="fullAnswer.answers && (fullAnswer.answers[question.identifier] || fullAnswer.answers[question.identifier+'Comment'] || editMode)">

  <p class="ques-label">{{ question.label | multiling:lang }}</p>

 <div [ngSwitch]="question.controlType" class="answer">

   <!-- Radio case -->
    <ng-container *ngSwitchCase="'radio'">

      <div class="response-wrapper">

        <div class="pd-top">

          <ng-container *ngIf="!editMode">
            {{ optionLabel(fullAnswer.answers[question.identifier]) }}
          </ng-container>

          <ng-container *ngIf="editMode">
          <span
            *ngFor="let option of question.options"
            class="c-hand gaping"
            [ngClass]="{'inactive': option.identifier !== fullAnswer.answers[question.identifier]}"
            (click)="selectOption($event, option)">
            {{ optionLabel(option.identifier) }}
          </span>
          </ng-container>

        </div>

        <div *ngIf="editMode" class="pd-top">
          <app-shared-rating-item
            [editMode]="editMode"
            [prop]="question.identifier"
            [rating]="fullAnswer.answers[question.identifier + 'Quality']"
            (ratingChange)="updateQuality($event)">
          </app-shared-rating-item >
        </div>

      </div>

    </ng-container>

   <!-- List case -->
   <ng-container *ngSwitchCase="'list'">

     <div *ngIf="!editMode" class="list">
       <span class="chip" [ngClass]="{'topItem': item.rating === 2, 'badItem': item.rating === 0}" *ngFor="let item of fullAnswer.answers[question.identifier]">
         {{item.text}}
         <a *ngIf="item.link" [href]=item.link target="_blank"><i class="fas fa-link" aria-hidden="true"></i></a>
       </span>
     </div>

     <div *ngIf="editMode" class="pd-top" [ngStyle]="{ 'padding-bottom': '10px' }">
       <app-input-list
         *ngIf="editMode"
         (update)="setAnswer($event)"
         [canEdit]="true"
         [config]="{ placeholder: '', initialData: fullAnswer.answers[question.identifier] || [] }"
         [adminMode]="editMode">
       </app-input-list>
     </div>

   </ng-container>

   <!-- Clearbit case -->
   <!--<ng-container *ngSwitchCase="'clearbit'">

    <div *ngIf="!editMode" class="list">
      <span class="chip" [ngClass]="{'topItem': item.rating === 2, 'badItem': item.rating === 0}" *ngFor="let item of fullAnswer.answers[question.identifier]">
        <img *ngIf="item.logo" [src]=item.logo width="20px" height="20px"/>
        {{item.name}}
        <a *ngIf="item.domain" [href]=link(item.domain) target="_blank"><i class="fas fa-link" aria-hidden="true"></i></a>
      </span>
    </div>

     <app-autocomplete-input
      *ngIf="editMode"
      (update)="setAnswer($event)"
      [canEdit]="true"
      [config]="{placeholder: 'company', initialData: fullAnswer.answers[question.identifier] || [], type: 'company'}"
      [adminMode]="editMode">
    </app-autocomplete-input>

   </ng-container>


   <ng-container *ngSwitchCase="'checkbox'">
     <ul *ngFor="let option of question.options">
       <li
         *ngIf="(fullAnswer.answers[question.identifier] && fullAnswer.answers[question.identifier][option.identifier] === true) || editMode"
         [ngClass]="{'inactive': !fullAnswer.answers[question.identifier] || fullAnswer.answers[question.identifier][option.identifier] != true,
                     'c-hand': editMode}">
         <span (click)="checkOption(option.identifier, $event)">
           {{optionLabel(option.identifier)}}
         </span>
         <app-shared-rating-item *ngIf="fullAnswer.answers[question.identifier] && fullAnswer.answers[question.identifier][option.identifier] == true"
                          [editMode]="editMode" [prop]="question.identifier"
                          [rating]="fullAnswer.answers[question.identifier + 'Quality']"
                          (ratingChange)="updateQuality($event)"></app-shared-rating-item>
       </li>
     </ul>
   </ng-container>

   <ng-container *ngSwitchCase="'textbox'">
     <app-shared-tag-item
       [tags]="fullAnswer.answerTags[question.identifier]"
       [editMode]="editMode"
       [projectId]="innoid"
       (addTag)="addTag($event, question.identifier)"
       (removeTag)="removeTag($event, question.identifier)">
     </app-shared-tag-item>
     <p>
       {{fullAnswer.answers[question.identifier]}}
       <app-shared-rating-item [editMode]="editMode" [prop]="question.identifier"
                        [rating]="fullAnswer.answers[question.identifier + 'Quality']"
                        (ratingChange)="updateQuality($event)"></app-shared-rating-item>
     </p>
   </ng-container>

   <ng-container *ngSwitchCase="'textarea'">
     <app-shared-tag-item
       [tags]="fullAnswer.answerTags[question.identifier]"
       [editMode]="editMode"
       [projectId]="innoid"
       (addTag)="addTag($event, question.identifier)"
       (removeTag)="removeTag($event, question.identifier)">
     </app-shared-tag-item>
     <blockquote *ngIf="fullAnswer.answers[question.identifier] && !editMode">
       <p>
         {{fullAnswer.answers[question.identifier]}}
         <app-shared-rating-item  [editMode]="editMode" [prop]="question.identifier" [rating]="fullAnswer.answers[question.identifier + 'Quality']"
                          (ratingChange)="updateQuality($event)"></app-shared-rating-item >
       </p>
     </blockquote>
     <form *ngIf="editMode">
       <textarea class="form-input" [(ngModel)]="fullAnswer.answers[question.identifier]" name="comment"></textarea>
       <app-shared-rating-item  [editMode]="editMode" [prop]="question.identifier" [rating]="fullAnswer.answers[question.identifier + 'Quality']"
                        (ratingChange)="updateQuality($event)"></app-shared-rating-item >
     </form>
   </ng-container>

   <ng-container *ngSwitchCase="'scale'">
     <p>
       {{fullAnswer.answers[question.identifier]}}
     </p>
   </ng-container>

   <ng-container *ngSwitchCase="'stars'">
     <ul *ngIf="fullAnswer.answers[question.identifier]">
       <li *ngFor="let advantage of question.options">
         {{advantage.label | multiling:lang}}: {{ 'â˜…'.repeat(fullAnswer.answers[question.identifier][advantage.identifier]) }}
       </li>
     </ul>
   </ng-container>

   <ng-container *ngSwitchCase="'toggle'">
     <label class="form-switch">
       <input type="checkbox" name="toggle-input" [(ngModel)]="fullAnswer.answers[question.identifier]"
              [ngModelOptions]="{standalone: true}" [disabled]="!editMode">
       <i class="form-icon" [ngClass]="{'active': fullAnswer.answers[question.identifier]}"></i>
     </label>
   </ng-container>

   <ng-container *ngSwitchDefault>
     <p class="noanswer">-</p>
   </ng-container>-->

  </div>

  <!-- Comment part -->
  <ng-container [ngSwitch]="editMode">

    <!-- Case false -->
    <ng-container *ngSwitchCase="false">
      <p class="comment-text">{{ 'COMMON.COMMENT' | translate }}</p>
      <p class="comment-answer">{{fullAnswer.answers[question.identifier + 'Comment']}}</p>
    </ng-container>

    <!-- Case true -->
    <ng-container *ngSwitchCase="true">
      <p *ngIf="!commenting" class="comment-text c-hand" (click)="addComment($event)">{{ 'COMMON.COMMENT' | translate }}</p>

      <form *ngIf="commenting" [ngStyle]="{ 'width': '100%' }">
        <p class="comment-text">{{ 'COMMON.COMMENT' | translate }}</p>

        <div class="comment-wrapper">
          <textarea
            class="form-default"
            name="comment"
            rows="4"
            [(ngModel)]="fullAnswer.answers[question.identifier + 'Comment']">
          </textarea>
          <div class="pd-top">
            <app-shared-rating-item
              [editMode]="editMode"
              [prop]="question.identifier + 'Comment'"
              [rating]="fullAnswer.answers[question.identifier + 'CommentQuality']"
              (ratingChange)="updateQuality($event)">
            </app-shared-rating-item >
          </div>
          <!--<i class="fas fa-trash" (click)="deleteComment($event)"></i>-->
        </div>

      </form>

    </ng-container>

  </ng-container>

</div>
