<div id="shared-tags">


  <!-- input field -->
  <form (ngSubmit)="onSubmit()" *ngIf="editMode" [formGroup]="tagForm">
    <div class="form-group flex-between">


      <label class="d-block w-full relative">
        <input
          (keyup)="addNewTags($event)"
          (valueChanged)="addTagSelected($event)"
          [attr.placeholder]="placeholder | translate"
          [list-formatter]="autocompleListFormatter"
          [ngClass]="{'is-sm': isSmall}"
          [source]="tagSuggestions.bind(this)"
          [value-formatter]="autocompleValueFormatter"
          auto-complete
          class="form-input is-shadowed"
          formControlName="tag">
      </label>

      <div>
        <button
          [disabled]="!canAdd"
          [ngClass]="{'tooltip': canAdd, 'is-xs': isSmall, 'is-sm': !isSmall}"
          class="button is-circled"
          data-tooltip="Add tag">
          <i class="icon icon-plus"></i>
        </button>
      </div>

    </div>
  </form>
  <!-- /input field -->

  <!-- displaying tags -->
  <!--IT's for EDIT TAGS-->
  <div *ngIf="tags.length" style="margin: -4px" class="flex-wrap-wrap d-flex p-top-10">
    <ng-container *ngFor="let tag of tags">
      <ng-container *ngIf="tag.entry && tag.entry.length; else noTagsEntry">
        <div
          [title]="tag.entry | langEntry:'description':currentLang:true"
          class="label is-draft is-rounded">
          <i class="fas fa-tag icon-left"></i>
          {{ tag.entry | langEntry:'label':currentLang:true }}
          <i (click)="onRemoveTag(tag)" *ngIf="editMode" class="icon icon-cross icon-right c-hand"></i>
        </div>
      </ng-container>
      <ng-template #noTagsEntry class="d-none">
        <div
          [title]="tag | langEntry:'description':currentLang:true"
          class="label is-draft is-rounded">
          <i class="fas fa-tag icon-left"></i>
          {{ tag | langEntry:'label':currentLang:true }}
          <i (click)="onRemoveTag(tag)" *ngIf="editMode" class="icon icon-cross icon-right c-hand"></i>
        </div>
      </ng-template>
    </ng-container>
  </div>
  <!-- /displaying tags -->

</div>


<!-- modal to create new tag -->
<umius-modal *ngIf="editMode" [(showModal)]="showModal" [title]="'Creation Board'">

  <section class="modal-body">
    Do you really want to create a new tag?
    <p class="form-label m-top-15">Tag Name</p>
    <p class="text-sm m-no-bottom">{{ tagForm.get('tag').value }}</p>
  </section>

  <footer class="modal-footer">
    <button class="button modal-cancel" type="button" (click)="closeCreatModal()">Cancel</button>
    <button (click)="createNewTag()" class="button is-primary" type="button">Confirm</button>
  </footer>

</umius-modal>
<!-- /modal to create new tag -->
