<ng-container *ngIf="innovationSettings">
  <section id="shared-project-settings-component" class="animate-page">

    <!-- geography section -->
    <div>
      <span class="shape rect">1</span>
      <span class="text text-question">{{ 'PROJECT_MODULE.SETUP.TARGETING.GEOGRAPHY.LABEL' | translate }}</span>
      <div class="pd-input">
        <app-worldmap
          (updateContinent)="continentModificationDrain($event)"
          [initialConfiguration]="continentTarget"
          [isEditable]="canEdit"
          [width]="'auto'">
        </app-worldmap>
      </div>
    </div>
    <!-- /geography section -->

    <!-- Two columns -->
    <div class="columns">

      <!-- question section -->
      <div class="column col-md-12 col-mx-auto" [ngClass]="adminSide ? 'col-12' : 'col-8'">
        <div class="restrict-container">

          <!-- Exclude countries -->
          <ng-container *ngIf="!canEdit && innovationSettings.geography.exclude.length > 0">
            <div class="pd-para">
              <span class="text">
                {{ 'PROJECT_MODULE.SETUP.TARGETING.GEOGRAPHY.SPECIFY_COUNTRIES_TO_EXCLUDE' | translate }}
              </span>
              <div class="pd-input">
                <div *ngFor="let country of innovationSettings.geography.exclude" class="label label-answer">
                  {{ country.name }}
                </div>
              </div>
            </div>
          </ng-container>

          <ng-container *ngIf="canEdit">
            <div class="pd-para">
              <span class="text">
                {{ 'PROJECT_MODULE.SETUP.TARGETING.GEOGRAPHY.SPECIFY_COUNTRIES_TO_EXCLUDE' | translate }}
              </span>
              <div class="pd-input">
                <app-autocomplete-input (update)="addCountryToExclude($event)" [config]="getConfig('countries')"></app-autocomplete-input>
              </div>
            </div>
          </ng-container>
          <!-- /Exclude countries -->

          <!-- Comment countries -->
          <ng-container *ngIf="!canEdit && !!innovationSettings.geography.comments">
            <p class="pd-top">
              <span class="text text-secondary">
                {{ 'PROJECT_MODULE.SETUP.TARGETING.GEOGRAPHY.COMMENT' | translate }}
              </span>
            </p>
            <div class="pd-input"><p class="text default">{{ innovationSettings.geography.comments }}</p></div>
          </ng-container>

          <ng-container *ngIf="canEdit">

            <p class="pd-para">
              <span class="text-link" (click)="(displayCountriesCommentSection = !displayCountriesCommentSection) && $event.preventDefault()">
                {{ 'PROJECT_MODULE.SETUP.TARGETING.GEOGRAPHY.COMMENT' | translate }}
                <i
                  class="fas"
                  [ngClass]="{ 'fa-angle-down' : displayCountriesCommentSection, 'fa-angle-right' : !displayCountriesCommentSection  }"></i>
              </span>
            </p>

            <div *ngIf="displayCountriesCommentSection" class="pd-input">
              <label for="countries-comments"></label>
              <textarea
                class="form-input"
                id="countries-comments"
                [attr.placeholder]="'PROJECT_MODULE.SETUP.TARGETING.GEOGRAPHY.SPECIFIC_REQUEST_PLACEHOLDER' | translate"
                rows="5"
                [(ngModel)]="innovationSettings.geography.comments"
                (change)="updateSettings()">
              </textarea>
              <div class="char-remaining">
                <span [ngStyle]="{'color': getColor(innovationSettings.geography.comments.length | characterCountdown:500)}">
                  {{ innovationSettings.geography.comments.length | characterCountdown:500 }}
                </span>
              </div>
            </div>

          </ng-container>
          <!-- /Comment countries -->

          <!-- Activity sectors -->
          <div class="pd-ques">

            <span class="shape rect">2</span>
            <span class="text text-question">{{ 'PROJECT_MODULE.SETUP.TARGETING.MARKET.LABEL' | translate }}</span>

            <ng-container *ngIf="!canEdit">
              <div class="pd-input">
                <p class="text default">{{ innovationSettings.market.comments }}</p>
              </div>
            </ng-container>

            <ng-container *ngIf="canEdit">
              <div class="pd-input">
                <label for="innovation-sector"></label>
                <textarea
                  class="form-input"
                  id="innovation-sector"
                  [attr.placeholder]="'PROJECT_MODULE.SETUP.TARGETING.MARKET.PLACEHOLDER' | translate"
                  rows="5"
                  #market="ngModel"
                  [(ngModel)]="innovationSettings.market.comments"
                  (change)="updateSettings()">
                </textarea>
                <div class="char-remaining">
                  <span [ngStyle]="{'color': getColor(innovationSettings.market.comments.length | characterCountdown:500)}">
                    {{ innovationSettings.market.comments.length | characterCountdown:500 }}
                  </span>
                </div>
              </div>
            </ng-container>

          </div>
          <!-- /Activity sectors -->

          <!-- Type of enterprises -->
          <div class="pd-ques">

            <span class="shape rect">3</span>
            <span class="text text-question">{{ 'PROJECT_MODULE.SETUP.TARGETING.COMPANIES.LABEL' | translate }}</span>

            <ng-container *ngIf="!canEdit && innovationSettings.companies.include.length === 0 && innovationSettings.companies.exclude.length === 0
            && !innovationSettings.companies.description">
              <div class="pd-para">
                <p class="text">{{ 'PROJECT_MODULE.SETUP.TARGETING.NOT_ANSWER' | translate }}</p>
              </div>
            </ng-container>

            <!-- Companies include -->
            <ng-container *ngIf="!canEdit && innovationSettings.companies.include.length > 0">
              <div class="pd-para">
                <span class="text">
                  {{ 'PROJECT_MODULE.SETUP.TARGETING.COMPANIES.TO_INCLUDE' | translate }}
                </span>
                <div class="pd-input">
                  <div *ngFor="let companyInclude of innovationSettings.companies.include" class="label label-answer">
                    {{ companyInclude.name }}
                  </div>
                </div>
              </div>
            </ng-container>

            <ng-container *ngIf="canEdit">
              <div class="pd-para">
                <span class="text">
                  {{ 'PROJECT_MODULE.SETUP.TARGETING.COMPANIES.TO_INCLUDE' | translate }}
                </span>
                <div class="pd-input">
                  <app-autocomplete-input (update)="addCompanyToInclude($event)" [config]="getConfig('includedCompanies')"></app-autocomplete-input>
                </div>
              </div>
            </ng-container>
            <!-- /Companies include -->

            <!-- Companies exclude -->
            <ng-container *ngIf="!canEdit && innovationSettings.companies.exclude.length > 0">
              <div class="pd-para">
                <span class="text">
                  {{ 'PROJECT_MODULE.SETUP.TARGETING.COMPANIES.TO_EXCLUDE' | translate }}
                </span>
                <div class="pd-input">
                  <div *ngFor="let companyExclude of innovationSettings.companies.exclude" class="label label-answer">
                    {{  companyExclude.name }}
                  </div>
                </div>
              </div>
            </ng-container>

            <ng-container *ngIf="canEdit">
              <div class="pd-para">
                <span class="text">
                  {{ 'PROJECT_MODULE.SETUP.TARGETING.COMPANIES.TO_EXCLUDE' | translate }}
                </span>
                <div class="pd-input">
                  <app-autocomplete-input (update)="addCompanyToExclude($event)" [config]="getConfig('excludedCompanies')"></app-autocomplete-input>
                </div>
              </div>
            </ng-container>
            <!-- /Companies exclude -->

            <!-- Companies comment -->
            <ng-container *ngIf="!canEdit && !!innovationSettings.companies.description">
              <p class="pd-top">
                <span class="text text-secondary">{{ 'PROJECT_MODULE.SETUP.TARGETING.COMPANIES.COMMENT' | translate }}</span>
              </p>
              <div *ngIf="!canEdit && innovationSettings.companies.description" class="pd-input">
                <p class="text">{{ innovationSettings.companies.description }}</p>
              </div>
            </ng-container>

            <ng-container *ngIf="canEdit">

              <p class="pd-para">
                <span class="text-link" (click)="(displayCompanyCommentSection = !displayCompanyCommentSection) && $event.preventDefault()">
                  {{ 'PROJECT_MODULE.SETUP.TARGETING.COMPANIES.COMMENT' | translate }}
                  <i
                    class="fas"
                    [ngClass]="{ 'fa-angle-down' : displayCompanyCommentSection, 'fa-angle-right' : !displayCompanyCommentSection  }">
                  </i>
                </span>
              </p>

              <div *ngIf="displayCompanyCommentSection" class="pd-input">
                <label for="innovation-companies"></label>
                <textarea
                  class="form-input"
                  id="innovation-companies"
                  [attr.placeholder]="'PROJECT_MODULE.SETUP.TARGETING.COMPANIES.PLACEHOLDER' | translate"
                  rows="5"
                  [(ngModel)]="innovationSettings.companies.description"
                  (change)="updateSettings()">
                </textarea>
                <div class="char-remaining">
                  <span [ngStyle]="{'color': getColor(innovationSettings.companies.description.length | characterCountdown:500)}">
                    {{ innovationSettings.companies.description.length | characterCountdown:500 }}
                  </span>
                </div>
              </div>

            </ng-container>
            <!-- /Companies comment -->

          </div>
          <!-- /Type of enterprises -->

          <!-- Professional profiles -->
          <div class="pd-ques">

            <span class="shape rect">4</span>
            <span class="text text-question">{{ 'PROJECT_MODULE.SETUP.TARGETING.PROFESSIONALS.LABEL' | translate }}</span>

            <ng-container *ngIf="!canEdit && innovationSettings.professionals.exclude.length === 0 && !innovationSettings.professionals.description">
              <div class="pd-para">
                <p class="text">{{ 'PROJECT_MODULE.SETUP.TARGETING.NOT_ANSWER' | translate }}</p>
              </div>
            </ng-container>

            <!-- Description -->
            <ng-container *ngIf="!canEdit && !!innovationSettings.professionals.description">
              <div class="pd-input">
                <p class="text">{{ innovationSettings.professionals.description }}</p>
              </div>
            </ng-container>

            <ng-container *ngIf="canEdit">
              <div class="pd-input">
                <label for="innovation-pros"></label>
                <textarea
                  class="form-input"
                  id="innovation-pros"
                  [attr.placeholder]="'PROJECT_MODULE.SETUP.TARGETING.PROFESSIONALS.PLACEHOLDER' | translate"
                  rows="5"
                  [(ngModel)]="innovationSettings.professionals.description"
                  (change)="updateSettings()">
                </textarea>
                <div class="char-remaining">
                  <span [ngStyle]="{'color': getColor(innovationSettings.professionals.description.length | characterCountdown:500)}">
                    {{ innovationSettings.professionals.description.length | characterCountdown:500 }}
                  </span>
                </div>
              </div>
            </ng-container>
            <!-- /Description -->

            <!-- Exclude professional -->
            <ng-container *ngIf="!canEdit && innovationSettings.professionals.exclude.length > 0">
              <p class="pd-para">
                <span class="text text-secondary">{{ 'PROJECT_MODULE.SETUP.TARGETING.PROFESSIONALS.TO_EXCLUDE' | translate }}</span>
              </p>
              <div class="pd-input">
                <div *ngFor="let professionalExclude of innovationSettings.professionals.exclude" class="label label-answer">
                  {{ professionalExclude.text }}
                </div>
              </div>
            </ng-container>

            <ng-container *ngIf="canEdit">

              <p class="pd-para">
                <span class="text-link" (click)="(displayPersonsToExcludeSection = !displayPersonsToExcludeSection) && $event.preventDefault()">
                  {{'PROJECT_MODULE.SETUP.TARGETING.PROFESSIONALS.TO_EXCLUDE' | translate }}
                  <i
                    class="fas"
                    [ngClass]="{ 'fa-angle-down' : displayPersonsToExcludeSection, 'fa-angle-right' : !displayPersonsToExcludeSection  }">
                  </i>
                </span>
              </p>

              <ng-container *ngIf="displayPersonsToExcludeSection">
                <div class="pd-input">
                  <app-input-list (update)="addPeopleToExclude($event)" [config]="getConfig('excludedPeople')"></app-input-list>
                </div>
              </ng-container>

            </ng-container>
            <!-- /Exclude professional -->

          </div>
          <!-- /Professional profiles -->

          <!-- Keyword and other stuffs -->
          <div [ngStyle]="{ 'padding-top': innovationSettings.professionals.exclude.length === 0 && canEdit ? '40px' : '25px' }">

            <span class="shape rect">5</span>
            <span class="text text-question">{{ 'PROJECT_MODULE.SETUP.TARGETING.OTHER.LABEL' | translate }}</span>

            <ng-container *ngIf="!canEdit">
              <div class="pd-input">
                <p class="text" *ngIf="!innovationSettings.comments">{{ 'PROJECT_MODULE.SETUP.TARGETING.NOT_ANSWER' | translate }}</p>
                <p class="text" *ngIf="innovationSettings.comments">{{ innovationSettings.comments }}</p>
              </div>
            </ng-container>

            <ng-container *ngIf="canEdit">
              <div class="pd-input">
                <label for="other-comments"></label>
                <textarea
                  class="form-input"
                  id="other-comments"
                  [attr.placeholder]="'PROJECT_MODULE.SETUP.TARGETING.OTHER.PLACEHOLDER' | translate"
                  rows="5"
                  [(ngModel)]="innovationSettings.comments"
                  (change)="updateSettings()">
                </textarea>
                <div class="char-remaining">
                  <span [ngStyle]="{'color': getColor(innovationSettings.comments.length | characterCountdown:500)}">
                    {{ innovationSettings.comments.length | characterCountdown:500 }}
                  </span>
                </div>
              </div>
            </ng-container>

            <ng-container *ngIf="adminMode">

              <p class="pd-para">
                <span class="text-link" (click)="(displayKeywordsSection = !displayKeywordsSection) && $event.preventDefault()">
                  {{ 'PROJECT_MODULE.SETUP.TARGETING.KEYWORDS.LABEL' | translate }}
                  <i
                    class="fas"
                    [ngClass]="{ 'fa-angle-down' : displayKeywordsSection, 'fa-angle-right' : !displayKeywordsSection  }">
                  </i>
                </span>
              </p>

              <ng-container *ngIf="displayKeywordsSection">
                <div class="pd-input">
                  <app-input-list
                    (update)="addKeywordToExclude($event)"
                    [canEdit]="true"
                    id="keywords"
                    [config]="getConfig('keywords')">
                  </app-input-list>
                </div>
              </ng-container>

            </ng-container>
          </div>
          <!-- /Keyword and other stuffs -->

        </div>
      </div>
      <!-- /question section -->

      <!-- bot section -->
      <div *ngIf="!adminSide" class="column col-mx-auto col-4 hide-md">
        <app-message-space [widthMax]="'321px'">
          {{ 'PROJECT_MODULE.SETUP.PITCH.BOT.HELP' | translate }}
        </app-message-space>
      </div>
      <!-- /bot section -->

    </div>
    <!-- /Two columns -->

  </section>
</ng-container>
