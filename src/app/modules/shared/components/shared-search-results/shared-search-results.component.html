<div>
  <h2 class="d-flex">
    <i class="fas fa-envelope text-warning" *ngIf="request.flag==='EMAILS_SEARCHING'"></i>
    <i class="fas fa-envelope text-success" *ngIf="request.flag==='EMAILS_FOUND'"></i>
    <i class="fas fa-check-square text-success" *ngIf="request.flag==='PROS_ADDED'"></i>
    <umius-country-flag *ngIf="request.country" [country]="request.country" [width]="30" [height]="20"></umius-country-flag>
    {{request.keywords}}
  </h2>
  <ul class="toolbar-fixed">
    <li (click)="searchMails()" [attr.disabled]="totalSelected ? null : ''">
      <span class="fas fa-search"></span> {{ 'SEARCH.SEARCHMAILS' | translate }} ({{ totalSelected }})
    </li>

    <li (click)="(addToCampaignModal = true) && $event.preventDefault()" [attr.disabled]="totalSelected ? null : ''">
      <i class="fas fa-external-link"></i>{{ 'SEARCH.ADDTOCAMPAIGN' | translate }} ({{ totalSelected }})
    </li>

    <li (click)="exportProsCSV()" [attr.disabled]="totalSelected ? null : ''">
      <i class="fas fa-file-excel"></i> {{ 'SEARCH.EXPORT' | translate }} ({{ totalSelected }})
    </li>
  </ul>
  <div *ngIf="request && request._id">
    <app-shared-pros-list-old [requestId]="request._id" [config]="config" (selectedProsChange)="updateSelection($event)"></app-shared-pros-list-old>
  </div>
</div>


<!-- MODAL : Ajout de pros Ã  une campagne -->
<umius-modal [(showModal)]="addToCampaignModal" [title]="'SEARCH.CAMPAIGN.TITLE'">

  <section class="modal-body">
    <small><strong>{{totalSelected}}</strong> {{ 'SEARCH.PRO' | translate }}s {{ 'SEARCH.SELECTED' | translate }}s</small>

    <app-utility-auto-complete-input
      (update)="updateCampaign($event)"
      [onlyOne]="true"
      [config]="{placeholder: 'campagne', initialData: chosenCampaign, type: 'campaign'}">
    </app-utility-auto-complete-input>
  </section>

  <footer class="modal-footer">
    <button class="button modal-cancel">{{ 'COMMON.BUTTON.CANCEL' | translate }}</button>
    <button (click)="addToCampaign(chosenCampaign, true)" [disabled]="!chosenCampaign.length" class="button is-primary">
      {{ 'SEARCH.CAMPAIGN.ADDANDSEE' | translate }}
    </button>
    <button (click)="addToCampaign(chosenCampaign)" [disabled]="!chosenCampaign.length" class="button is-primary">
      {{ 'SEARCH.ADD' | translate }}
    </button>
  </footer>

</umius-modal>
