<div>
  <h2 class="d-flex">
    <i class="fa fa-envelope text-warning" *ngIf="request.flag==='EMAILS_SEARCHING'"></i>
    <i class="fa fa-envelope text-success" *ngIf="request.flag==='EMAILS_FOUND'"></i>
    <i class="fa fa-check-square-o text-success" *ngIf="request.flag==='PROS_ADDED'"></i>
    <shared-country-flag *ngIf="request.country" [country]="request.country" [width]="30" [height]="20"></shared-country-flag>
    {{request.keywords[0].original}}
  </h2>
  <ul class="toolbar-fixed">
    <li (click)="searchMails()" [attr.disabled]="totalSelected ? null : ''">
      <span class="fa fa-search"></span> {{ 'SEARCH.SEARCHMAILS' | translate }} ({{ totalSelected }})
    </li>

    <li (click)="(addToCampaignModal = true) && $event.preventDefault()" [attr.disabled]="totalSelected ? null : ''">
      <i class="fa fa-external-link"></i>{{ 'SEARCH.ADDTOCAMPAIGN' | translate }} ({{ totalSelected }})
    </li>

    <li (click)="exportProsCSV()" [attr.disabled]="totalSelected ? null : ''">
      <i class="fa fa-file-excel-o"></i> {{ 'SEARCH.EXPORT' | translate }} ({{ totalSelected }})
    </li>
  </ul>
  <app-shared-pros-list [config]="config" [requestId]="request._id" (selectedProsChange)="updateSelection($event)"></app-shared-pros-list>
</div>

<!-- MODAL : Ajout de pros Ã  une campagne -->
<div class="modal" [ngClass]="{'active': addToCampaignModal}">
  <div class="modal-overlay" (click)="(addToCampaignModal = false) && $event.preventDefault()"></div>
  <div class="modal-container">
    <div class="modal-header">
      <button class="btn btn-clear float-right" (click)="(addToCampaignModal = false) && $event.preventDefault()"></button>
      <div class="modal-title h5">{{ 'SEARCH.CAMPAIGN.TITLE' | translate }}</div>
      <small><strong>{{totalSelected}}</strong> {{ 'SEARCH.PRO' | translate }}s {{ 'SEARCH.SELECTED' | translate }}s</small>
    </div>
    <div class="modal-body foo">
      <app-autocomplete-input
        (update)="updateCampaign($event)"
        [onlyOne]="true"
        [config]="{placeholder: 'campagne', initialData: chosenCampaign, type: 'campaign'}"></app-autocomplete-input>
    </div>
    <div class="modal-footer">
      <button class="btn btn-link" (click)="(addToCampaignModal = false) && $event.preventDefault()">{{ 'COMMON.CANCEL' | translate }}</button>
      <button type="submit" class="btn btn-primary" (click)="addToCampaign(chosenCampaign)" [disabled]="!chosenCampaign.length">
        {{ 'SEARCH.ADD' | translate }}
      </button>
      <button type="submit" class="btn btn-primary" (click)="addToCampaign(chosenCampaign, true)" [disabled]="!chosenCampaign.length">
        {{ 'SEARCH.CAMPAIGN.ADDANDSEE' | translate }}
      </button>
    </div>
  </div>
</div>
