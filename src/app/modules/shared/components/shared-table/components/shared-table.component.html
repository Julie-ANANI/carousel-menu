<h1>{{total}} {{ title | translate }}</h1>

<table class="table" wt-responsive-table>
  <thead>
    <tr>
      <!-- Si il n'y a aucunes lignes selectionnées -->
      <ng-container *ngIf="selectedRows==0">

        <th width="50" *ngIf="isSelectable"><input type="checkbox" (change)="selectAll($event)"/></th>

        <th *ngFor="let column of columnsNames">
          <sq-sort [config]="config"
                   (configChange)="changeConfig($event)"
                   [prop]="columns[columnsNames.indexOf(column)]">
            {{column | translate }}
          </sq-sort>
        </th>
      </ng-container>

      <ng-container *ngIf="selectedRows > 0">

        <th width="50" *ngIf="isSelectable"><input type="checkbox" (change)="selectAll($event)" [checked]="true"/></th>

        <th><span>{{selectedRows}} lignes selectionnée(s) </span></th>

        <button class="btn btn-error"
                (click)="removeSelectedRows()"
                *ngIf="isDeletable">
          Delete
        </button>

        <ng-container>

          <button *ngFor="let a of actions" class="btn" style="margin-left: 10px;"
                  (click)="onActionClick(a)">
            {{a}}
          </button>

        </ng-container>

      </ng-container>

    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let key of getRowsKeys()"
        [ngClass]="{'active': isSelected(content[key])}"
        (click)="selectRow(key)"
        (mouseenter)="hoverRow(key)"
        (mouseleave)="hoverRow(key)">

      <td width="50" *ngIf="isSelectable"><input type="checkbox" #s [checked]="isSelected(content[key])"/></td>

      <ng-container>
        <td *ngFor="let columnKey of columns">
          <ng-container [ngSwitch]="getType(columns.indexOf(columnKey))">

            <!-- Si le type de la colonne est TEXT -->
            <span *ngSwitchDefault>{{getContentValue(key, columnKey) || ' - '}}</span>

            <!-- Si le type de la colonne est COUNTRY -->
            <country-flag *ngSwitchCase="'COUNTRY'" [country]="getContentValue(key, columnKey)"></country-flag>

            <!-- Si le type de la colonne est PICTURE -->
            <div class="picture" *ngSwitchCase="'PICTURE'">
                <img [src]="getContentValue(key, columnKey)" class="img-fit-cover">
            </div>

            <!-- Si le type de la colonne est PROGRESS -->
            <progress class="progress tooltip"
                      *ngSwitchCase="'PROGRESS'"
                      [attr.data-tooltip]="getContentValue(key, columnKey) + '%'"
                      [value]="getContentValue(key, columnKey)" max="100">
            </progress>

          </ng-container>

          <button class="btn"
             *ngIf="isHover(content[key]) && columns.indexOf(columnKey) == 0 && isEditable"
             (click)="edit(content[key])">
            Infos
          </button>

        </td>
      </ng-container>
    </tr>
  </tbody>
  <tfoot>
  <tr>
    <td colspan="12">
      <sqPagination [config]="config"
                    (configChange)="changeConfig($event)"
                    [total]="total"
                    [propertyName]="'shared-table'">

      </sqPagination>
    </td>
  </tr>
  </tfoot>
</table>
