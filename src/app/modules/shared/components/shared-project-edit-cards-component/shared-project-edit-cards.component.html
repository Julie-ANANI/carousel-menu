<div class="main-container" id="pitch-card" *ngIf="project">
  <div class="columns">
    <div class="column col-12">
      <form novalidate>

        <!-- Language choice -->
        <div class="choice-wrapper">
          <div class="ques">{{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.LANGUAGE.HEADING' | translate }}</div>
          <div class="lang">
            <ul>
              <li
                *ngFor="let innovationCard of project.innovationCards; let i = index;"
                [ngClass]="{'active': innovationCardEditingIndex === i }"
                (click)="(innovationCardEditingIndex = i) && $event.preventDefault()">
                <div class="circle-check"><i class="fas fa-check"></i></div>
                <span>{{ 'COMMON.LANG.'+ innovationCard.lang | uppercase | translate }}</span>
              </li>
              <span *ngIf="project.innovationCards?.length < 2" class="add-project">
                {{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.LANGUAGE.ADD_PROJECT_LANGUAGE' | translate }}
                <span class="text-link">
                  <span *ngIf="!containsLanguage('fr')" (click)="createInnovationCard($event, 'fr')">
                    {{ 'COMMON.LANG.FR' | translate }}
                  </span>
                  <span *ngIf="!containsLanguage('en')" (click)="createInnovationCard($event, 'en')">
                    {{ 'COMMON.LANG.EN' | translate }}
                  </span>
                </span>
              </span>
            </ul>
          </div>
        </div>

        <!-- Lang action -->
        <div class="action-wrapper text-center">
          <div *ngFor="let innovationCard of project.innovationCards; let i = index;">
            <span *ngIf="innovationCardEditingIndex === i">
              <span class="text-link">{{ 'COMMON.PREVIEW' | translate }}</span>
              <span *ngIf="project.innovationCards?.length > 1" class="separator">/</span>
              <span
                *ngIf="project.innovationCards?.length > 1"
                (click)="deleteModal(innovationCard._id, innovationCard.lang)"
                class="text-link delete-link">
                {{ 'COMMON.DELETE' | translate }}
              </span>
            </span>
          </div>
        </div>


        <div class="columns">

          <!-- Ques -->
          <div class="column col-md-12 col-6">

            <div *ngFor="let innovationItem of project.innovationCards; let i = index">
              <div *ngIf="innovationCardEditingIndex === i">
                <!-- Project title -->
                <div class="project-data">
                  <span class="num-rect">1</span><span class="ques">{{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.TITLE.LABEL' | translate }}</span>
                  <div class="form-group pd-input">
                    <input
                      type="text"
                      id="innovation-title"
                      class="form-default"
                      name="title"
                      [(ngModel)]="project.innovationCards[i].title"
                      [attr.placeholder]="'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.TITLE.PLACEHOLDER' | translate"
                      (ngModelChange)="notifyModelChanges($event)">
                  </div>
                </div>
                <!-- Summary -->
                <div class="project-data">
                  <span class="num-rect">2</span><span class="ques">{{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.SUMMARY.LABEL' | translate }}</span>
                  <div class="form-group pd-input">
                    <textarea
                      [attr.placeholder]="'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.SUMMARY.PLACEHOLDER' | translate"
                      rows="5"
                      class="form-default"
                      name="summary"
                      [(ngModel)]="project.innovationCards[i].summary"
                      (ngModelChange)="notifyModelChanges($event)">
                    </textarea>
                  </div>
                </div>
                <!-- Problem -->
                <div class="project-data">
                  <span class="num-rect">3</span><span class="ques">{{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.PROBLEM.LABEL' | translate }}</span>
                  <div class="form-group pd-input">
                    <textarea
                      [attr.placeholder]="'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.PROBLEM.PLACEHOLDER' | translate"
                      rows="8"
                      id="innovation-problem"
                      class="form-default"
                      name="problem"
                      [(ngModel)]="project.innovationCards[i].problem"
                      (ngModelChange)="notifyModelChanges($event)">
                    </textarea>
                  </div>
                </div>
                <!-- Solution -->
                <div class="project-data">
                  <span class="num-rect">4</span><span class="ques">{{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.SOLUTION.LABEL' | translate }}</span>
                  <div class="form-group pd-input">
                    <textarea
                      [attr.placeholder]="'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.SOLUTION.PLACEHOLDER' | translate"
                      rows="8"
                      id="innovation-solution"
                      class="form-default"
                      name="solution"
                      [(ngModel)]="project.innovationCards[i].solution"
                      (ngModelChange)="notifyModelChanges($event)">
                    </textarea>
                  </div>
                </div>
                <!-- Advantages -->
                <div class="project-data">
                  <span class="num-rect">5</span><span class="ques">{{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.ADVANTAGES.LABEL' | translate }}</span>
                  <div class="pd-input">
                    <app-input-list
                      (update)="addAdvantageToInventionCard($event, i)"
                      [config]="getConfig('advantages')">
                    </app-input-list>
                  </div>
                </div>
              </div>
            </div>

            <!-- Project stage -->
            <div class="project-data">
              <span class="num-rect">6</span><span class="ques">{{ 'PROJECT_MODULE.SETUP.PITCH.STAGE' | translate }}</span>
              <div class="form-group pd-input">
                <label class="form-radio">
                  <input
                    type="radio"
                    name="projectStatus"
                    [(ngModel)]="project.projectStatus"
                    [value]="0">
                  <i class="form-icon"></i>{{ 'COMMON.PROJECT_STATUS.0' | translate }}
                </label>
                <label class="form-radio">
                  <input
                    type="radio"
                    name="projectStatus"
                    [(ngModel)]="project.projectStatus"
                    [value]="1">
                  <i class="form-icon"></i>{{ 'COMMON.PROJECT_STATUS.1' | translate }}
                </label>
                <label class="form-radio">
                  <input
                    type="radio"
                    name="projectStatus"
                    [(ngModel)]="project.projectStatus"
                    [value]="2">
                  <i class="form-icon"></i>{{ 'COMMON.PROJECT_STATUS.2' | translate }}
                </label>
              </div>
            </div>

            <!-- Project protected -->
            <div class="project-data">
              <span class="num-rect">7</span><span class="ques">{{ 'PROJECT_MODULE.SETUP.PITCH.PATENTED' | translate }}</span>
              <div class="form-group pd-input">
                <label class="form-radio">
                  <input
                    type="radio"
                    name="patented"
                    [(ngModel)]="project.patented"
                    [value]="false">
                  <i class="form-icon"></i>{{ 'COMMON.NO' | translate }}
                </label>
                <label class="form-radio">
                  <input
                    type="radio"
                    name="patented"
                    [(ngModel)]="project.patented"
                    [value]="true">
                  <i class="form-icon"></i>{{ 'COMMON.YES' | translate }}
                </label>
              </div>
            </div>

            <!-- Diffusion -->
            <div class="project-data">
              <span class="num-rect">8</span>
              <span class="ques">{{ 'PROJECT_MODULE.SETUP.PITCH.EXTERNAL_DIFFUSION.A' | translate }} {{companyName}} {{ 'PROJECT_MODULE.SETUP.PITCH.EXTERNAL_DIFFUSION.B' | translate }}</span>
              <div class="form-group pd-input">
                <label class="form-radio">
                  <input
                    type="radio"
                    name="external_diffusion"
                    [(ngModel)]="project.external_diffusion"
                    [value]="false">
                  <i class="form-icon"></i>{{ 'COMMON.NO' | translate }}
                </label>
                <label class="form-radio">
                  <input
                    type="radio"
                    name="external_diffusion"
                    [(ngModel)]="project.external_diffusion"
                    [value]="true">
                  <i class="form-icon"></i>{{ 'COMMON.YES' | translate }}
                </label>
              </div>
            </div>

          </div>

          <!-- Help -->
          <div class="column col-6 help-wrapper">
            <div class="bot-wrapper text-center">
              <span class="bot-rect">We are working very hard. Something cool is comming soon...</span>
              <br>
              <img src="https://res.cloudinary.com/umi/image/upload/v1528795403/app/default-images/bot-triangle.svg" class="bot-trian">
              <div><img src="https://res.cloudinary.com/umi/image/upload/v1528795365/app/default-images/bot-1.svg" alt="Bot"></div>
            </div>
          </div>

        </div>

        <!-- Project medias -->
        <div *ngFor="let innovationItem of project.innovationCards; let i = index">
          <div *ngIf="innovationCardEditingIndex === i">
            <div class="project-data">
              <span class="num-rect">9</span><span class="ques">{{ 'PROJECT_MODULE.SETUP.PITCH.MEDIA.LABEL' | translate }}</span>
              <div class="pd-input">

                <!-- Media display -->
                <div *ngIf="innovationItem.media?.length > 0">
                  <div class="columns col-gapless">

                    <!-- Main media -->
                    <div class="column col-md-12 col-lg-4 col-3 col-mr-auto" [ngStyle]="{ 'padding-bottom': '20px' }">
                      <p class="ques" [ngStyle]=" { 'font-size': '0.8rem' }">{{ 'PROJECT_MODULE.SETUP.PITCH.MEDIA.MAIN' | translate }}</p>
                      <div *ngIf="innovationItem.principalMedia?.type === 'PHOTO'">
                        <img
                          [src]="innovationItem.principalMedia.url"
                          [alt]="'COMMON.MEDIA_NOT_AVAILABLE' | translate"
                          width="220" height="146">
                      </div>
                      <div *ngIf="innovationItem.principalMedia?.type === 'VIDEO'">
                        <iframe
                          [src]="domSanitizer.bypassSecurityTrustResourceUrl(innovationItem.principalMedia.video.embeddableUrl)"
                          width="220" height="146">
                        </iframe>
                      </div>
                    </div>

                    <!-- Secondary medias -->
                    <div class="column col-md-12 col-lg-8 col-9 col-mx-auto" [ngStyle]="{ 'padding-bottom': '20px' }">
                      <p class="ques" [ngStyle]=" { 'font-size': '0.8rem' }">{{ 'PROJECT_MODULE.SETUP.PITCH.MEDIA.SECONDARY' | translate }}</p>
                      <div *ngFor="let media of innovationItem.media" class="media-content text-center">
                        <img
                          *ngIf="media.type === 'PHOTO'"
                          [src]="'https://res.cloudinary.com/umi/image/upload/c_thumb,h_146,w_220/' + media.cloudinary.public_id"
                          [alt]="'COMMON.MEDIA_NOT_AVAILABLE' | translate">
                        <iframe
                          *ngIf="media.type === 'VIDEO'"
                          [src]="domSanitizer.bypassSecurityTrustResourceUrl(media.video.embeddableUrl)"
                          width="220" height="146">
                        </iframe>
                        <div class="media-action text-center">
                            <span *ngIf="media._id !== innovationItem.principalMedia?._id" [ngStyle]="{ 'color': '#97A4B1' }">
                              <a class="text-link" (click)="setMediaAsPrimary($event, media, i)">{{ 'PROJECT_MODULE.SETUP.PITCH.MEDIA.MAKE_MAIN' | translate }}</a>
                              /
                            </span>
                          <a class="text-link delete-link" (click)="deleteMedia($event, media, i)">{{ 'COMMON.DELETE' | translate }}</a>
                        </div>
                      </div>
                    </div>

                  </div>
                </div>

                <!-- Uploading center -->
                <div class="upload-wrapper">
                  <div class="image-upload-wrapper">
                    <app-shared-upload-zone-photo
                      *ngIf="canEdit"
                      [uri]="'/innovation/'+project._id+'/innovationCard/'+innovationItem._id+'/media/image'"
                      (cbFn)="imageUploaded($event, i)">
                    </app-shared-upload-zone-photo>
                  </div>
                  <div class="or-wrapper">
                    <span class="para">{{ 'COMMON.OR' | translate }}</span>
                  </div>
                  <div class="video-upload-wrapper">
                    <app-shared-upload-zone-video *ngIf="canEdit" (cbFn)="newOnlineVideoToAdd($event)"></app-shared-upload-zone-video>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>

      </form>
    </div>
  </div>
</div>

<!-- Modal to ask user to sure about deleting the innov card the project -->
<div class="modal" [ngClass]="{ 'active': showDeleteModal }">
  <div class="modal-overlay" (click)="closeModal($event)"></div>
  <div class="modal-container">
    <div class="modal-header">
      <button class="btn btn-clear float-right" (click)="closeModal($event)"></button>
      <div class="modal-title">{{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.MODAL_DELETE.TITLE' | translate }}</div>
    </div>
    <div class="modal-body">
      <div class="content">
        {{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.MODAL_DELETE.CONTENT.A' | translate }}
        {{ 'COMMON.LANG.' + langDelete | uppercase | translate }}
        {{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.MODAL_DELETE.CONTENT.B' | translate }}
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-sm ghost-delete" (click)="deleteInnovCard($event)">
        {{ 'COMMON.DELETE' | translate }}
      </button>
    </div>
  </div>
</div>


<!--<div class="section-container" id="pitchCard" *ngIf="project">
  <div class="columns">
    <div class="column col-xs-12 col-12 col-mx-auto">

      <form novalidate>

        <!-- Describe -
          <div class="describe-container">

            <div class="ques">
              {{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.LANGUAGE_CHOICE' | translate }}
            </div>

            <div class="lang-container">
              <ul>
                <li
                  *ngFor="let innovationCard of project.innovationCards; let i = index"
                  [ngClass]="{'active': innovationCardEditingIndex === i }"
                  (click)="(innovationCardEditingIndex = i) && $event.preventDefault()">
                  <div class="circle-check"><i class="fas fa-check"></i></div>
                  <span>{{ 'COMMON.LANG.'+ innovationCard.lang | uppercase | translate }}</span>
                </li>
              </ul>
            </div>

            <div *ngIf="project.innovationCards?.length < 2"  class="create-innovation">
              {{ 'COMMON.OR' | translate | lowercase }} {{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.PROJECT_IN_OTHER_LANG' | translate }}
              <span class="text-link">
                  <span *ngIf="!containsLanguage('fr')" (click)="createInnovationCard($event, 'fr')">
                    {{ 'COMMON.LANG.FR' | translate }}
                  </span>
                  <span *ngIf="!containsLanguage('en')" (click)="createInnovationCard($event, 'en')">
                    {{ 'COMMON.LANG.EN' | translate }}
                  </span>
                </span>
            </div>

          </div>

          <div class="text-center" [ngStyle]="{ 'margin-top': '25px' }">
            <div *ngFor="let innovationCard of project.innovationCards; let i = index" [ngStyle]="{ 'display': 'inline-block' }">
              <div *ngIf="innovationCardEditingIndex === i" class="lang-action">
                <span class="text-link preview-link">{{ 'COMMON.PREVIEW' | translate }}</span>&nbsp;
                <span [ngStyle]="{'display': (project.innovationCards?.length > 1) ? 'inline-block' : 'none' }">
                  <span>/</span>&nbsp;
                  <span class="text-link delete-link" (click)="deleteModal(innovationCard._id, innovationCard.lang)">{{ 'COMMON.DELETE' | translate }}</span>
                </span>
              </div>
            </div>
          </div>

          <div class="hr"></div>

        <!--
        <ul formArrayName="innovationCards" class="lang-container">

              <li
                *ngFor="let innovationCard of innovationData.get('innovationCards').value; let i = index"
                [ngClass]="{'active': innovationCardEditingIndex === i }"
                (click)="(innovationCardEditingIndex = i) && $event.preventDefault(); setAsPrincipal(innovationCard._id)">
                <div class="circle"><i class="fas fa-check"></i></div>
                <span>{{ 'COMMON.LANG.'+ innovationCard.lang | uppercase | translate }}</span>
              </li>

              <div *ngIf="primaryLength === 1"  class="create-innovation">
                <span class="para">{{ 'COMMON.OR' | translate }}</span>{{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.PROJECT_IN_OTHER_LANG' | translate }}&nbsp;
                <span class="text-link">
                  <span *ngIf="primaryLanguage !== 'fr'" (click)="createInnovationCard($event, 'fr')">
                    {{ 'COMMON.LANG.FR' | translate }}
                  </span>
                  <span *ngIf="primaryLanguage !== 'en'" (click)="createInnovationCard($event, 'en')">
                    {{ 'COMMON.LANG.EN' | translate }}
                  </span>
                </span>
              </div>

            </ul>

            <div class="innov-progress"  *ngFor="let innovationCard of innovationData.get('innovationCards').value; let i = index">
              <div *ngIf="innovationCardEditingIndex === i">
                <span class="text-link">Preview</span>&nbsp;
                <span [ngStyle]="{'visibility': displayDeleteButton ? 'visible' : 'hidden' }">
                  <span [ngStyle]="{ 'color': '#97A4B1' }">/</span>&nbsp;
                  <span class="text-link delete-link" (click)="deleteModal(innovationCard._id)">Delete</span>
                </span>
              </div>
            </div>


          <div *ngFor="let innovationItem of project.innovationCards; let i = index">
            <div *ngIf="innovationCardEditingIndex === i">

              <!-- Title
              <div class="project-data">
                <span class="num-rect">1</span><span class="ques">{{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.TITLE.LABEL' | translate }}</span>
                <div class="tooltips"><i class="far fa-question-circle"></i>
                  <span class="tooltip-text">{{ "" | translate }}</span>
                </div>
                <div class="form-group pd-label">
                  <input
                    type="text"
                    id="innovation-title"
                    class="form-default"
                    name="title"
                    [(ngModel)]="project.innovationCards[i].title"
                    [attr.placeholder]="'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.TITLE.PLACEHOLDER' | translate"
                    (ngModelChange)="notifyModelChanges($event)">
                  <!-- <div class="form-error" *ngIf="innovationItem.title.touched && innovationItem.get('title').invalid">
                    <span *ngIf="innovationItem.get('title').hasError('required')">
                      {{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.TITLE.ERROR' | translate }}
                    </span>
                  </div> --
                </div>
              </div>

              <!-- Summary
              <div class="project-data">
                <span class="num-rect">2</span><span class="ques">{{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.SUMMARY.LABEL' | translate }}</span>
                <div class="tooltips"><i class="far fa-question-circle"></i>
                  <span class="tooltip-text">{{ "" | translate }}</span>
                </div>
                <div class="form-group pd-label">
                  <textarea
                    [attr.placeholder]="'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.SUMMARY.PLACEHOLDER' | translate"
                    rows="4"
                    class="form-default"
                    name="summary"
                    [(ngModel)]="project.innovationCards[i].summary"
                    (ngModelChange)="notifyModelChanges($event)">
                  </textarea>
                  <!-- <div class="form-error" *ngIf="innovationItem.get('summary').touched && innovationItem.get('summary').invalid">
                    <span *ngIf="innovationItem.get('summary').hasError('required')">
                      {{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.SUMMARY.ERROR' | translate }}
                    </span>
                  </div> --
                </div>
              </div>

              <!-- Problem
              <div class="project-data">
                <span class="num-rect">3</span><span class="ques">{{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.PROBLEM.LABEL' | translate }}</span>
                <div class="tooltips"><i class="far fa-question-circle"></i>
                  <span class="tooltip-text">{{ "" | translate }}</span>
                </div>
                <div class="form-group pd-label">
                  <textarea
                    [attr.placeholder]="'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.PROBLEM.PLACEHOLDER' | translate"
                    rows="8"
                    id="innovation-problem"
                    class="form-default"
                    name="problem"
                    [(ngModel)]="project.innovationCards[i].problem"
                    (ngModelChange)="notifyModelChanges($event)">
                  </textarea>
                  <!-- <div class="form-error" *ngIf="innovationItem.get('problem').touched && innovationItem.get('problem').invalid">
                    <span *ngIf="innovationItem.get('problem').hasError('required')">
                      {{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.PROBLEM.ERROR' | translate }}
                    </span>
                  </div> --
                </div>
              </div>

              <!-- Solution
              <div class="project-data">
                <span class="num-rect">4</span><span class="ques">{{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.SOLUTION.LABEL' | translate }}</span>
                <div class="tooltips"><i class="far fa-question-circle"></i>
                  <span class="tooltip-text">{{ "" | translate }}</span>
                </div>
                <div class="form-group pd-label">
                  <textarea
                    [attr.placeholder]="'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.SOLUTION.PLACEHOLDER' | translate"
                    rows="8"
                    id="innovation-solution"
                    class="form-default"
                    name="solution"
                    [(ngModel)]="project.innovationCards[i].solution"
                    (ngModelChange)="notifyModelChanges($event)">
                  </textarea>
                  <!-- <div class="form-error" *ngIf="innovationItem.get('solution').touched && innovationItem.get('solution').invalid">
                    <span *ngIf="innovationItem.get('solution').hasError('required')">
                      {{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.SOLUTION.ERROR' | translate }}
                    </span>
                  </div> --
                </div>
              </div>

              <!-- Advantages --
              <div class="project-data">
                <span class="num-rect">5</span><span class="ques">{{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.ADVANTAGES.LABEL' | translate }}</span>
                <div class="tooltips"><i class="far fa-question-circle"></i>
                  <span class="tooltip-text">{{ "" | translate }}</span>
                </div>
                <div class="input-list pd-label">
                  <app-input-list
                    (update)="addAdvantageToInventionCard($event, i)"
                    [config]="getConfig('advantages')">
                  </app-input-list>
                </div>
              </div>

            </div>
          </div>

        <!-- Stage
        <div class="project-data">
          <span class="num-rect">6</span><span class="ques">{{ 'PROJECT_MODULE.SETUP.PITCH.WHAT_STAGE' | translate }}</span>
          <div class="tooltips"><i class="far fa-question-circle"></i>
            <span class="tooltip-text">{{ "" | translate }}</span>
          </div>
          <div class="form-group pd-label">
            <label class="form-radio">
              <input
                type="radio"
                name="projectStatus"
                [(ngModel)]="project.projectStatus"
                [value]="0">
              <i class="form-icon"></i>{{ 'COMMON.PROJECT_STATUS.0' | translate }}
            </label>
            <label class="form-radio">
              <input
                type="radio"
                name="projectStatus"
                [(ngModel)]="project.projectStatus"
                [value]="1">
              <i class="form-icon"></i>{{ 'COMMON.PROJECT_STATUS.1' | translate }}
            </label>
            <label class="form-radio">
              <input
                type="radio"
                name="projectStatus"
                [(ngModel)]="project.projectStatus"
                [value]="2">
              <i class="form-icon"></i>{{ 'COMMON.PROJECT_STATUS.2' | translate }}
            </label>
          </div>
        </div>

        <!-- Patent
        <div class="project-data">
          <span class="num-rect">7</span><span class="ques">{{ 'PROJECT_MODULE.SETUP.PITCH.IS_PATENTED' | translate }}</span>
          <div class="tooltips"><i class="far fa-question-circle"></i>
            <span class="tooltip-text">{{ "" | translate }}</span>
          </div>
          <div class="form-group pd-label">
            <label class="form-radio">
              <input
                type="radio"
                name="patented"
                [(ngModel)]="project.patented"
                [value]="false">
              <i class="form-icon"></i>{{ 'COMMON.NO' | translate }}
            </label>
            <label class="form-radio">
              <input
                type="radio"
                name="patented"
                [(ngModel)]="project.patented"
                [value]="true">
              <i class="form-icon"></i>{{ 'COMMON.YES' | translate }}
            </label>
          </div>
        </div>

        <!-- Diffusion
        <div class="project-data">
          <span class="num-rect">8</span>
          <span class="ques">
            {{ 'PROJECT_MODULE.SETUP.PITCH.EXTERNAL_DIFFUSION.A' | translate }}
            {{companyName}}
            {{ 'PROJECT_MODULE.SETUP.PITCH.EXTERNAL_DIFFUSION.B' | translate }}
          </span>
          <div class="tooltips"><i class="far fa-question-circle"></i>
            <span class="tooltip-text">{{ "" | translate }}</span>
          </div>
          <div class="form-group pd-label">
            <label class="form-radio">
              <input
                type="radio"
                name="external_diffusion"
                [(ngModel)]="project.external_diffusion"
                [value]="false">
              <i class="form-icon"></i>{{ 'COMMON.NO' | translate }}
            </label>
            <label class="form-radio">
              <input
                type="radio"
                name="external_diffusion"
                [(ngModel)]="project.external_diffusion"
                [value]="true">
              <i class="form-icon"></i>{{ 'COMMON.YES' | translate }}
            </label>
          </div>
        </div>

        <div *ngFor="let innovationItem of project.innovationCards; let i = index">
          <div *ngIf="innovationCardEditingIndex === i">

            <div class="project-data">
              <span class="num-rect">9</span><span class="ques">{{ 'PROJECT_MODULE.SETUP.PITCH.MEDIA.ADD' | translate }}</span>
              <div class="pd-label">

                  <!-- Media display
                  <div class="media-disp-container">
                    <div class="columns col-gapless">

                      <!-- Main media
                      <div class="column col-md-12 col-lg-4 col-3 col-mr-auto">

                        <div>

                        <span class="para">Main media</span>
                        <div class="tooltips"><i class="far fa-question-circle"></i>
                          <span class="tooltip-text">{{ "" | translate }}</span>
                        </div>

                        <div *ngIf="innovationItem.principalMedia?.type === 'PHOTO'" class="principal-media">
                          <img
                            [src]="innovationItem.principalMedia.url"
                            [alt]="'COMMON.MEDIA_NOT_AVAILABLE' | translate"
                            width="220" height="146"
                            class="img-responsive">
                        </div>

                        <div *ngIf="innovationItem.principalMedia?.type === 'VIDEO'" class="principal-media">
                          <iframe
                            [src]="domSanitizer.bypassSecurityTrustResourceUrl(innovationItem.principalMedia.video.embeddableUrl)"
                            width="220" height="146">
                          </iframe>
                        </div>

                      </div>
                    </div>

                    <!-- Secondary medias
                    <div *ngIf="innovationItem.media?.length > 0" class="column col-md-12 col-lg-8 col-9 col-mx-auto">

                      <p class="para">Secondary medias</p>

                      <div *ngFor="let media of innovationItem.media" class="media-content">

                        <img
                          *ngIf="media.type === 'PHOTO'"
                          [src]="'https://res.cloudinary.com/umi/image/upload/c_thumb,h_146,w_220/' + media.cloudinary.public_id"
                          [alt]="'COMMON.MEDIA_NOT_AVAILABLE' | translate">

                        <iframe
                          *ngIf="media.type === 'VIDEO'"
                          [src]="domSanitizer.bypassSecurityTrustResourceUrl(media.video.embeddableUrl)"
                          width="220" height="146">
                        </iframe>

                        <div class="func-button text-center">
                            <span *ngIf="media._id !== innovationItem.principalMedia?._id" [ngStyle]="{ 'color': '#97A4B1' }">
                              <a class="text-link" (click)="setMediaAsPrimary($event, media, i)">Make it as main media</a>
                              /
                            </span>
                          <a class="text-link delete-link" (click)="deleteMedia($event, media, i)">Delete</a>
                        </div>

                      </div>
                    </div>
                    </div>
                  </div>

                </div>
              </div>

                <!-- Uploading medias
                <div class="upload-container">

                  <div class="image-upload-container">
                    <app-shared-upload-zone-photo
                      *ngIf="canEdit"
                      [uri]="'/innovation/'+project._id+'/innovationCard/'+innovationItem._id+'/media/image'"
                      (cbFn)="imageUploaded($event, i)">
                    </app-shared-upload-zone-photo>
                  </div>

                  <div class="or-wrapper">
                    <span class="para">{{ 'COMMON.OR' | translate }}</span>
                  </div>

                  <div class="video-upload-container">
                    <app-shared-upload-zone-video *ngIf="canEdit" (cbFn)="newOnlineVideoToAdd($event)"></app-shared-upload-zone-video>
                  </div>
                </div>
            </div>
          </div>

      </form>

    </div>
  </div>
</div>



<!--<div *ngIf="project">

<div *ngIf="project.principalMedia !== null && project.principalMedia !== undefined">

                          <span class="para">Main media</span>
                          <div class="tooltips"><i class="far fa-question-circle"></i>
                            <span class="tooltip-text">{{ "" | translate }}</span>
                          </div>

                          <div *ngIf="project.principalMedia?.type === 'PHOTO'" class="principal-media">
                            <img
                              [src]="project.principalMedia.url"
                              [alt]="'COMMON.MEDIA_NOT_AVAILABLE' | translate"
                              width="220" height="146"
                              class="img-responsive">
                          </div>

                          <div *ngIf="project.principalMedia?.type === 'VIDEO'" class="principal-media">
                            <iframe
                              [src]="domSanitizer.bypassSecurityTrustResourceUrl(project.principalMedia.video.embeddableUrl)"
                              width="220" height="146">
                            </iframe>
                          </div>

                        </div>
                      </div>

<div *ngIf="project.principalMedia !== undefined && project.principalMedia !== null">
                          <span class="para">Main media</span>
                          <div class="tooltips"><i class="fas fa-info"></i>
                            <span class="tooltip-text">{{ "" | translate }}</span>
                          </div>
                        </div>

                        <div *ngIf="project.principalMedia?.type === 'PHOTO'" class="principal-media">
                          <img
                            [src]="project.principalMedia.url"
                            [alt]="'COMMON.MEDIA_NOT_AVAILABLE' | translate"
                            width="220" height="146"
                            class="img-responsive">
                        </div>

                          <div *ngIf="project.principalMedia?.type === 'VIDEO'" class="principal-media">
                            <iframe
                              [src]="domSanitizer.bypassSecurityTrustResourceUrl(project.principalMedia.video.embeddableUrl)"
                              width="220" height="146">
                            </iframe>
                          </div>





   <!-- Upload media
<div class="columns">
  <!-- Images -
  <div class="column col-xl-12 col-5 col-mx-auto">
    <app-shared-upload-zone-photo
      *ngIf="canEdit"
      [uri]="'/innovation/'+project._id+'/innovationCard/'+innovationItem.get('_id').value+'/media/image'"
      (cbFn)="imageUploaded($event, i)">
    </app-shared-upload-zone-photo>
  </div>

  <!-- Plus icon -
  <div class="column col-md-xl col-2 col-mx-auto plus-container">
    <span><i class="fas fa-2x fa-plus"></i></span>
  </div>

  <!-- Videos -
  <div class="column col-xl-12 col-5 col-mx-auto">
    <app-shared-upload-zone-video
      *ngIf="canEdit"
      (cbFn)="newOnlineVideoToAdd($event)">
    </app-shared-upload-zone-video>
  </div>
</div>


<iframe
                        [src]="domSanitizer.bypassSecurityTrustResourceUrl(media.video.embeddableUrl)"
                        *ngIf="media.type==='VIDEO'"
                        width="276" height="183">
                      </iframe>
{{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.MAIN_LANG' | translateWithSpecificLanguage:formData.get('lang').value }}
  <form novalidate [formGroup]="formData" class="form-horizontal">
    <div class="columns">
      <div class="column col-4">
        <div class="language-choice">
          <p>{{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.LANGUAGE_CHOICE' | translate }} :</p>
          <ul formArrayName="innovationCards">
            <li *ngFor="let innovationCard of formData.get('innovationCards').value; let i = index"
                [ngClass]="{'active': innovationCardEditingIndex === i }">
              <div (click)="(innovationCardEditingIndex = i) && $event.preventDefault()">
                {{ 'COMMON.LANG.'+innovationCard.lang | uppercase | translate }}
              </div>
                          <span *ngIf="innovationCard.principal" class="c-auto">
                            {{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.MAIN_LANG' | translate }}</span>
                          <span *ngIf="!innovationCard.principal" (click)="setAsPrincipal($event, innovationCard._id)">{{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.SET_AS_MAIN_LANG' | translate }} <i
                            class="icon icon-arrow-right"></i></span>
            </li>
            <li *ngIf="project.innovationCards.length < 2" (click)="createInnovationCard($event)">
              {{ 'COMMON.ADD' | translate }} <i class="icon icon-plus"></i>
            </li>
          </ul>
        </div>
      </div>
      <div class="column col-8">
        <div formArrayName="innovationCards">
          <div *ngFor="let item of formData.get('innovationCards').controls; let i = index"
               [formGroup]="item">
            <div *ngIf="innovationCardEditingIndex === i">
              <div>
                <label class="form-label" for="innovation-title">
                  {{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.TITLE.LABEL' | translate }}</label>
                <input class="form-input input-lg" type="text" id="innovation-title"
                       [attr.placeholder]="'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.TITLE.PLACEHOLDER' | translate"
                       formControlName="title">
              </div>

              <div>
                <label class="form-label" for="innovation-summary">
                  {{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.SUMMARY.LABEL' | translate }}</label>
                            <textarea class="form-input" id="innovation-summary"
                                      [attr.placeholder]="'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.SUMMARY.PLACEHOLDER' | translate"
                                      rows="6" formControlName="summary"></textarea>
              </div>

              <div>
                <label class="form-label" for="innovation-problem">
                  {{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.PROBLEM.LABEL' | translate }}</label>
                            <textarea class="form-input" id="innovation-problem"
                                      [attr.placeholder]="'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.PROBLEM.PLACEHOLDER' | translate"
                                      rows="20" formControlName="problem"></textarea>
              </div>

              <div>
                <label class="form-label" for="innovation-solution">
                  {{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.SOLUTION.LABEL' | translate }}</label>
                            <textarea class="form-input" id="innovation-solution"
                                      [attr.placeholder]="'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.SOLUTION.PLACEHOLDER' | translate"
                                      rows="20"
                                      formControlName="solution"></textarea>
              </div>

              <div>
                <label class="form-label">
                  {{ 'PROJECT_MODULE.SETUP.PITCH.DESCRIPTION.ADVANTAGES.LABEL' | translate }}</label>
                <div class="input-group">
                  <app-input-list (update)="addAdvantageToInventionCard($event, i)"
                                  [config]="getConfig('advantages')"></app-input-list>
                </div>
              </div>

              <div>
                <label class="form-label">{{ 'PROJECT_MODULE.SETUP.PITCH.MEDIA.ADD' | translate }}</label>
                <div class="medias"
                     *ngIf="project.innovationCards[innovationCardEditingIndex].media?.length > 0">
                  <div class="media"
                       *ngFor="let media of project.innovationCards[innovationCardEditingIndex].media; let idx = index">
                    <iframe width="200" height="100"
                            [src]="domSanitizer.bypassSecurityTrustResourceUrl(media.video.embeddableUrl)"
                            *ngIf="media.type==='VIDEO'">
                    </iframe>

                    <img
                      [src]="'https://res.cloudinary.com/umi/image/upload/c_scale,w_100/' + media.cloudinary.public_id"
                      *ngIf="media.type==='PHOTO'"
                      alt="" width="100" height="100">
                    <div *ngIf="canEdit">
                      <a class="delete c-hand" aria-label="Close" role="button"
                         (click)="deleteMedia($event, media)">
                        <img [src]="'https://res.cloudinary.com/umi/image/upload/app/delete.svg'" width="22"
                             height="22">
                      </a>
                      <a class="primary c-hand" aria-label="Close" role="button"
                         (click)="setMediaAsPrimary($event, media)">
                        <img
                          [src]="'https://res.cloudinary.com/umi/image/upload/app/'+ (project.innovationCards[innovationCardEditingIndex].principalMediaIdx === idx ? '' : 'empty-') + 'star.svg'"
                          width="24" height="22">
                      </a>
                    </div>
                  </div>
                </div>

                <app-shared-upload-zone-photo
                  *ngIf="canEdit"
                  [uri]="'/innovation/'+project._id+'/innovationCard/'+item.value.id+'/media/image'"
                  (cbFn)="imageUploaded($event)">
                </app-shared-upload-zone-photo>


                <app-shared-upload-zone-video
                  *ngIf="canEdit"
                  (cbFn)="newOnlineVideoToAdd($event)">
                </app-shared-upload-zone-video>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="column col-12">
        <div class="divider"></div>
      </div>
      <div class="column col-4"></div>
      <div class="column col-8">
        <div>
          <label class="form-label">{{ 'PROJECT_MODULE.SETUP.PITCH.WHAT_STAGE' | translate }}</label>
          <label class="form-radio">
            <input type="radio" name="projectStatus" formControlName="projectStatus" [value]="0">
            <i class="form-icon"></i> {{ 'COMMON.PROJECT_STATUS.0' | translate }}

          </label>
          <label class="form-radio">
            <input type="radio" name="projectStatus" formControlName="projectStatus" [value]="1">
            <i class="form-icon"></i> {{ 'COMMON.PROJECT_STATUS.1' | translate }}
          </label>
          <label class="form-radio">
            <input type="radio" name="projectStatus" formControlName="projectStatus" [value]="2">
            <i class="form-icon"></i> {{ 'COMMON.PROJECT_STATUS.2' | translate }}
          </label>
        </div>

        <div>
          <label class="form-label">{{ 'PROJECT_MODULE.SETUP.PITCH.IS_PATENTED' | translate }}</label>
          <label class="form-radio">
            <input type="radio" name="patented" formControlName="patented" [value]="false">
            <i class="form-icon"></i> {{ 'COMMON.NO' | translate }}
          </label>
          <label class="form-radio">
            <input type="radio" name="patented" formControlName="patented" [value]="true">
            <i class="form-icon"></i> {{ 'COMMON.YES' | translate }}
          </label>
        </div>
      </div>
    </div>
  </form>
</div>-->
