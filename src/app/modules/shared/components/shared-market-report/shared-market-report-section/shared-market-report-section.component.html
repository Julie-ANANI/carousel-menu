<div id={{info.id}}>
  <h2>{{ info.title[lang] }}</h2>

  <div class="white-frame">

    <app-question-conclusion
      [info]="info"
      [innovationId]="innoid"
      [readonly]="readonly"
    ></app-question-conclusion>

    <!--======= Scores =======-->
    <div class="bloc" *ngIf="info.controlType === 'scale'">
      <div class="column-graph flex-container">
        <div *ngFor="let score of info.data; let i = index"
             class="vertical-bar number{{score.value}}">
          <div class="bar-fill" [style.height]="getFillPerc(score.count)" *ngIf="score.count"></div>
          <div class="bar-stats" *ngIf="score.count">{{score.count}}</div>
          <div class="bar-picture" *ngIf="score.count"></div>
          <div class="bar-score">{{score.value}}/10</div>
        </div>
      </div>
    </div>

    <!--======= Prix =======-->
    <div class="bloc" *ngIf="info.average && info.controlType === 'textbox'">
      <app-shared-infographics-prices [rawData]="info.data"></app-shared-infographics-prices>

      <div class="average">Moyenne : {{info.average}}€</div>
    </div>

    <!--======= Bouton plier/déplier =======-->
    <button type="button" class="market-report-btn centered"
            *ngIf="info.id!='marketPotential'"
            [ngClass]="{'active': showDetails}"
            (click)="toggleDetails($event)">
      {{(showDetails ? 'MARKET_REPORT.BTN_DETAILS_CLOSE' : 'MARKET_REPORT.BTN_DETAILS_OPEN') | translate}}
      <i class="fa" aria-hidden="true"
         [ngClass]="{'fa-angle-up': showDetails, 'fa-angle-down': !showDetails}"></i>
    </button>

    <!--************************************************
                    SECTION DETAILS
    **************************************************-->
    <div class="bloc details" *ngIf="showDetails">

      <!--======= Bar Chart =======-->
      <bar-chart
        *ngIf="info.pieChart"
        [stats]="info.pieChart"
        [options]="info.options || []"
        [number]="true"
        [displayCount]="info.controlType === 'checkbox'">
      </bar-chart>

      <!--======= Avantages Clés =======-->
      <div *ngIf="info.controlType === 'stars'">
        <table>
          <tr *ngFor="let advantage of info.options; let i = index">
            <td>{{advantage.label[lang]}}</td>
            <td><stars [note]="info?.data[advantage.identifier]?.average" [count]="info?.data[advantage.identifier]?.count"></stars></td>
          </tr>
        </table>
      </div>

      <!--======= Liste d'items (applications, concurrents, partenaires potentiels) =======-->
      <market-item-list
        [answers]="answers"
        [list]="info.data"
        *ngIf="info.controlType === 'list' || info.controlType === 'clearbit'"
        (modalAnswerChange)="seeAnswer($event)">
      </market-item-list>

      <!--======= Marques d'intérêt =======-->

      <div *ngIf="info.controlType === 'checkbox'">
        <div *ngFor="let option of info.options">
          <div *ngIf="info.data[option.identifier].length">
            <p class="title-question">{{ option.label[lang]}}</p>
            <market-item-list
              [answers]="answers"
              [list]="info.data[option.identifier]"
              (modalAnswerChange)="seeAnswer($event)">
            </market-item-list>
          </div>
        </div>
      </div>

      <!--======= Liste de commentaires =======-->
      <div *ngIf="showDetails && answersWithComment.length > 0">
        <p class="title-question">{{answersWithComment.length}} {{ 'MARKET_REPORT.COMMENTS' | translate }}</p>
        <ul class="comments">
          <li *ngFor="let answer of answersWithComment">
              <!-- TODO : for <li> [ ngClass ]="{'top-profil': comment.rating === 2}"-->
            <market-comment
              [comment]="answer.answers[info.id+'Comment']"
              [answer]="answer"
              (modalAnswerChange)="seeAnswer($event)">
            </market-comment>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
