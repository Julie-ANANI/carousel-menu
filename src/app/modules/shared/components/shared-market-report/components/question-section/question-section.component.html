<ng-container *ngIf="questionReceived">
  <section class="question-section-component section-pad" [id]="questionReceived.identifier">

    <!-- if the question type is checkbox or radio -->
    <ng-container *ngIf="questionReceived.controlType === 'checkbox' || questionReceived.controlType === 'radio'">
      <app-bar-chart
        [innovation]="innovation"
        [question]="questionReceived"
        [readonly]="readonly"
        [stats]="stats"
        [toggleAnswers]="toggleAnswers"
        (modalAnswerChange)="seeAnswer($event)"
        (answerButtonClicked)="answerBtnClicked($event)">
      </app-bar-chart>
    </ng-container>
    <!-- /if the question type is checkbox or radio -->


    <!-- if the question type is not checkbox and radio -->
    <ng-container *ngIf="questionReceived.controlType !== 'checkbox' && questionReceived.controlType !== 'radio'">
      <div class="bg-white">
        <app-question-conclusion
          [innovation]="innovation"
          [question]="questionReceived"
          [readonly]="readonly"
          [stats]="stats">
        </app-question-conclusion>
      </div>
    </ng-container>
    <!-- /if the question type is not checkbox and radio -->


    <!-- if the question type is list or clearbit -->
    <ng-container *ngIf="questionReceived.controlType === 'list' || questionReceived.controlType === 'clearbit'">

      <!-- answer button -->
      <div class="section-light-pad rm-pad-bottom text-center">
        <button type="button" class="btn btn-primary" (click)="toggleAnswers = !toggleAnswers">
          {{ (toggleAnswers ? 'MARKET_REPORT.BTN_ANSWERS_CLOSE' : 'MARKET_REPORT.BTN_ANSWERS_OPEN') | translate }}
          <i class="fas icon-size" aria-hidden="true" [ngClass]="toggleAnswers ? 'fa-angle-down' : 'fa-angle-right'"></i>
        </button>
      </div>

      <!-- now showing the answers, this contains both the answers to show and comments  -->
      <div [ngClass]=" toggleAnswers ? 'expand-wrapper' : 'collapse-wrapper' " class="content-wrapper">
        <div *ngIf="toggleAnswers">
          <div class="d-flex section-light-pad rm-pad-bottom clearbit-list-wrapper rm-margin">

            <div *ngIf="answersWithComment.length > 0" class="clearbit-comment-wrapper">
              <div *ngFor="let answer of answersWithComment" class="card">
                <div class="card-body">
                  <app-market-comment-2
                    [answer]="answer"
                    [canEditTags]="adminSide"
                    [question]="questionReceived"
                    (modalAnswerChange)="seeAnswer($event)">
                  </app-market-comment-2>
                </div>
              </div>
            </div>

            <div class="clearbit-icon-wrapper">
              <app-item-list
                [innovation]="innovation"
                [question]="questionReceived"
                [readonly]="readonly"
                [stats]="stats"
                (updateNumberOfItems)="updateNumberOfItems($event)"
                (modalAnswerChange)="seeAnswer($event)">
              </app-item-list>
            </div>

          </div>
        </div>
      </div>

    </ng-container>
    <!-- /if the question type is list or clearbit -->


    <!-- showing answers if the question type is not clearbit, radio, checkbox and list -->
    <div *ngIf="questionReceived.controlType !== 'checkbox' && questionReceived.controlType !== 'radio' && questionReceived.controlType !== 'list' && questionReceived.controlType !== 'clearbit'">

      <!-- answer button -->
      <div class="section-light-pad rm-pad-bottom text-center">
        <button type="button" class="btn btn-primary" (click)="toggleAnswers = !toggleAnswers">
          {{ (toggleAnswers ? 'MARKET_REPORT.BTN_ANSWERS_CLOSE' : 'MARKET_REPORT.BTN_ANSWERS_OPEN') | translate }}
          <i class="fas icon-size" aria-hidden="true" [ngClass]="toggleAnswers ? 'fa-angle-down' : 'fa-angle-right'"></i>
        </button>
      </div>

      <!-- now showing the answers that we have for the textarea, scale, toggle and star type -->
      <div [ngClass]=" toggleAnswers ? 'expand-wrapper' : 'collapse-wrapper' " class="content-wrapper">
        <div *ngIf="toggleAnswers">

          <!-- star -->
          <div *ngIf="questionReceived.controlType === 'stars'">
            <div class="section-light-pad rm-pad-bottom">
              <app-stars [question]="questionReceived"></app-stars>
            </div>
          </div>

          <!-- rating -->
          <div *ngIf="questionReceived.controlType === 'scale'">
            <div class="section-light-pad rm-pad-bottom">
              <app-scale [question]="questionReceived"></app-scale>
            </div>
          </div>

          <!-- textarea -->
          <div *ngIf="questionReceived.controlType === 'textarea'">
            <div class="section-light-pad rm-pad-bottom rm-margin">
              <div *ngFor="let answer of answersToShow | async" class="card">
                <div class="card-body less-padding">
                  <app-market-comment-2
                    [answer]="answer"
                    [canEditTags]="adminSide"
                    [question]="questionReceived"
                    (modalAnswerChange)="seeAnswer($event)">
                  </app-market-comment-2>
                </div>
              </div>
            </div>
          </div>

          <!-- toggle ---->
          <div *ngIf="questionReceived.controlType === 'toggle'">
            <div class="toggle-wrapper rm-margin d-flex section-light-pad rm-pad-bottom">
              <div *ngFor="let answer of answersToShow | async" class="card is-responsive">
                <div class="card-body">
                  <app-pro-tag [answer]="answer" (modalAnswerChange)="seeAnswer($event)"></app-pro-tag>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>

    </div>
    <!-- /showing answers if the question type is not clearbit, radio, checkbox and list -->


    <!-- comments that are not related to answers like general comments but not for list and clearbit question type -->
    <ng-container *ngIf="showComment && questionReceived.controlType !== 'list' && questionReceived.controlType !== 'clearbit' && answersWithComment.length > 0">

      <div class="section-pad rm-pad-bottom">
        <h5 class="title-secondary">{{ answersWithComment.length }} {{ 'MARKET_REPORT.BTN_COMMENTS_OPEN' | translate }}</h5>
      </div>

      <!-- showing the comments ---->
      <div class="comment-wrapper rm-margin">
        <div *ngFor="let answer of answersWithComment" class="card">
          <div class="card-body less-padding">
            <app-market-comment-2
              [answer]="answer"
              [canEditTags]="adminSide"
              [question]="questionReceived"
              (modalAnswerChange)="seeAnswer($event)"></app-market-comment-2>
          </div>
        </div>
      </div>

    </ng-container>
    <!-- /comments that are not related to answers like general comments but not for list and clearbit question type -->


  </section>
</ng-container>
