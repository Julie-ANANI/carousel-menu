<ng-container *ngIf="innovation">
  <section class="animate-page" id="market-report" [ngStyle]="{ 'background-color': adminSide ? '#F5F5F5' : (innovation?.status !== 'DONE' && !previewMode) ? 'white' : '#F5F5F5' }">

    <!-- project status not done client side -->
    <ng-container *ngIf="innovation?.status !== 'DONE' && !adminSide && !previewMode">
      <div class="section-light-pad rm-pad-bottom">
        <div class="column col-xs-12 col-11 col-mx-auto">
          <h1 class="title-primary">{{ 'MARKET_REPORT.TITLE'  | translate }}</h1>
          <div class="section-light-pad rm-pad-bottom">
            <app-message-space [widthMax]="'337px'">
              {{ getMessage() | translate }}
            </app-message-space>
          </div>
        </div>
      </div>
    </ng-container>
    <!-- project status not done client side -->

    <!-- project status not submitted admin side -->
    <ng-container *ngIf="innovation.status === 'EDITING' && adminSide">
      <div class="section-pad rm-pad-bottom">
        <div class="column col-xs-12 col-11 col-mx-auto">
          <app-message-space [widthMax]="'337px'">
            {{ 'MARKET_REPORT.MESSAGE_ADMIN.NOT_SUBMITTED' | translate }}
          </app-message-space>
        </div>
      </div>
    </ng-container>
    <!-- /project status not submitted admin side -->

    <!-- project status submitted -->
    <ng-container *ngIf="innovation?.status === 'DONE' || (innovation?.status !== 'EDITING' && adminSide) || innovation?.previewMode">

      <!-- message -->
      <ng-container *ngIf="innovation?.previewMode && innovation?.status !== 'DONE'">

        <ng-container *ngIf="!adminSide">
          <div class="banner banner-success">{{ 'PROJECT_MODULE.SETUP.MESSAGE.PREVIEW_MODE' | translate }}</div>
        </ng-container>

        <ng-container *ngIf="adminSide">
          <div class="banner banner-success">{{ 'MARKET_REPORT.MESSAGE_ADMIN.PREVIEW_MODE' | translate }}</div>
        </ng-container>

      </ng-container>

      <ng-container *ngIf="innovation?.status === 'DONE' && adminSide">
        <div class="banner banner-success">{{ 'MARKET_REPORT.MESSAGE_ADMIN.DONE' | translate }}</div>
      </ng-container>
      <!-- /message -->

      <!-- sticky bar -->
      <div class="sticky-wrapper" [ngClass]="{ 'scroll-sticky-wrapper': scrollOn && !wordpress }">
        <div class="column col-xs-12 col-11 col-mx-auto content-wrapper">

          <!-- detail view and visible to client -->
          <ng-container *ngIf="!wordpress">
            <div class="toggle-option">

              <!-- client side -->
              <ng-container *ngIf="!adminSide">
                <label class="form-switch gtm-synthesis-detail-view" for="showDetails">
                  <input
                    type="checkbox"
                    name="showDetails"
                    id="showDetails"
                    (change)="toggleDetails($event)"
                    [checked]="showDetails">
                  <i class="form-icon"></i>
                  {{ 'MARKET_REPORT.STICKY_BAR.DETAIL_VIEW' | translate }}
                </label>
              </ng-container>
              <!-- /client side -->

              <!-- admin side -->
              <ng-container *ngIf="adminSide">
                <label class="form-switch" for="previewMode">
                  <input
                    type="checkbox"
                    name="previewMode"
                    id="previewMode"
                    (change)="enablePreviewMode($event)"
                    [checked]="previewMode || innovation?.status === 'DONE'"
                    [disabled]="innovation?.status === 'DONE'">
                  <i class="form-icon"></i>
                  {{ 'MARKET_REPORT.STICKY_BAR.CLIENT_VISIBLE' | translate }}
                </label>
              </ng-container>
              <!-- /admin side -->

            </div>
          </ng-container>
          <!-- /detail view and visible to client -->

          <!-- filter view -->
          <div class="filter-wrapper" [ngStyle]="{ 'border-right': sharable ? 'none' : 'block' }">
            <p>{{ 'MARKET_REPORT.STICKY_BAR.FILTER' | translate }}</p>
            <ul>
              <li *ngFor="let fKey of objectKeys(filters)" (click)="deleteFilter(fKey, $event)">
                <a><i class="fas fa-times"></i>{{ filters[fKey].questionTitle | multiling:userLang }}</a>
              </li>
            </ul>
          </div>
          <!-- /filter view -->

          <!-- buttons -->
          <div class="button-wrapper" [ngStyle]="{ 'display': sharable ? 'none' : 'inline-flex' }">

            <ng-container *ngIf="!adminSide">

              <button class="btn ghost-primary gtm-share-synthesis" (click)="shareSynthesis($event)">
                {{ 'MARKET_REPORT.STICKY_BAR.BUTTON_SHARE' | translate }}
              </button>

              <ng-container *ngIf="isOwner">
                <button class="btn btn-primary gtm-export-synthesis" (click)="displayModal($event, 'exportInnovation')">
                  {{ 'MARKET_REPORT.STICKY_BAR.BUTTON_EXPORT' | translate }}
                </button>
              </ng-container>

            </ng-container>

            <ng-container *ngIf="adminSide">
              <button class="btn btn-primary btn-sm" (click)="displayModal($event, 'endInnovation')">
                {{ 'MARKET_REPORT.STICKY_BAR.BUTTON_END' | translate }}
              </button>
            </ng-container>

          </div>
          <!-- /buttons -->

        </div>
      </div>
      <!-- /sticky bar -->

      <!-- menu button -->
      <div class="menu-wrapper menu-button-print gtm-synthesis-menu" [ngStyle]="{ 'display': menuButton ? 'block' : 'none' }">

        <div class="menu-item-wrapper" [ngStyle]="{ 'display': displayMenuWrapper ? 'block' : 'none' }" (mouseenter)="displayMenu($event)" (mouseleave)="hideMenu($event)">
          <ul>
            <li
              *ngIf="innovation.executiveReport?.totalSections > 0 || adminSide"
              [ngClass]="{ 'active': activeSection === 'executive-report' }"
              pageScroll
              pageScrollOffset="135"
              href="#executive-report">
              <span>Executive report</span>
            </li>
            <li
              *ngIf="innovation.marketReport?.keyLearning?.conclusion.length > 0 || adminSide"
              [ngClass]="{ 'active': activeSection === 'key-learning' }"
              pageScroll
              pageScrollOffset="135"
              href="#key-learning">
              <span>{{ 'MARKET_REPORT.KEY_LEARNING' | translate }}</span>
            </li>
            <li
              [ngClass]="{ 'active': activeSection === 'professionals' }"
              pageScroll
              pageScrollOffset="135"
              href="#professionals">
              <span>{{ 'MARKET_REPORT.PROFESSIONAL.TITLE' | translate }}</span>
            </li>
            <li
              *ngFor="let question of questions"
              pageScroll
              pageScrollOffset="135"
              [href]="'#' + question.identifier | removespaces"
              [ngClass]="{'active': activeSection === question.identifier}">
              <span>{{ question.title | multiling:userLang }}</span>
            </li>
            <li
              *ngIf="innovation.marketReport?.finalConclusion?.conclusion.length > 0 || adminSide"
              [ngClass]="{ 'active': activeSection === 'conclusion' }"
              pageScroll
              pageScrollOffset="135"
              href="#conclusion">
              <span>{{ 'MARKET_REPORT.CONCLUSION' | translate }}</span>
            </li>
          </ul>
        </div>

        <button class="btn btn-secondary" (mouseenter)="displayMenu($event)" (mouseleave)="hideMenu($event)">Menu</button>

      </div>
      <!-- /menu button -->

      <!-- Answer sections -->
      <section id="answer-wrapper">

        <!-- main page -->
        <ng-container *ngIf="showDetails">
          <section class="section-pad rm-pad-bottom text-center d-flex" id="main-page" [ngStyle]="{ 'display': sharable ? 'flex' : 'none' }">
            <div class="column col-xs-12 col-11 col-mx-auto">
              <div class="section-pad full bg-white front-page-print">

                <!-- logo -->
                <div class="logo-wrapper">
                  <img src="{{ getLogo() }}" alt="UMI" height="38px">
                </div>

                <!-- body -->
                <div class="d-flex body-wrapper">

                  <h6 class="text-executive">Executive report</h6>

                  <h1>{{ innovation.innovationCards[currentInnovationIndex]?.title }}</h1>

                  <div class="summary text" [innerHtml]="innovation.innovationCards[currentInnovationIndex]?.summary"></div>

                  <img class="image-wrapper" [src]="getSrc()" [alt]=" ">

                  <ng-container *ngIf="isMainDomain()">
                    <h6 *ngIf="innovation.owner?.name" class="text-owner">{{ getOwnerName() }}</h6>
                    <h6 *ngIf="innovation.owner?.jobTitle" class="text-jobTitle">{{ innovation.owner?.jobTitle }}</h6>
                    <h6 *ngIf="innovation.owner?.email" class="text-email">{{ innovation.owner?.email }}</h6>
                  </ng-container>

                  <div *ngIf="innovation.executiveReport?.objective" class="goal-text">
                    {{ 'MARKET_REPORT.EXECUTIVE.TITLE' | translate }}: {{ innovation.executiveReport?.objective }}
                  </div>

                </div>

                <!-- link -->
                <div class="footer-wrapper">
                  <span>{{ 'MARKET_REPORT.PRINT_DATE' | translate }} {{ today | date:dateFormat }}</span>
                  <div class="text-right">
                    <a [href]="getCompanyURL()" class="text-link">{{ getCompanyName() }}</a>
                    <p><a [href]="getMailto()">{{getContact()}}</a> <span *ngIf="isMainDomain()">| 06 49 34 47 32 </span> | {{getCompanyURL()}}</p>
                  </div>
                </div>

              </div>
            </div>
          </section>
        </ng-container>
        <!-- /main page -->

        <!-- main page goal -->
        <ng-container *ngIf="adminSide">
          <section class="section-light-pad" id="innovation-goal">
            <div class="column col-xs-12 col-11 col-mx-auto">
              <div class="section-pad bg-white full">

                <h2 class="title-primary">{{ 'MARKET_REPORT.EXECUTIVE.TITLE' | translate }}</h2>

                <div class="form-group relative">

                  <label for="market-report-objective"></label>
                  <textarea
                    class="form-input"
                    id="market-report-objective"
                    [attr.placeholder]="'MARKET_REPORT.EXECUTIVE_PLACEHOLDER.GOAL' | translate"
                    rows="5"
                    [(ngModel)]="innovation.executiveReport.objective"
                    (focusout)="update($event)"
                    maxlength="120">
                    </textarea>

                  <div class="char-remaining" [ngStyle]="{ 'color': getColor((innovation.executiveReport?.objective.length | characterCountdown:120), 120) }">
                    <span>{{ innovation.executiveReport?.objective.length | characterCountdown:120 }}</span>
                  </div>

                </div>

              </div>
            </div>
          </section>
        </ng-container>
        <!-- /main page goal -->

        <!-- executive template generation -->
        <ng-container *ngIf="adminSide">
          <section class="section-light-pad">
            <div class="column col-xs-12 col-11 col-mx-auto">
              <div class="section-pad full d-flex executive-generate-wrapper bg-white">

                <!-- heading -->
                <h2 class="title-primary">{{ 'MARKET_REPORT.EXECUTIVE.HEADING' | translate }}</h2>

                <!-- sub heading -->
                <h3 class="title-secondary text-center">{{ 'MARKET_REPORT.EXECUTIVE.CHOOSE_TEMPLATE' | translate }}</h3>

                <!-- templates -->
                <div class="template-outer-wrapper">
                  <div *ngFor="let template of executiveTemplates" class="template">
                    <img [src]="template.imageSrc" alt=" ">
                    <div class="btn btn-radio" [ngClass]="{ 'active': numberOfSections === template.value }" (click)="assignSectionValue($event, template.value)">
                      <span>•</span>
                    </div>
                  </div>
                </div>

                <!-- button -->
                <div class="text-center">
                  <button class="btn ghost-primary btn-sm" [disabled]="innovation?.executiveReport.totalSections > 0 || numberOfSections === 0" (click)="generateExecutiveTemplate($event)">
                    Valid Template
                  </button>
                </div>

              </div>
            </div>
          </section>
        </ng-container>
        <!-- /executive template generation -->

        <!-- executive report -->
        <ng-container *ngIf="innovation.executiveReport.totalSections > 0">
          <section id="executive-report">
            <app-executive-report [project]="innovation"></app-executive-report>
          </section>
        </ng-container>
        <!-- /executive report -->

        <!-- executive Report delete button -->
        <ng-container *ngIf="innovation.executiveReport.totalSections > 0 && adminSide">
          <section class="section-light-pad text-center">
            <button class="btn ghost-delete btn-sm" (click)="deleteExecutiveTemplate($event)">
              {{ 'MARKET_REPORT.EXECUTIVE.DELETE_BUTTON' | translate }}
            </button>
          </section>
        </ng-container>
        <!-- /executive Report delete button -->

        <!-- UMI intro -->
        <ng-container *ngIf="showDetails && getDomainName() === 'umi'">
          <section class="section-pad umi-intro-print" [ngStyle]="{ 'display': sharable ? 'flex' : 'none' }">
            <div class="column col-xs-12 col-11 col-mx-auto">
              <img [src]="getIntroSrc()" alt=" " class="img-responsive">
            </div>
          </section>
        </ng-container>
        <!-- /UMI intro -->

        <!-- innovation detail -->
        <ng-container *ngIf="showDetails">
          <section class="section-light-pad report-innovation-print" [ngStyle]="{ 'display': sharable ? 'flex' : 'none' }">
            <div class="column col-xs-12 col-11 col-mx-auto">
              <div class="section-pad full innovation-wrapper text bg-white">

                <!-- column 1 -->
                <div class="summary-wrapper">

                  <h2 class="title-primary">{{ innovation.innovationCards[currentInnovationIndex]?.title }}</h2>

                  <div [innerHtml]="innovation.innovationCards[currentInnovationIndex]?.summary"></div>

                  <div class="img-wrapper">
                    <img [src]="getSrc()" [alt]="'COMMON.MEDIA_NOT_AVAILABLE' | translate" height="146px" width="220px">
                  </div>

                  <h2 class="title-secondary">{{ 'DISCOVERDESCRIPTION.BENEFITS' | translate }}</h2>

                  <ul class="advantage-wrapper">
                    <li *ngFor="let advantage of innovation.innovationCards[currentInnovationIndex]?.advantages;">
                      {{ advantage.text[0] | uppercase }}{{ advantage.text | slice:1 }}
                    </li>
                  </ul>

                </div>

                <!-- column 2 -->
                <div class="issue-wrapper">
                  <h2 class="title-secondary">{{ 'DISCOVERDESCRIPTION.ISSUE' | translate }}</h2>
                  <div [innerHtml]="innovation.innovationCards[currentInnovationIndex]?.problem"></div>
                </div>

                <!-- column 3 -->
                <div class="solution-wrapper">
                  <h2 class="title-secondary">{{ 'DISCOVERDESCRIPTION.SOLUTION' | translate }}</h2>
                  <div [innerHtml]="innovation.innovationCards[currentInnovationIndex]?.solution"></div>
                </div>

              </div>
            </div>
          </section>
        </ng-container>
        <!-- /innovation detail -->

        <!-- innovation targeting -->
        <ng-container *ngIf="showDetails">
          <section class="section-light-pad report-targeting-print" [ngStyle]="{ 'display': sharable ? 'flex' : 'none' }">
            <div class="column col-xs-12 col-11 col-mx-auto">
              <div class="section-pad full targeting-wrapper bg-white text">

                <!-- column 1 -->
                <div class="map-wrapper">

                  <h2 class="title-primary">{{ 'PROJECT_MODULE.SETUP.TARGETING_TAB' | translate }}</h2>

                  <p class="title-secondary">{{ 'MARKET_REPORT.TARGET_COUNTRIES' | translate }}</p>

                  <app-worldmap
                    [initialConfiguration]="continentTarget"
                    [countriesColor]="'#2ECC71'"
                    [isEditable]="false"
                    [width]="'auto'">
                  </app-worldmap>

                  <div *ngIf="innovation.settings.geography.exclude.length > 0" class="question-wrapper">
                    <p class="title-secondary">{{ 'SHARED_PROJECT_SETTINGS.GEOGRAPHY.SPECIFY_COUNTRIES_TO_EXCLUDE' | translate }}</p>
                    <div *ngFor="let country of innovation.settings.geography.exclude" class="label label-answer">
                      {{ country.name }}
                    </div>
                  </div>

                  <div *ngIf="innovation.settings.market.comments.length > 0" class="question-wrapper">
                    <p class="title-secondary">{{ 'SHARED_PROJECT_SETTINGS.MARKET.LABEL' | translate }}</p>
                    <p>{{ innovation.settings.market.comments }}</p>
                  </div>

                </div>

                <!-- column 2 -->
                <div class="c2-answer-wrapper">

                  <div *ngIf="innovation.settings.companies.include.length > 0" class="question-wrapper">
                    <p class="title-secondary">{{ 'SHARED_PROJECT_SETTINGS.COMPANIES.TO_INCLUDE' | translate }}</p>
                    <div *ngFor="let companyInclude of innovation.settings.companies.include" class="label label-answer">
                      {{ companyInclude.name }}
                    </div>
                  </div>

                  <div *ngIf="innovation.settings.companies.exclude.length > 0" class="question-wrapper">
                    <p class="title-secondary">{{ 'SHARED_PROJECT_SETTINGS.COMPANIES.TO_EXCLUDE' | translate }}</p>
                    <div *ngFor="let companyExclude of innovation.settings.companies.exclude" class="label label-answer">
                      {{ companyExclude.name }}
                    </div>
                  </div>

                  <div *ngIf="innovation.settings.professionals.description.length > 0" class="question-wrapper">
                    <p class="title-secondary">{{ 'SHARED_PROJECT_SETTINGS.PROFESSIONALS.LABEL' | translate }}</p>
                    <p>{{ innovation.settings.professionals.description }}</p>
                  </div>

                  <div *ngIf="innovation.settings.professionals.exclude.length > 0" class="question-wrapper">
                    <p class="title-secondary">{{ 'SHARED_PROJECT_SETTINGS.PROFESSIONALS.TO_EXCLUDE' | translate }}</p>
                    <div *ngFor="let professionalExclude of innovation.settings.professionals.exclude" class="label label-answer">
                      {{ professionalExclude.text }}
                    </div>
                  </div>

                  <div *ngIf="innovation.settings.comments.length > 0" class="question-wrapper">
                    <p class="title-secondary">{{ 'SHARED_PROJECT_SETTINGS.OTHER.LABEL' | translate }}</p>
                    <p>{{ innovation.settings.comments }}</p>
                  </div>

                </div>

              </div>
            </div>
          </section>
        </ng-container>
        <!-- /innovation targeting -->


        <!-- Innovation analytics -->
        <section
          *ngIf="showDetails"
          class="section-light-container report-analytics-print"
          [ngStyle]="{ 'display': sharable ? 'flex' : 'none' }">
          <div class="column col-xs-12 col-11 col-mx-auto">
            <div class="section-container full exploration-wrapper white-background">

              <!-- Heading -->
              <h1 class="main-heading">{{ 'PROJECT_MODULE.EXPLORATION.ANALYTICS.TITLE' | translate }}</h1>

              <!-- Analytic -->
              <div class="analytic-wrapper">

                <!-- Reached -->
                <div class="info-analytic-wrapper">
                  <p>{{ 'PROJECT_MODULE.EXPLORATION.ANALYTICS.PROFESSIONALS_REACHED' | translate }}</p>
                  <h5 class="text-center">{{ campaignStats?.nbProsSent || 0 }}</h5>
                </div>
                <div class="info-analytic-wrapper pd-top">
                  <svg width="80px" height="38px" viewBox="0 0 80 38">
                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                      <g transform="translate(-701.000000, -810.000000)">
                        <g transform="translate(701.000000, 810.000000)">
                          <polygon fill="#2ECC71" points="0 0 64.1497147 0 80 19.8465833 64.1497147 38 0 38 14.6486762 19"></polygon>
                          <text class="svg-text">
                            <tspan x="27.4760742" y="24">{{ percentageCalculation(campaignStats?.nbProsSent, campaignStats?.nbProsOpened) || 0 }}%</tspan>
                          </text>
                        </g>
                      </g>
                    </g>
                  </svg>
                </div>

                <!-- Emails -->
                <div class="info-analytic-wrapper">
                  <p>{{ 'PROJECT_MODULE.EXPLORATION.ANALYTICS.EMAILS_OPENED' | translate }}</p>
                  <h5 class="text-center">{{ campaignStats?.nbProsOpened || 0 }}</h5>
                </div>
                <div class="info-analytic-wrapper pd-top">
                  <svg width="80px" height="38px" viewBox="0 0 80 38">
                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                      <g transform="translate(-701.000000, -810.000000)">
                        <g transform="translate(701.000000, 810.000000)">
                          <polygon fill="#EA5858" points="0 0 64.1497147 0 80 19.8465833 64.1497147 38 0 38 14.6486762 19"></polygon>
                          <text class="svg-text">
                            <tspan x="27.4760742" y="24">{{ percentageCalculation(campaignStats?.nbProsOpened, campaignStats?.nbProsClicked) || 0 }}%</tspan>
                          </text>
                        </g>
                      </g>
                    </g>
                  </svg>
                </div>

                <!-- Clicks -->
                <div class="info-analytic-wrapper">
                  <p>{{ 'PROJECT_MODULE.EXPLORATION.ANALYTICS.CLICKS' | translate }}</p>
                  <h5 class="text-center">{{ campaignStats?.nbProsClicked || 0 }}</h5>
                </div>
                <div class="info-analytic-wrapper pd-top">
                  <svg width="80px" height="38px" viewBox="0 0 80 38">
                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                      <g transform="translate(-701.000000, -810.000000)">
                        <g transform="translate(701.000000, 810.000000)">
                          <polygon fill="#F79323" points="0 0 64.1497147 0 80 19.8465833 64.1497147 38 0 38 14.6486762 19"></polygon>
                          <text class="svg-text">
                            <tspan x="27.4760742" y="24">{{ percentageCalculation(campaignStats?.nbProsClicked, campaignStats?.nbValidatedResp) || 0 }}%</tspan>
                          </text>
                        </g>
                      </g>
                    </g>
                  </svg>
                </div>

                <!-- Answers -->
                <div class="info-analytic-wrapper">
                  <p>{{ 'PROJECT_MODULE.EXPLORATION.ANALYTICS.ANSWERS' | translate }}</p>
                  <h5 class="text-center">{{ campaignStats?.nbValidatedResp || 0 }}</h5>
                </div>

              </div>

              <!-- Companies contact -->
              <div *ngIf="innovation.settings.companies.include.length > 0" class="company-wrapper">
                <h1 class="section-heading">{{ 'PROJECT_MODULE.EXPLORATION.COMPANIES_LIST_TITLE' | translate }}</h1>
                <ul class="name-wrapper">
                  <li *ngFor="let company of innovation.settings.companies.include; let i = index;">
                    {{ i + 1 + '.'}} {{ formatCompanyName(company.name) }}
                  </li>
                </ul>
              </div>

            </div>
          </div>
        </section>
        <!-- /Innovation analytics -->


        <!-- Key learning section -->
        <section
          *ngIf="innovation.marketReport?.keyLearning?.conclusion.length > 0 || adminSide"
          class="section-light-container report-key-learnings-print"
          id="key-learning">
          <div class="column col-xs-12 col-11 col-mx-auto">
            <div class="keyLearning-wrapper">
              <div class="section-container full">
                <h1 class="main-heading">{{ 'MARKET_REPORT.KEY_LEARNING' | translate }}</h1>
                <p *ngIf="isMainDomain()" class="op-text">{{ 'COMMON.UMI_WORD' | translate }}</p>
                <app-text-zone
                  [elementId]="'keyLearning'"
                  [readonly]="!adminSide"
                  [data]="innovation.marketReport?.keyLearning?.conclusion"
                  (onTextChange)="saveOperatorComment($event, 'keyLearning')">
                </app-text-zone>
              </div>
            </div>
          </div>
        </section>
        <!-- /Key learning section -->


        <!-- Origin Comment and Professional Responses -->
        <section class="section-light-container report-origin-print" id="professionals">
          <div class="column col-xs-12 col-11 col-mx-auto">
            <div class="origin-wrapper">
              <div>

                <!--<div *ngFor="let item of answersOrigins | keyvalue">
                  <b>{{ ('CONTINENTS.' + item.key) | translate }}</b>: {{item.value}}
                </div>-->

                <app-question-conclusion
                  [innovation]="innovation"
                  [question]="{ identifier: 'professionals', subtitle: { en: 'professionals', fr: 'professionnels' }, title: { en: 'Origin of responses', fr: 'Origine des réponses' } }"
                  [readonly]="!adminSide"
                  [originAnswers]="answersOrigins"
                  [stats]="{ nbAnswers: answers.length, percentage: 0 }">
                </app-question-conclusion>

                <div *ngIf="adminSide" class="abstract-wrapper">
                  <h1 class="main-heading">{{ 'MARKET_REPORT.EXECUTIVE.ABSTRACT' | translate }}</h1>
                  <div class="form-group">
                    <label class="form-label" for="market-report-professionals">
                      <textarea
                        class="form-input"
                        id="market-report-professionals"
                        [attr.placeholder]="'MARKET_REPORT.EXECUTIVE_PLACEHOLDER.PROFESSIONAL' | translate"
                        rows="5"
                        [(ngModel)]="innovation.executiveReport.professionalAbstract"
                        (focusout)="update($event)"
                        maxlength="160">
                      </textarea>
                    </label>
                    <div class="charRemaining">
                      <span
                        [ngStyle]="{ 'color': getColor((innovation.executiveReport?.professionalAbstract.length | characterCountdown:160), 160) }">
                        {{ innovation.executiveReport?.professionalAbstract.length | characterCountdown:160 }}
                      </span>
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </section>
        <!-- /Origin Comment and Professional Responses -->


        <!-- Map -->
        <section class="section-light-container report-map-print">
          <div class="column col-xs-12 col-11 col-mx-auto">
            <div class="map-wrapper">
              <app-worldmap
                (updateContinent)="filterByContinents($event)"
                [countries]="countries"
                [countriesColor]="'#2ECC71'"
                [initialConfiguration]="mapInitialConfiguration"
                [synthesis]="true"
                [width]="'auto'">
              </app-worldmap>
            </div>
          </div>
        </section>
        <!-- /Map -->


        <!-- Professionals -->
        <section class="section-light-container report-professionals-print">
          <div class="column col-xs-12 col-11 col-mx-auto">
            <div class="professional-wrapper">
              <div *ngFor="let answer of filteredAnswers" class="profile">
                <img
                  src="https://res.cloudinary.com/umi/image/upload/v1539175831/app/default-images/icons/filter.png"
                  height="13px"
                  width="20px"
                  style="margin-top: .125rem"
                  (click)="filterPro(answer, $event)">
                <app-pro-tag
                  [answer]="answer"
                  (modalAnswerChange)="seeAnswer($event)"
                  [ngStyle]="{ 'width': '100%', 'height': '100%' }">
                </app-pro-tag>
              </div>
            </div>
          </div>
        </section>
        <!-- /Professionals -->


        <!-- Other question and answers -->
        <div class="column col-xs-12 col-11 col-mx-auto report-other-sections-print">
          <div *ngFor="let question of questions">
            <div class="section-light-container">
              <app-question-section
                [project]="innovation"
                [question]="question"
                [answers]="filteredAnswers"
                [showDetails]="showDetails"
                [readonly]="!adminSide"
                (modalAnswerChange)="seeAnswer($event)">
              </app-question-section>
            </div>
          </div>
        </div>
        <!-- /Other question and answers -->


        <!-- Conclusion -->
        <section
          *ngIf="innovation.marketReport?.finalConclusion?.conclusion.length > 0 || adminSide"
          class="section-light-container report-conclusion-print"
          id="conclusion">
          <div class="column col-xs-12 col-11 col-mx-auto">
            <div class="conclusion-wrapper">
              <div class="section-container full">
                <h1 class="main-heading">{{ 'MARKET_REPORT.CONCLUSION' | translate }}</h1>
                <p *ngIf="isMainDomain()" class="op-text">{{ 'COMMON.UMI_WORD' | translate }}</p>
                <app-text-zone
                  [elementId]="'finalConclusion'"
                  [readonly]="!adminSide"
                  [data]="innovation.marketReport?.finalConclusion?.conclusion"
                  (onTextChange)="saveOperatorComment($event, 'finalConclusion')">
                </app-text-zone>
              </div>
            </div>
          </div>
        </section>
        <!-- /Conclusion -->


      </section>
      <!-- /Answer sections -->

    </ng-container>
    <!-- /project status submitted -->


  </section>
</ng-container>


<!--

&lt;!&ndash; Modal to ask operator to sure about ending the project, and to client to print &ndash;&gt;
<div class="modal" [ngClass]="{ 'active': openModal }">
  <div class="modal-overlay" (click)="closeModal($event)"></div>
  <div class="modal-container">

    &lt;!&ndash; Header &ndash;&gt;
    <div class="modal-header">
      <button class="btn btn-clear float-right" (click)="closeModal($event)"></button>
      <div class="modal-title">

        <ng-container *ngIf="innovationEndModal">
          {{ 'MARKET_REPORT.MODAL.END_INNOVATION_TITLE' | translate }}
        </ng-container>

        <ng-container *ngIf="innovationExport">
          {{ 'MARKET_REPORT.MODAL.EXPORT_INNOVATION_TITLE' | translate }}
        </ng-container>

      </div>
    </div>
    &lt;!&ndash; /Header &ndash;&gt;

    &lt;!&ndash; Body &ndash;&gt;
    <div class="modal-body">
      <div class="content">

        <ng-container *ngIf="innovationEndModal">
          {{ 'MARKET_REPORT.MODAL.END_INNOVATION_CONTENT' | translate }}
        </ng-container>

        <ng-container *ngIf="innovationExport">

          &lt;!&ndash; Export options &ndash;&gt;
          <div class="export-options">

            &lt;!&ndash; RESP Pdf &ndash;&gt;
            <div class="options">
              <h5 class="type-heading">{{ 'MARKET_REPORT.MODAL.EXPORT_INNOVATION_CONTENT.A' | translate }}</h5>
              <h6 class="type-subHeading">{{ 'MARKET_REPORT.MODAL.EXPORT_INNOVATION_CONTENT.PDF' | translate }}</h6>
              <img src="https://res.cloudinary.com/umi/image/upload/v1540285006/app/default-images/icons/pdf.png">
              <div
                class="btn-radio"
                [ngClass]="{ 'active': 'respReport' === exportType }"
                (click)="assignExportType($event, 'respReport')">
                <span>•</span>
              </div>
            </div>

              &lt;!&ndash; CSV &ndash;&gt;
              <div class="options">
                  <h5 class="type-heading">{{ 'MARKET_REPORT.MODAL.EXPORT_INNOVATION_CONTENT.A' | translate }}</h5>
                  <h6 class="type-subHeading">{{ 'MARKET_REPORT.MODAL.EXPORT_INNOVATION_CONTENT.EXCEL' | translate }}</h6>
                  <img src="https://res.cloudinary.com/umi/image/upload/v1540285006/app/default-images/icons/csv.png">
                  <div
                    class="btn-radio"
                    [ngClass]="{ 'active': 'excel' === exportType }"
                    (click)="assignExportType($event, 'excel')">
                    <span>•</span>
                  </div>
              </div>

            &lt;!&ndash; Executive report &ndash;&gt;
            <div class="options">
              <h5 class="type-heading">{{ 'MARKET_REPORT.MODAL.EXPORT_INNOVATION_CONTENT.B' | translate }}</h5>
              <h6 class="type-subHeading">{{ 'MARKET_REPORT.MODAL.EXPORT_INNOVATION_CONTENT.C' | translate }}</h6>
              <img src="https://res.cloudinary.com/umi/image/upload/v1540284995/app/default-images/icons/pdf.png">
              <div
                class="btn-radio"
                [ngClass]="{ 'active': 'executiveReport' === exportType }"
                (click)="assignExportType($event, 'executiveReport')">
                <span>•</span>
              </div>
            </div>

          </div>
          &lt;!&ndash; Export options &ndash;&gt;

          &lt;!&ndash; Export consent &ndash;&gt;
          <label class="form-checkbox export" for="market-report-consent">
            <input
              type="checkbox"
              id="market-report-consent"
              value="true"
              name="market-report-consent"
              (change)="toggleConsent($event)"
              [checked]="innovation.ownerConsent.value">
            <i class="form-icon"></i><span class="export-consent">{{ 'MARKET_REPORT.MODAL.EXPORT_INNOVATION_NOTE' | translate }}</span>
          </label>
          &lt;!&ndash; /Export consent &ndash;&gt;

        </ng-container>

      </div>
    </div>
    &lt;!&ndash; /Body &ndash;&gt;

    &lt;!&ndash; Footer &ndash;&gt;
    <div class="modal-footer">

      <ng-container *ngIf="innovationEndModal">
        &lt;!&ndash; End innovation &ndash;&gt;
        <button
          class="btn btn-primary btn-sm"
          (click)="endInnovation($event, 'DONE')">
          {{ 'MARKET_REPORT.MODAL.BUTTON_CONFIRM' | translate }}
        </button>
      </ng-container>

      <ng-container *ngIf="innovationExport">

        &lt;!&ndash; Cancel button &ndash;&gt;
        <button
          class="btn ghost-edit btn-sm export-cancel-button"
          [ngStyle]="{ 'margin-right': '.6rem' }"
          (click)="closeModal($event)">
          {{ 'MARKET_REPORT.MODAL.BUTTON_CANCEL' | translate }}
        </button>

        &lt;!&ndash; Download button &ndash;&gt;
        <button
          class="btn ghost-primary btn-sm"
          [disabled]="exportType === '' || !innovation.ownerConsent.value"
          (click)="exportInnovation($event)">
          {{ 'MARKET_REPORT.MODAL.BUTTON_DOWNLOAD' | translate }}
        </button>

      </ng-container>

    </div>
    &lt;!&ndash; /Footer &ndash;&gt;

  </div>
</div>
&lt;!&ndash; /Modal to ask operator to sure about ending the project, and to client to print &ndash;&gt;

-->

<!-- Insight preview -->
<app-sidebar *ngIf="!wordpress" [(template)]="sidebarTemplateValue">
  <app-user-answer
    [adminMode]="adminSide"
    [sidebarState]="sidebarTemplateValue.animate_state"
    [(userAnswer)]="modalAnswer"
    [projectId]="innovation._id"
    [questions]="questions">
  </app-user-answer>
</app-sidebar>
