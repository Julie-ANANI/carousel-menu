<ng-container *ngIf="campaign">
  <section id="shared-search-pros-component">
    <div class="search-section">

      <!-- search wrapper -->
      <div class="search-wrapper">

        <!-- heading -->
        <div class="heading-wrapper">

          <h2 class="title-secondary">Rocket Testing</h2>

          <span class="text-link" (click)="onReset()">Reset</span>

          <span class="line">|</span>

          <div class="popover popover-top">

            <span class="text-help">Help</span>

            <div class="popover-container">
              <div class="card">
                <div class="card-body">

                  <div class="display-flex align-center">
                    <div class="shape circle circle-xs circle-success"></div>
                    <span>Relevant</span>
                  </div>

                  <div class="display-flex align-center">
                    <div class="shape circle circle-xs circle-progress"></div>
                    <span>Average</span>
                  </div>

                  <div class="display-flex align-center">
                    <div class="shape circle circle-xs circle-alert"></div>
                    <span>Overused</span>
                  </div>

                  <div class="display-flex align-center">
                    <div class="icons icons-delete"><i class="fas fa-exclamation-triangle"></i></div>
                    <span>Too much pros duplicated</span>
                  </div>

                  <hr class="hr">

                  <ul>
                    <li>No capital letters or "s".</li>
                    <li>Numbers can't be processed.</li>
                    <li>Please enter at least 2 request.</li>
                  </ul>

                </div>
              </div>
            </div>

          </div>

        </div>
        <!-- /heading -->

        <!-- input -->
        <div class="input-wrapper">

          <div class="form-group">
            <textarea
              type="text"
              class="form-input"
              name="cat-keywords"
              rows="5"
              [(ngModel)]="params.catKeywords"
              placeholder="Search here using Computer Aided Targeting. One request per line.">
            </textarea>
            <ng-container *ngIf="params.catKeywords">
              <span class="search-button-wrapper" (click)="onClickSearchCat($event)"><i class="fas fa-search"></i></span>
            </ng-container>
          </div>

          <div class="remaining-wrapper">
            <div class="display-flex align-center">
              <span class="shape circle circle-xs" [ngClass]="getCatCircleClass()"></span>
              <span>Search Requests</span>
            </div>
            <div><span>Remaining for today: {{ catQuota }}</span></div>
          </div>

        </div>
        <!-- /input -->

        <!-- loader -->
        <ng-container *ngIf="displayLoader">
          <div class="loader-wrapper">
            <div class="loading loading-lg"></div>
          </div>
        </ng-container>
        <!-- /loader -->

        <!-- display cat result *ngIf="catProcessDone && !displayLoader" -->
        <ng-container>

          <!-- analysis -->
          <div class="analysis-wrapper">

            <div class="heading-wrapper">
              <h2 class="title-secondary">Analysis</h2>
              <ng-container *ngIf="catResult && catResult.duplicate_status !== 'ok'">
                <div class="icons icons-delete"><i class="fas fa-exclamation-triangle"></i></div>
              </ng-container>
            </div>

            <div class="analysis-content">
              <ul>
                <li *ngFor="let suggestion of suggestions">
                  <div class="display-flex"><span class="text-pros">{{ suggestion.expected_result }} pros</span><div [innerHTML]="suggestion.search_keywords"></div></div>
                  <div (click)="onClickPlus(suggestion.keywords)" [ngClass]="{ 'inactive':  }"><i class="fas fa-plus-circle"></i></div>
                </li>
              </ul>
            </div>

          </div>
          <!-- /analysis -->

        </ng-container>
        <!-- /display cat result -->

      </div>
      <!-- /search wrapper -->

      <!-- search wrapper -->
      <div class="search-wrapper">

        <!-- heading -->
        <div class="heading-wrapper">
          <h2 class="title-secondary">Rocket Launching</h2>
          <span class="text-link" (click)="onClickSettings()">Settings</span>
        </div>
        <!-- /heading -->

        <!-- input -->
        <div class="input-wrapper">

          <div class="form-group">
            <textarea
              type="text"
              class="form-input"
              name="keywords"
              rows="5"
              (ngModelChange)="estimateNumberOfGoogleRequests()"
              [(ngModel)]="params.keywords"
              placeholder="Search here like 'Google'. One request per line.">
            </textarea>
            <ng-container *ngIf="params.keywords">
              <span class="search-button-wrapper" (click)="onClickSearch($event)"><i class="fas fa-search"></i></span>
            </ng-container>
          </div>

          <div class="remaining-wrapper">
            <div class="display-flex align-center">
              <span class="shape circle circle-xs" [ngClass]="getCircleClass()"></span>
              <span>Search Emails</span>
            </div>
            <div><span>Remaining requests: {{ googleQuota }}</span></div>
          </div>

        </div>
        <!-- /input -->

      </div>
      <!-- /search wrapper -->

    </div>
  </section>
</ng-container>


<!-- sidebar to advanced search -->
<app-sidebar [(template)]="sidebarValue">
  <app-sidebar-search
    [params]="params"
    (paramsChange)="updateSettings($event)">
  </app-sidebar-search>
</app-sidebar>
<!-- /sidebar to advanced search -->







<!--
<div class="columns">
  <div class="column col-5 col-ml-auto">

    <div *ngIf="catDone" class="cat">
      &lt;!&ndash; Keywords analysis and expected result &ndash;&gt;
      <h3>Analysis</h3>
      <div *ngFor="let s of suggestion"  class="request-analysis">
        {{s.expected}} professionals found <span [innerHTML]=s.kw > </span>
      </div>

      &lt;!&ndash; Additional keywords &ndash;&gt;
      <h4>Suggested keywords</h4>
      <div class="additional-keywords" [ngStyle]="{ 'display': 'flex' }">
        <div *ngFor="let kw of catResult.new_keywords" >
          {{kw}} |
        </div>
      </div>

      &lt;!&ndash; Star profiles &ndash;&gt;
      <h5>4 star profiles:</h5>
      <div *ngFor="let profile of catResult.profile | keyvalue" class="stars">
        <p class="tooltip" data-tooltip="Ã§a ne marche pas encore :'("> <a href= "{{ profile.key }}" target="_blank">{{ profile.value.title }}</a> </p>
      </div>
    </div>

  </div>

  <div class="column col-2 col-mr-auto" [ngSwitch]="catResult.duplicate_status">
    <div class="bot-wrapper text-center" *ngSwitchCase="'ok'">
      <span class="bot-rect">
        <span *ngIf="estimatedNumberOfGoogleRequests">
          {{ 'SEARCH.ROBOT.SEARCH_USE' | translate }}
          <strong> <span *ngIf="catResult.total_result">{{ 'SEARCH.ROBOT.APPROX' | translate }}</span> {{estimatedNumberOfGoogleRequests}} {{ 'SEARCH.REQUESTS' | translate }} <span
            *ngIf="catResult.total_result">max</span></strong>.
        <a *ngIf="!catResult.keywords_analysis && campaign" (click)="cat($event)">{{ 'SEARCH.ROBOT.MORE_INFO' | translate }}</a>
        </span>
        <span *ngIf="!estimatedNumberOfGoogleRequests">{{ 'SEARCH.ROBOT.HELLO' | translate }}</span>
      </span>
      <br>
      <img src="https://res.cloudinary.com/umi/image/upload/app/default-images/bot-triangle.svg" class="bot-trian">
      <div><img src="https://res.cloudinary.com/umi/image/upload/app/default-images/bot-advice.svg" width=""
                height="120">
      </div>
    </div>

    <div class="bot-wrapper text-center" *ngSwitchCase="'not ok'">
      <span class="bot-rect">{{ 'SEARCH.ROBOT.NOT_OK' | translate }}<br/>
        <span *ngIf="estimatedNumberOfGoogleRequests">{{ 'SEARCH.ROBOT.SEARCH_USE' | translate }} <strong>{{ 'SEARCH.ROBOT.APPROX' | translate }} {{estimatedNumberOfGoogleRequests}} {{ 'SEARCH.REQUESTS' | translate }}</strong>.</span>
      </span>
      <br>
      <img src="https://res.cloudinary.com/umi/image/upload/app/default-images/bot-triangle.svg" class="bot-trian">
      <div><img src="https://res.cloudinary.com/umi/image/upload/app/default-images/bot-1.svg" width="" height="120">
      </div>
    </div>

    <div class="bot-wrapper text-center" *ngSwitchCase="'error'">
      <span class="bot-rect"> {{ 'SEARCH.ROBOT.ERROR' | translate }}</span>
      <br>
      <img src="https://res.cloudinary.com/umi/image/upload/app/default-images/bot-triangle.svg" class="bot-trian">
      <div><img src="https://res.cloudinary.com/umi/image/upload/app/default-images/error-bot.svg" width=""
                height="120">
      </div>
    </div>
  </div>
</div>
-->
