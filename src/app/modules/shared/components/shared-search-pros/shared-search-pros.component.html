<div class="columns">
  <div class="column col-5 col-ml-auto">

    <app-sidebar [template]="more" (closeSidebar)="closeSidebar($event)">
      <app-sidebar-search
        [params]="params"
        (paramsChange)="updateSettings($event)">
      </app-sidebar-search>
    </app-sidebar>

    <div>
      <div *ngIf="suggestion" class="suggestedRequests">
        <p [innerHTML]="suggestion"></p>
        <p>
          <a class="text-success" (click)="applySuggestion()">{{ 'SEARCH.APPLY' | translate }}</a><br/>
          <a class="text-error" (click)="ignoreSuggestion()">{{ 'SEARCH.IGNORE' | translate }}</a>
        </p>
      </div>
      <div id="input-search">
        <textarea
          type="text"
          class="form-default input-lg"
          name="keywords"
          rows="4"
          (ngModelChange)="estimateNumberOfGoogleRequests()"
          [(ngModel)]="params.keywords"
          required
          [placeholder]="'SEARCH.INPUT' | translate ">
        </textarea>

        <button
          (click)="search($event)"
          class="btn-round btn-primary"
          translate>
          <i class="fas fa-search"></i>
        </button>
      </div>
    </div>

    <div class="tips">
      <a (click)="changeSettings() && $event.preventDefault()">{{ 'SEARCH.SETTINGS' | translate }}</a>

      <div class="label-validate" *ngIf="googleQuota > 10000">{{ googleQuota }} {{ 'SEARCH.REMAINING_REQUESTS' | translate }}
        <i (click)="getGoogleQuota()" class="fas fa-sync c-hand"></i>
      </div>

      <div class="label-progress" *ngIf="googleQuota < 10000 && googleQuota > 5000">{{ googleQuota }} {{ 'SEARCH.REMAINING_REQUESTS' | translate }}
        <i (click)="getGoogleQuota()" class="fas fa-sync c-hand"></i>
      </div>

      <div class="label-alert" *ngIf="googleQuota < 5000">{{ googleQuota }} {{ 'SEARCH.REMAINING_REQUESTS' | translate }}
        <i (click)="getGoogleQuota()" class="fas fa-sync c-hand"></i>
      </div>
    </div>

  </div>

  <div class="column col-2 col-mr-auto" [ngSwitch]="catResult.type">
    <div class="bot-wrapper text-center" *ngSwitchCase="'info'">
      <span class="bot-rect">
        <span *ngIf="catResult.advice">
          {{ 'SEARCH.ROBOT.' + catResult.advice.toUpperCase() | translate }} <br/>
        </span>
        <span *ngIf="estimatedNumberOfGoogleRequests">
          {{ 'SEARCH.ROBOT.SEARCH_USE' | translate }}
          <strong> <span *ngIf="catResult.totalResults">{{ 'SEARCH.ROBOT.APPROX' | translate }}</span> {{estimatedNumberOfGoogleRequests}} {{ 'SEARCH.REQUESTS' | translate }} <span *ngIf="catResult.totalResults">max</span></strong>.
        <a *ngIf="!catResult.advice && campaign" (click)="cat()">{{ 'SEARCH.ROBOT.MORE_INFO' | translate }}</a>
        </span>
        <span *ngIf="!estimatedNumberOfGoogleRequests">{{ 'SEARCH.ROBOT.HELLO' | translate }}</span>
      </span>
      <br>
      <img src="https://res.cloudinary.com/umi/image/upload/app/default-images/bot-triangle.svg" class="bot-trian">
      <div><img src="https://res.cloudinary.com/umi/image/upload/app/default-images/bot-advice.svg" width="" height="120"></div>
    </div>

    <div class="bot-wrapper text-center" *ngSwitchCase="'ok'">
      <span class="bot-rect">{{ 'SEARCH.ROBOT.OK' | translate }}<br/>
        <span *ngIf="estimatedNumberOfGoogleRequests">{{ 'SEARCH.ROBOT.SEARCH_USE' | translate }} <strong>{{ 'SEARCH.ROBOT.APPROX' | translate }} {{estimatedNumberOfGoogleRequests}} {{ 'SEARCH.REQUESTS' | translate }}</strong>.</span>
      </span>
      <br>
      <img src="https://res.cloudinary.com/umi/image/upload/app/default-images/bot-triangle.svg" class="bot-trian">
      <div><img src="https://res.cloudinary.com/umi/image/upload/app/default-images/bot-1.svg" width="" height="120"></div>
    </div>

    <div class="bot-wrapper text-center" *ngSwitchCase="'error'">
      <span class="bot-rect"> {{ 'SEARCH.ROBOT.ERROR' | translate }}</span>
      <br>
      <img src="https://res.cloudinary.com/umi/image/upload/app/default-images/bot-triangle.svg" class="bot-trian">
      <div><img src="https://res.cloudinary.com/umi/image/upload/app/default-images/error-bot.svg" width="" height="120"></div>
    </div>
  </div>
</div>
