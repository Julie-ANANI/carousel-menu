<div id="showcase">
  <div class="column col-xs-12 col-11 col-mx-auto">

    <!-- history icon -->
    <div class="shape circle circle-white history-wrapper c-hand absolute tooltip tooltip-left history-icon"
         [attr.data-tooltip]="'COMMON.TOOLTIP.HISTORY' | translate"
         (click)="onClickHistoryIcon($event)">
      <i class="fas fa-history text-notify"></i>
    </div>
    <!-- /history icon -->


    <!-- when fetching error -->
    <ng-container *ngIf="fetchingError">
      <div class="d-flex s-error-wrapper align-center">
        <app-error-template-1 [ngStyle]="{ 'width': '100%' }" [errorMessage]="'ERROR.ERRORS.FETCHING'"></app-error-template-1>
      </div>
    </ng-container>
    <!-- /when fetching error -->


    <!-- start process -->
    <ng-container *ngIf="selectedTagsStats.length === 0 && !fetchingError">
      <div class="s-start-wrapper d-flex align-center">
        <app-message-template-2 [ngStyle]="{ 'width': '100%' }" [animation]="true">

          <div class="text-center">

            <h4 [innerText]="'SHOWCASE.CREATE_SHOWCASE'" class="text-background" translate></h4>

            <div class="m-top-25">
              <button (click)="modifyTag()" class="btn btn-primary rounded shadow" type="button">
                <i class="fas fa-pencil-alt m-no-left"></i>
                {{ 'COMMON.BUTTON.CREATE' | translate }}
              </button>
            </div>

          </div>

        </app-message-template-2>
      </div>
    </ng-container>
    <!-- /start process-->


    <!-- section stat -->
    <ng-container *ngIf="selectedTagsStats.length > 0 && !fetchingError">
      <div class="section-pad">

        <!-- heading -->
        <h1 class="text-center title-primary text-normal" [innerText]="'SHOWCASE.MAIN_TITLE'" translate></h1>
        <!-- /heading -->

        <!-- header section -->
        <div class="d-flex selected-tags-wrapper text-center">

          <div *ngFor="let tagStat of selectedTagsStats; let i = index;" class="tag text-notify">
            <span>{{ tagStat.tag.label | multiling:currentLang | FormatText }}</span>
            <ng-container *ngIf=" i !== selectedTagsStats.length - 1 "> / </ng-container>
          </div>

          <!-- modify tag link -->
          <div
            class="text-link text-xs tooltip tooltip-hide-sm"
            [attr.data-tooltip]="'SHOWCASE.TOOLTIP.MODIFY_TAGS' | translate"
            (click)="modifyTag()">
            <span [innerText]="'SHOWCASE.MODIFY'" translate></span>
          </div>

        </div>
        <!-- /header section -->

        <!-- horizontal line -->
        <hr class="hr hr-main">
        <!-- /horizontal line -->

        <!-- section answer and innovations -->
        <div class="flex-centered section-wrapper section-pad">

          <!-- answers wrapper -->
          <div class="answer-wrapper">
            <app-showcase-answers
              [totalAnswers]="stats.totalAnswers"
              [tagsStats]="selectedTagsStats">
            </app-showcase-answers>
          </div>

          <!-- innovations wrapper -->
          <div class="innovation-wrapper">
            <app-showcase-innovations [tagsStats]="selectedTagsStats"></app-showcase-innovations>
          </div>

          <!-- clients wrapper -->
          <div class="client-wrapper">
            <app-showcase-clients [tagsStats]="selectedTagsStats"></app-showcase-clients>
          </div>

        </div>
        <!-- /section answer and innovations -->

        <!-- section map -->
        <div class="flex-centered section-wrapper section-pad">
          <div class="map-wrapper">

            <h2 class="text text-notify" [innerText]="'SHOWCASE.COUNTRIES_TITLE'" translate></h2>

            <h3 class="text-normal">
              {{ countriesCount }} <span [innerText]="'SHOWCASE.COUNTRIES'" translate></span>
            </h3>

            <admin-search-map
              [countriesData]="countries"
              [quartiles]="quartiles"
              [width]="'100%'">
            </admin-search-map>

          </div>
        </div>
        <!-- /section map -->

      </div>
    </ng-container>
    <!-- /section stat -->

  </div>
</div>


<!-- modal to modify the tags -->
<app-modal [(showModal)]="modalShow" [widthMax]="'70vw'" [modalPosition]="'70px'">

  <div class="flex-between">
    <h2 class="text text-background m-no-bottom title-secondary p-right-1 text-medium p-bottom-1" [innerText]="'SHOWCASE.SECTORS_MODAL.TITLE'" translate></h2>
    <button type="button" class="btn btn-close p-right-1 text-notify text-md" (click)="modalShow = false"></button>
  </div>

  <ng-container *ngIf="selectedTagsStats.length">
    <div class="selected-wrapper">
      <div *ngFor="let selected of selectedTagsStats" class="label label-tag label-rounded">
        <span>{{ selected.tag.label | multiling:currentLang }}</span>
      </div>
    </div>
  </ng-container>

  <hr class="hr">

  <div class="d-flex tags-wrapper flex-wrap">
    <div *ngFor="let tag of sectorTags" class="card card-responsive">
      <label class="form-checkbox text-sm">
        <input
          (change)="onChangeTag($event, tag)"
          [name]="tag.label | multiling:currentLang"
          type="checkbox">
        <i class="form-icon"></i>
        <span class="text-ellipsis">{{ tag.label | multiling:currentLang | FormatText }}</span>
      </label>
    </div>
  </div>

  <div class="modal-footer">

    <button [innerText]="'COMMON.BUTTON.CANCEL'" class="btn btn-sm btn-cancel" translate></button>

    <button
      (click)="onClickApply($event)"
      [innerText]="'COMMON.BUTTON.CONFIRM'"
      class="btn btn-sm btn-primary"
      translate>
    </button>

  </div>

</app-modal>
<!-- /modal to modify the tags -->

<!-- sidebar for history -->
<app-sidebar [(template)]="sidebarValue">
  <app-sidebar-showcase-history
    [tagsStats]="selectedTagsStats"
    (displayShowcase)="displayCustomShowcase($event)">
  </app-sidebar-showcase-history>
</app-sidebar>
<!-- /sidebar for history -->
